{
  "address": "0x000fec34466972987928d519948AA1b25EACD3E9",
  "abi": [
    {
      "inputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "lender",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loanId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "loanToken",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "collateralToken",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newPrincipal",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newCollateral",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "interestRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "interestDuration",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "collateralToLoanRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "currentMargin",
          "type": "uint256"
        }
      ],
      "name": "Borrow",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loanId",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "delegator",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "delegated",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "isActive",
          "type": "bool"
        }
      ],
      "name": "DelegatedManagerSet",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loanId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "feeRebatePercent",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "basisPoint",
          "type": "uint256"
        }
      ],
      "name": "EarnReward",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "receiver",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loanId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "feeRebatePercent",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "basisPoint",
          "type": "uint256"
        }
      ],
      "name": "EarnRewardFail",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "sourceToken",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "destToken",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "sourceAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "destAmount",
          "type": "uint256"
        }
      ],
      "name": "ExternalSwap",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loanId",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "sourceToken",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "destToken",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "sourceAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "destAmount",
          "type": "uint256"
        }
      ],
      "name": "LoanSwap",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "previousOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "payer",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loanId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "PayBorrowingFee",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "interestToken",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "lender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "effectiveInterest",
          "type": "uint256"
        }
      ],
      "name": "PayInterestTransfer",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "payer",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "PayLendingFee",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "payer",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loanId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "PayTradingFee",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "prevModuleContractAddress",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newModuleContractAddress",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "module",
          "type": "bytes32"
        }
      ],
      "name": "ProtocolModuleContractReplaced",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "lender",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "loanId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "collateralToken",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "loanToken",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "positionSize",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "borrowedAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "interestRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "settlementDate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "entryPrice",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "entryLeverage",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "currentLeverage",
          "type": "uint256"
        }
      ],
      "name": "Trade",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "asset",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "VaultDeposit",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "asset",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "to",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "VaultWithdraw",
      "type": "event"
    },
    {
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "fallback"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "admin",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "affiliateFeePercent",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "affiliateRewardsHeld",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "affiliateTradingTokenFeePercent",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "affiliatesReferrerBalances",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "affiliatesUserReferrer",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "loanParamsId",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "loanId",
          "type": "bytes32"
        },
        {
          "internalType": "bool",
          "name": "isTorqueLoan",
          "type": "bool"
        },
        {
          "internalType": "uint256",
          "name": "initialMargin",
          "type": "uint256"
        },
        {
          "components": [
            {
              "internalType": "address",
              "name": "lender",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "borrower",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "receiver",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "manager",
              "type": "address"
            }
          ],
          "internalType": "struct MarginTradeStructHelpers.SentAddresses",
          "name": "sentAddresses",
          "type": "tuple"
        },
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "interestRate",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "newPrincipal",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "interestInitialAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "loanTokenSent",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "collateralTokenSent",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "minEntryPrice",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "loanToCollateralSwapRate",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "interestDuration",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "entryLeverage",
              "type": "uint256"
            }
          ],
          "internalType": "struct MarginTradeStructHelpers.SentAmounts",
          "name": "sentValues",
          "type": "tuple"
        },
        {
          "internalType": "bytes",
          "name": "loanDataBytes",
          "type": "bytes"
        }
      ],
      "name": "borrowOrTradeFromPool",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "newPrincipal",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "newCollateral",
          "type": "uint256"
        }
      ],
      "payable": true,
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "borrowerNonce",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "borrowerOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "lockedAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "interestRate",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "minLoanTerm",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "maxLoanTerm",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "createdTimestamp",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "expirationTimestamp",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "borrowingFeePercent",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "borrowingFeeTokensHeld",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "borrowingFeeTokensPaid",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "delegatedManagers",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "feeRebatePercent",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "feesController",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "loanToken",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "collateralToken",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "collateralTokenAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "marginAmount",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "isTorqueLoan",
          "type": "bool"
        }
      ],
      "name": "getBorrowAmount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "borrowAmount",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "loanToken",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "collateralToken",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "loanTokenSent",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "collateralTokenSent",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "interestRate",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "newPrincipal",
          "type": "uint256"
        }
      ],
      "name": "getEstimatedMarginExposure",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "loanToken",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "collateralToken",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "newPrincipal",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "marginAmount",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "isTorqueLoan",
          "type": "bool"
        }
      ],
      "name": "getRequiredCollateral",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "collateralAmountRequired",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "internalType": "address",
          "name": "target",
          "type": "address"
        }
      ],
      "name": "initialize",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "isOwner",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "lenderInterest",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "principalTotal",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "owedPerDay",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "owedTotal",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "paidTotal",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "updatedTimestamp",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "lenderOrders",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "lockedAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "interestRate",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "minLoanTerm",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "maxLoanTerm",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "createdTimestamp",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "expirationTimestamp",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "lendingFeePercent",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "lendingFeeTokensHeld",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "lendingFeeTokensPaid",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "liquidationIncentivePercent",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "loanInterest",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "owedPerDay",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "depositTotal",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "updatedTimestamp",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "loanParams",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "id",
          "type": "bytes32"
        },
        {
          "internalType": "bool",
          "name": "active",
          "type": "bool"
        },
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "loanToken",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "collateralToken",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "minInitialMargin",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "maintenanceMargin",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "maxLoanTerm",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "loanPoolToUnderlying",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "loans",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "id",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "loanParamsId",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "pendingTradesId",
          "type": "bytes32"
        },
        {
          "internalType": "bool",
          "name": "active",
          "type": "bool"
        },
        {
          "internalType": "uint256",
          "name": "principal",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "collateral",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "startTimestamp",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "endTimestamp",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "startMargin",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "startRate",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "lender",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "lockedSOVAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "name": "logicTargets",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "maxDisagreement",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "maxSwapSize",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "minReferralsToPayout",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "pause",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "priceFeeds",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "protocolAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "protocolTokenAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "protocolTokenHeld",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "protocolTokenPaid",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "rolloverBaseReward",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "rolloverFlexFeePercent",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "loanId",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "delegated",
          "type": "address"
        },
        {
          "internalType": "bool",
          "name": "toggle",
          "type": "bool"
        }
      ],
      "name": "setDelegatedManager",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "sourceBuffer",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "sovTokenAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "sovrynSwapContractRegistryAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "specialRebates",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "supportedTokens",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "swapsImpl",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "tradingFeePercent",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "tradingFeeTokensHeld",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "tradingFeeTokensPaid",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "underlyingToLoanPool",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "userNotFirstTradeFlag",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "wrbtcToken",
      "outputs": [
        {
          "internalType": "contract IWrbtcERC20",
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0x75d0b4246bdc132590f69284776bab0bd95543000c5f41725930631c9a3e4909",
  "receipt": {
    "to": null,
    "from": "0xFEe171A152C02F336021fb9E79b4fAc2304a9E7E",
    "contractAddress": "0x000fec34466972987928d519948AA1b25EACD3E9",
    "transactionIndex": 0,
    "gasUsed": "5911938",
    "logsBloom": "0x00000000000000000000000800000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000080000000000000000000000000000000020000000000000002000800000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000100000000000000000",
    "blockHash": "0xdb38d8d5803a7b8b9a97f7971034208d0cf3ec25df2481ee3dc7bda610ac7a1f",
    "transactionHash": "0x75d0b4246bdc132590f69284776bab0bd95543000c5f41725930631c9a3e4909",
    "logs": [
      {
        "transactionIndex": 0,
        "blockNumber": 5996098,
        "transactionHash": "0x75d0b4246bdc132590f69284776bab0bd95543000c5f41725930631c9a3e4909",
        "address": "0x000fec34466972987928d519948AA1b25EACD3E9",
        "topics": [
          "0x8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0",
          "0x0000000000000000000000000000000000000000000000000000000000000000",
          "0x000000000000000000000000fee171a152c02f336021fb9e79b4fac2304a9e7e"
        ],
        "data": "0x",
        "logIndex": 0,
        "blockHash": "0xdb38d8d5803a7b8b9a97f7971034208d0cf3ec25df2481ee3dc7bda610ac7a1f"
      }
    ],
    "blockNumber": 5996098,
    "cumulativeGasUsed": "5911938",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 2,
  "solcInputHash": "444414c40f489390e118f5b65a5947cc",
  "metadata": "{\"compiler\":{\"version\":\"0.5.17+commit.d19bba13\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loanId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"loanToken\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"collateralToken\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newPrincipal\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newCollateral\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"interestRate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"interestDuration\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"collateralToLoanRate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"currentMargin\",\"type\":\"uint256\"}],\"name\":\"Borrow\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loanId\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"delegator\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"delegated\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"isActive\",\"type\":\"bool\"}],\"name\":\"DelegatedManagerSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loanId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"feeRebatePercent\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"basisPoint\",\"type\":\"uint256\"}],\"name\":\"EarnReward\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loanId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"feeRebatePercent\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"basisPoint\",\"type\":\"uint256\"}],\"name\":\"EarnRewardFail\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"sourceToken\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"destToken\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sourceAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"destAmount\",\"type\":\"uint256\"}],\"name\":\"ExternalSwap\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loanId\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"sourceToken\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"destToken\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sourceAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"destAmount\",\"type\":\"uint256\"}],\"name\":\"LoanSwap\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loanId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"PayBorrowingFee\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"interestToken\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"effectiveInterest\",\"type\":\"uint256\"}],\"name\":\"PayInterestTransfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"PayLendingFee\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loanId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"PayTradingFee\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"prevModuleContractAddress\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newModuleContractAddress\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"module\",\"type\":\"bytes32\"}],\"name\":\"ProtocolModuleContractReplaced\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"loanId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"collateralToken\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"loanToken\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"positionSize\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"borrowedAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"interestRate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"settlementDate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"entryPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"entryLeverage\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"currentLeverage\",\"type\":\"uint256\"}],\"name\":\"Trade\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"asset\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"VaultDeposit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"asset\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"VaultWithdraw\",\"type\":\"event\"},{\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"fallback\"},{\"constant\":true,\"inputs\":[],\"name\":\"admin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"affiliateFeePercent\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"affiliateRewardsHeld\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"affiliateTradingTokenFeePercent\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"affiliatesReferrerBalances\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"affiliatesUserReferrer\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"loanParamsId\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"loanId\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"isTorqueLoan\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"initialMargin\",\"type\":\"uint256\"},{\"components\":[{\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"manager\",\"type\":\"address\"}],\"internalType\":\"struct MarginTradeStructHelpers.SentAddresses\",\"name\":\"sentAddresses\",\"type\":\"tuple\"},{\"components\":[{\"internalType\":\"uint256\",\"name\":\"interestRate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"newPrincipal\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"interestInitialAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"loanTokenSent\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"collateralTokenSent\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"minEntryPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"loanToCollateralSwapRate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"interestDuration\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"entryLeverage\",\"type\":\"uint256\"}],\"internalType\":\"struct MarginTradeStructHelpers.SentAmounts\",\"name\":\"sentValues\",\"type\":\"tuple\"},{\"internalType\":\"bytes\",\"name\":\"loanDataBytes\",\"type\":\"bytes\"}],\"name\":\"borrowOrTradeFromPool\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"newPrincipal\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"newCollateral\",\"type\":\"uint256\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"borrowerNonce\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"borrowerOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"lockedAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"interestRate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"minLoanTerm\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxLoanTerm\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"createdTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expirationTimestamp\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"borrowingFeePercent\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"borrowingFeeTokensHeld\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"borrowingFeeTokensPaid\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"delegatedManagers\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"feeRebatePercent\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"feesController\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"loanToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"collateralToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"collateralTokenAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"marginAmount\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"isTorqueLoan\",\"type\":\"bool\"}],\"name\":\"getBorrowAmount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"borrowAmount\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"loanToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"collateralToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"loanTokenSent\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"collateralTokenSent\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"interestRate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"newPrincipal\",\"type\":\"uint256\"}],\"name\":\"getEstimatedMarginExposure\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"loanToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"collateralToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"newPrincipal\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"marginAmount\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"isTorqueLoan\",\"type\":\"bool\"}],\"name\":\"getRequiredCollateral\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"collateralAmountRequired\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"}],\"name\":\"initialize\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"isOwner\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"lenderInterest\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"principalTotal\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"owedPerDay\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"owedTotal\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"paidTotal\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"updatedTimestamp\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"lenderOrders\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"lockedAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"interestRate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"minLoanTerm\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxLoanTerm\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"createdTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expirationTimestamp\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"lendingFeePercent\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"lendingFeeTokensHeld\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"lendingFeeTokensPaid\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"liquidationIncentivePercent\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"loanInterest\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"owedPerDay\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"depositTotal\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"updatedTimestamp\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"loanParams\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"id\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"loanToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"collateralToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"minInitialMargin\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maintenanceMargin\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxLoanTerm\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"loanPoolToUnderlying\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"loans\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"id\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"loanParamsId\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"pendingTradesId\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"principal\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"collateral\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"startTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"endTimestamp\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"startMargin\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"startRate\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"lockedSOVAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"name\":\"logicTargets\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"maxDisagreement\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"maxSwapSize\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"minReferralsToPayout\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"pause\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"priceFeeds\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"protocolAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"protocolTokenAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"protocolTokenHeld\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"protocolTokenPaid\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"rolloverBaseReward\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"rolloverFlexFeePercent\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"loanId\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"delegated\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"toggle\",\"type\":\"bool\"}],\"name\":\"setDelegatedManager\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"sourceBuffer\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"sovTokenAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"sovrynSwapContractRegistryAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"specialRebates\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"supportedTokens\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"swapsImpl\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tradingFeePercent\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"tradingFeeTokensHeld\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"tradingFeeTokensPaid\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"underlyingToLoanPool\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"userNotFirstTradeFlag\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"wrbtcToken\",\"outputs\":[{\"internalType\":\"contract IWrbtcERC20\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"methods\":{\"borrowOrTradeFromPool(bytes32,bytes32,bool,uint256,(address,address,address,address),(uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256),bytes)\":{\"details\":\"Note: Only callable by loan pools (iTokens). Wrapper to _borrowOrTrade internal function.\",\"params\":{\"initialMargin\":\"The initial amount of margin.\",\"isTorqueLoan\":\"Whether the loan is a Torque loan.\",\"loanDataBytes\":\"The payload for the call. These loan DataBytes are  additional loan data (not in use for token swaps).\",\"loanId\":\"The ID of the loan. If 0, start a new loan.\",\"loanParamsId\":\"The ID of the loan parameters.\",\"sentAddresses\":\"The addresses to send tokens: lender, borrower,  receiver and manager:    lender: must match loan if loanId provided.    borrower: must match loan if loanId provided.    receiver: receiver of funds (address(0) assumes borrower address).    manager: delegated manager of loan unless address(0).\",\"sentValues\":\"The values to send:    interestRate: New loan interest rate.    newPrincipal: New loan size (borrowAmount + any borrowed interest).    interestInitialAmount: New amount of interest to escrow for Torque loan (determines initial loan length).    loanTokenReceived: Total loanToken deposit (amount not sent to borrower in the case of Torque loans).    collateralTokenSent: Total collateralToken deposit.    minEntryPrice: Minimum entry price for checking price divergence (Value of loan token in collateral).\"},\"return\":\"newPrincipal The new loan size.newCollateral The new collateral amount.\"},\"getBorrowAmount(address,address,uint256,uint256,bool)\":{\"details\":\"Basically borrowAmount = collateral / marginAmount     * Collateral is something that helps secure a loan. When you borrow money, you agree that your lender can take something and sell it to get their money back if you fail to repay the loan. That's the collateral.\",\"params\":{\"collateralToken\":\"The collateral token instance address.\",\"collateralTokenAmount\":\"The amount of collateral.\",\"isTorqueLoan\":\"Whether the loan is a Torque loan.\",\"loanToken\":\"The loan token instance address.\",\"marginAmount\":\"The amount of margin of the trade.\"},\"return\":\"borrowAmount The borrow amount.\"},\"getEstimatedMarginExposure(address,address,uint256,uint256,uint256,uint256)\":{\"params\":{\"collateralToken\":\"The collateral token instance address.\",\"collateralTokenSent\":\"The amount of collateral tokens sent.\",\"interestRate\":\"The interest rate. Percentage w/ 18 decimals.\",\"loanToken\":\"The loan token instance address.\",\"loanTokenSent\":\"The amount of loan tokens sent.\",\"newPrincipal\":\"The updated amount of principal (current debt).\"},\"return\":\"The margin exposure.\"},\"getRequiredCollateral(address,address,uint256,uint256,bool)\":{\"details\":\"Calls internal _getRequiredCollateral and add fees.\",\"params\":{\"collateralToken\":\"The collateral token instance address.\",\"isTorqueLoan\":\"Whether the loan is a Torque loan.\",\"loanToken\":\"The loan token instance address.\",\"marginAmount\":\"The amount of margin of the trade.\",\"newPrincipal\":\"The updated amount of principal (current debt).\"},\"return\":\"collateralAmountRequired The required collateral.\"},\"initialize(address)\":{\"params\":{\"target\":\"The address of the target contract.\"}},\"isOwner()\":{\"details\":\"Returns true if the caller is the current owner.\"},\"owner()\":{\"details\":\"Returns the address of the current owner.\"},\"setDelegatedManager(bytes32,address,bool)\":{\"details\":\"Wrapper for _setDelegatedManager internal function.\",\"params\":{\"delegated\":\"The address of the delegated manager.\",\"loanId\":\"The ID of the loan. If 0, start a new loan.\",\"toggle\":\"The flag true/false for the delegated manager.\"}},\"transferOwnership(address)\":{\"details\":\"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner.\"}},\"title\":\"Loan Openings contract.\"},\"userdoc\":{\"methods\":{\"borrowOrTradeFromPool(bytes32,bytes32,bool,uint256,(address,address,address,address),(uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256),bytes)\":{\"notice\":\"Borrow or trade from pool.\"},\"getBorrowAmount(address,address,uint256,uint256,bool)\":{\"notice\":\"Get the borrow amount of a trade loan.\"},\"getEstimatedMarginExposure(address,address,uint256,uint256,uint256,uint256)\":{\"notice\":\"Get the estimated margin exposure.     * Margin is the money borrowed from a broker to purchase an investment and is the difference between the total value of investment and the loan amount. Margin trading refers to the practice of using borrowed funds from a broker to trade a financial asset, which forms the collateral for the loan from the broker.\"},\"getRequiredCollateral(address,address,uint256,uint256,bool)\":{\"notice\":\"Get the required collateral.\"},\"initialize(address)\":{\"notice\":\"Set function selectors on target contract.\"},\"setDelegatedManager(bytes32,address,bool)\":{\"notice\":\"Set the delegated manager.\"}},\"notice\":\"This contract code comes from bZx. bZx is a protocol for tokenized margin trading and lending https://bzx.network similar to the dYdX protocol. * This contract contains functions to borrow and trade.\"}},\"settings\":{\"compilationTarget\":{\"contracts/modules/LoanOpenings.sol\":\"LoanOpenings\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":ds-test/=foundry/lib/forge-std/lib/ds-test/src/\",\":forge-std/=foundry/lib/forge-std/src/\"]},\"sources\":{\"contracts/connectors/loantoken/lib/MarginTradeStructHelpers.sol\":{\"content\":\"pragma solidity 0.5.17;\\n\\nlibrary MarginTradeStructHelpers {\\n    struct SentAddresses {\\n        address lender;\\n        address borrower;\\n        address receiver;\\n        address manager;\\n    }\\n\\n    struct SentAmounts {\\n        uint256 interestRate;\\n        uint256 newPrincipal;\\n        uint256 interestInitialAmount;\\n        uint256 loanTokenSent;\\n        uint256 collateralTokenSent;\\n        uint256 minEntryPrice;\\n        uint256 loanToCollateralSwapRate;\\n        uint256 interestDuration;\\n        uint256 entryLeverage;\\n    }\\n}\\n\",\"keccak256\":\"0xf0612e2c0d13604a67c3d55efe88810c089f0b84ca63bd3ce82c1e09b0938973\"},\"contracts/core/Objects.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"./objects/LoanStruct.sol\\\";\\nimport \\\"./objects/LoanParamsStruct.sol\\\";\\nimport \\\"./objects/OrderStruct.sol\\\";\\nimport \\\"./objects/LenderInterestStruct.sol\\\";\\nimport \\\"./objects/LoanInterestStruct.sol\\\";\\n\\n/**\\n * @title Objects contract.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract inherints and aggregates several structures needed to handle\\n * loans on the protocol.\\n * */\\ncontract Objects is\\n    LoanStruct,\\n    LoanParamsStruct,\\n    OrderStruct,\\n    LenderInterestStruct,\\n    LoanInterestStruct\\n{\\n\\n}\\n\",\"keccak256\":\"0xa30b8887af813997ebb480f0aa296245f9f3bd728382060059aa087cd9ee332c\"},\"contracts/core/State.sol\":{\"content\":\"/**\\n * Copyright 2017-2020, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"./Objects.sol\\\";\\nimport \\\"../mixins/EnumerableAddressSet.sol\\\";\\nimport \\\"../mixins/EnumerableBytes32Set.sol\\\";\\nimport \\\"../openzeppelin/ReentrancyGuard.sol\\\";\\nimport \\\"../openzeppelin/Ownable.sol\\\";\\nimport \\\"../openzeppelin/SafeMath.sol\\\";\\nimport \\\"../interfaces/IWrbtcERC20.sol\\\";\\nimport \\\"../reentrancy/SharedReentrancyGuard.sol\\\";\\n\\n/**\\n * @title State contract.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the storage values of the Protocol.\\n * */\\ncontract State is Objects, ReentrancyGuard, SharedReentrancyGuard, Ownable {\\n    using SafeMath for uint256;\\n    using EnumerableAddressSet for EnumerableAddressSet.AddressSet; // enumerable map of addresses\\n    using EnumerableBytes32Set for EnumerableBytes32Set.Bytes32Set; // enumerable map of bytes32 or addresses\\n\\n    /// Handles asset reference price lookups.\\n    address public priceFeeds;\\n\\n    /// Handles asset swaps using dex liquidity.\\n    address public swapsImpl;\\n\\n    /// Contract registry address of the Sovryn swap network.\\n    address public sovrynSwapContractRegistryAddress;\\n\\n    /// Implementations of protocol functions.\\n    mapping(bytes4 => address) public logicTargets;\\n\\n    /// Loans: loanId => Loan\\n    mapping(bytes32 => Loan) public loans;\\n\\n    /// Loan parameters: loanParamsId => LoanParams\\n    mapping(bytes32 => LoanParams) public loanParams;\\n\\n    /// lender => orderParamsId => Order\\n    mapping(address => mapping(bytes32 => Order)) public lenderOrders;\\n\\n    /// borrower => orderParamsId => Order\\n    mapping(address => mapping(bytes32 => Order)) public borrowerOrders;\\n\\n    /// loanId => delegated => approved\\n    mapping(bytes32 => mapping(address => bool)) public delegatedManagers;\\n\\n    /**\\n     *** Interest ***\\n     **/\\n\\n    /// lender => loanToken => LenderInterest object\\n    mapping(address => mapping(address => LenderInterest)) public lenderInterest;\\n\\n    /// loanId => LoanInterest object\\n    mapping(bytes32 => LoanInterest) public loanInterest;\\n\\n    /**\\n     *** Internals ***\\n     **/\\n\\n    /// Implementations set.\\n    EnumerableBytes32Set.Bytes32Set internal logicTargetsSet;\\n\\n    /// Active loans set.\\n    EnumerableBytes32Set.Bytes32Set internal activeLoansSet;\\n\\n    /// Lender loans set.\\n    mapping(address => EnumerableBytes32Set.Bytes32Set) internal lenderLoanSets;\\n\\n    /// Borrow loans set.\\n    mapping(address => EnumerableBytes32Set.Bytes32Set) internal borrowerLoanSets;\\n\\n    /// User loan params set.\\n    mapping(address => EnumerableBytes32Set.Bytes32Set) internal userLoanParamSets;\\n\\n    /// Address controlling fee withdrawals.\\n    address public feesController;\\n\\n    /// 10% fee /// Fee taken from lender interest payments.\\n    uint256 public lendingFeePercent = 10**19;\\n\\n    /// Total interest fees received and not withdrawn per asset.\\n    mapping(address => uint256) public lendingFeeTokensHeld;\\n\\n    /// Total interest fees withdraw per asset.\\n    /// lifetime fees = lendingFeeTokensHeld + lendingFeeTokensPaid\\n    mapping(address => uint256) public lendingFeeTokensPaid;\\n\\n    /// 0.15% fee /// Fee paid for each trade.\\n    uint256 public tradingFeePercent = 15 * 10**16;\\n\\n    /// Total trading fees received and not withdrawn per asset.\\n    mapping(address => uint256) public tradingFeeTokensHeld;\\n\\n    /// Total trading fees withdraw per asset\\n    /// lifetime fees = tradingFeeTokensHeld + tradingFeeTokensPaid\\n    mapping(address => uint256) public tradingFeeTokensPaid;\\n\\n    /// 0.09% fee /// Origination fee paid for each loan.\\n    uint256 public borrowingFeePercent = 9 * 10**16;\\n\\n    /// Total borrowing fees received and not withdrawn per asset.\\n    mapping(address => uint256) public borrowingFeeTokensHeld;\\n\\n    /// Total borrowing fees withdraw per asset.\\n    /// lifetime fees = borrowingFeeTokensHeld + borrowingFeeTokensPaid\\n    mapping(address => uint256) public borrowingFeeTokensPaid;\\n\\n    /// Current protocol token deposit balance.\\n    uint256 public protocolTokenHeld;\\n\\n    /// Lifetime total payout of protocol token.\\n    uint256 public protocolTokenPaid;\\n\\n    /// 5% fee share in form of SOV /// Fee share for affiliate program.\\n    uint256 public affiliateFeePercent = 5 * 10**18;\\n\\n    /// 5% collateral discount /// Discount on collateral for liquidators.\\n    uint256 public liquidationIncentivePercent = 5 * 10**18;\\n\\n    /// loanPool => underlying\\n    mapping(address => address) public loanPoolToUnderlying;\\n\\n    /// underlying => loanPool\\n    mapping(address => address) public underlyingToLoanPool;\\n\\n    /// Loan pools set.\\n    EnumerableBytes32Set.Bytes32Set internal loanPoolsSet;\\n\\n    /// Supported tokens for swaps.\\n    mapping(address => bool) public supportedTokens;\\n\\n    /// % disagreement between swap rate and reference rate.\\n    uint256 public maxDisagreement = 5 * 10**18;\\n\\n    /// Used as buffer for swap source amount estimations.\\n    uint256 public sourceBuffer = 10000;\\n\\n    /// Maximum support swap size in rBTC\\n    uint256 public maxSwapSize = 50 ether;\\n\\n    /// Nonce per borrower. Used for loan id creation.\\n    mapping(address => uint256) public borrowerNonce;\\n\\n    /// Rollover transaction costs around 0.0000168 rBTC, it is denominated in wrBTC.\\n    uint256 public rolloverBaseReward = 16800000000000;\\n    uint256 public rolloverFlexFeePercent = 0.1 ether; /// 0.1%\\n\\n    IWrbtcERC20 public wrbtcToken;\\n    address public protocolTokenAddress;\\n\\n    /// 50% fee rebate\\n    /// potocolToken reward to user, it is worth % of trading/borrowing fee.\\n    uint256 public feeRebatePercent = 50 * 10**18;\\n\\n    address public admin;\\n\\n    /// For modules interaction.\\n    address public protocolAddress;\\n\\n    /**\\n     *** Affiliates ***\\n     **/\\n\\n    /// The flag is set on the user's first trade.\\n    mapping(address => bool) public userNotFirstTradeFlag;\\n\\n    /// User => referrer (affiliate).\\n    mapping(address => address) public affiliatesUserReferrer;\\n\\n    /// List of referral addresses affiliated to the referrer.\\n    mapping(address => EnumerableAddressSet.AddressSet) internal referralsList;\\n\\n    /// @dev Referral threshold for paying out to the referrer.\\n    ///   The referrer reward is being accumulated and locked until the threshold is passed.\\n    uint256 public minReferralsToPayout = 3;\\n\\n    /// @dev Total affiliate SOV rewards that held in the protocol\\n    ///   (Because the minimum referrals is less than the rule)\\n    mapping(address => uint256) public affiliateRewardsHeld;\\n\\n    /// @dev For affiliates SOV Bonus proccess.\\n    address public sovTokenAddress;\\n    address public lockedSOVAddress;\\n\\n    /// @dev 20% fee share of trading token fee.\\n    ///   Fee share of trading token fee for affiliate program.\\n    uint256 public affiliateTradingTokenFeePercent = 20 * 10**18;\\n\\n    /// @dev Addresses of tokens in which commissions were paid to referrers.\\n    mapping(address => EnumerableAddressSet.AddressSet) internal affiliatesReferrerTokensList;\\n\\n    /// @dev [referrerAddress][tokenAddress] is a referrer's token balance of accrued fees.\\n    mapping(address => mapping(address => uint256)) public affiliatesReferrerBalances;\\n\\n    mapping(address => mapping(address => uint256)) public specialRebates; // Special rate rebates for spesific pair -- if not set, then use the default one\\n    bool public pause; //Flag to pause all protocol modules\\n\\n    uint256 internal swapExtrernalFeePercent; /// Fee percentage for protocol swap\\n\\n    /// @dev Defines the portion of the trading rebate rewards (SOV) which is to be paid out in a liquid form in basis points. The rest is vested. The max value is 9999 (means 99.99% liquid, 0.01% vested)\\n    uint256 internal tradingRebateRewardsBasisPoint;\\n\\n    /// @dev Defines the defaultPath of conversion swap. This is created to prevent the non-rbtc pairs returning the shortest path which will not give the best rate.\\n    /// Will be used in internal swap.\\n    mapping(address => mapping(address => IERC20[])) internal defaultPathConversion;\\n\\n    address internal pauser;\\n\\n    /**\\n     * @notice Add signature and target to storage.\\n     * @dev Protocol is a proxy and requires a way to add every\\n     *   module function dynamically during deployment.\\n     * */\\n    function _setTarget(bytes4 sig, address target) internal {\\n        logicTargets[sig] = target;\\n\\n        if (target != address(0)) {\\n            logicTargetsSet.addBytes32(bytes32(sig));\\n        } else {\\n            logicTargetsSet.removeBytes32(bytes32(sig));\\n        }\\n    }\\n\\n    modifier onlyAdminOrOwner() {\\n        require(isOwner() || admin == (msg.sender), \\\"unauthorized\\\");\\n        _;\\n    }\\n\\n    modifier onlyPauserOrOwner() {\\n        require(isOwner() || pauser == (msg.sender), \\\"unauthorized\\\");\\n        _;\\n    }\\n}\\n\",\"keccak256\":\"0xf8dfc02f3dc790c73b390a69898d0281c4473487bc91fec1f28fbebceacd3b3c\"},\"contracts/core/objects/LenderInterestStruct.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\n/**\\n * @title The Lender Interest.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the storage structure of the Lender Interest.\\n * */\\ncontract LenderInterestStruct {\\n    struct LenderInterest {\\n        uint256 principalTotal; /// Total borrowed amount outstanding of asset.\\n        uint256 owedPerDay; /// Interest owed per day for all loans of asset.\\n        uint256 owedTotal; /// Total interest owed for all loans of asset (assuming they go to full term).\\n        uint256 paidTotal; /// Total interest paid so far for asset.\\n        uint256 updatedTimestamp; /// Last update.\\n    }\\n}\\n\",\"keccak256\":\"0x6583baadddded384836cec469980e7973ec09310ae505b4a2ec67fb7bc19e452\"},\"contracts/core/objects/LoanInterestStruct.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\n/**\\n * @title The Loan Interest.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the storage structure of the Loan Interest.\\n * */\\ncontract LoanInterestStruct {\\n    struct LoanInterest {\\n        uint256 owedPerDay; /// Interest owed per day for loan.\\n        uint256 depositTotal; /// Total escrowed interest for loan.\\n        uint256 updatedTimestamp; /// Last update.\\n    }\\n}\\n\",\"keccak256\":\"0xd9034c6adb1b72e1593589dca024dc4730a1ee8bf6b2dca9d22283f2e7159590\"},\"contracts/core/objects/LoanParamsStruct.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\n/**\\n * @title The Loan Parameters.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the storage structure of the Loan Parameters.\\n * */\\ncontract LoanParamsStruct {\\n    struct LoanParams {\\n        /// @dev ID of loan params object.\\n        bytes32 id;\\n        /// @dev If false, this object has been disabled by the owner and can't\\n        ///   be used for future loans.\\n        bool active;\\n        /// @dev Owner of this object.\\n        address owner;\\n        /// @dev The token being loaned.\\n        address loanToken;\\n        /// @dev The required collateral token.\\n        address collateralToken;\\n        /// @dev The minimum allowed initial margin.\\n        uint256 minInitialMargin;\\n        /// @dev An unhealthy loan when current margin is at or below this value.\\n        uint256 maintenanceMargin;\\n        /// @dev The maximum term for new loans (0 means there's no max term).\\n        uint256 maxLoanTerm;\\n    }\\n}\\n\",\"keccak256\":\"0xe15aa97713521da7f501e5225af9d92cf34bd68d286dbfed86aa75aabb323945\"},\"contracts/core/objects/LoanStruct.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\n/**\\n * @title The Loan Object.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the storage structure of the Loan Object.\\n * */\\ncontract LoanStruct {\\n    struct Loan {\\n        bytes32 id; /// ID of the loan.\\n        bytes32 loanParamsId; /// The linked loan params ID.\\n        bytes32 pendingTradesId; /// The linked pending trades ID.\\n        bool active; /// If false, the loan has been fully closed.\\n        uint256 principal; /// Total borrowed amount outstanding.\\n        uint256 collateral; /// Total collateral escrowed for the loan.\\n        uint256 startTimestamp; /// Loan start time.\\n        uint256 endTimestamp; /// For active loans, this is the expected loan end time, for in-active loans, is the actual (past) end time.\\n        uint256 startMargin; /// Initial margin when the loan opened.\\n        uint256 startRate; /// Reference rate when the loan opened for converting collateralToken to loanToken.\\n        address borrower; /// Borrower of this loan.\\n        address lender; /// Lender of this loan.\\n    }\\n}\\n\",\"keccak256\":\"0x7d05c3096a86d5892e4e72f3a01a5a806f13a5ac90ca6339c611e75c603637b4\"},\"contracts/core/objects/OrderStruct.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\n/**\\n * @title The Loan Order.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the storage structure of the Loan Order.\\n * */\\ncontract OrderStruct {\\n    struct Order {\\n        uint256 lockedAmount; /// Escrowed amount waiting for a counterparty.\\n        uint256 interestRate; /// Interest rate defined by the creator of this order.\\n        uint256 minLoanTerm; /// Minimum loan term allowed.\\n        uint256 maxLoanTerm; /// Maximum loan term allowed.\\n        uint256 createdTimestamp; /// Timestamp when this order was created.\\n        uint256 expirationTimestamp; /// Timestamp when this order expires.\\n    }\\n}\\n\",\"keccak256\":\"0xcc053c5da34a5927041162259bf856ba913f3524ca03e63ad0c5877777d17e0f\"},\"contracts/events/AffiliatesEvents.sol\":{\"content\":\"/**\\n * Copyright 2017-2020, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"./ModulesCommonEvents.sol\\\";\\n\\ncontract AffiliatesEvents is ModulesCommonEvents {\\n    event SetAffiliatesReferrer(address indexed user, address indexed referrer);\\n\\n    event SetAffiliatesReferrerFail(\\n        address indexed user,\\n        address indexed referrer,\\n        bool alreadySet,\\n        bool userNotFirstTrade\\n    );\\n\\n    event SetUserNotFirstTradeFlag(address indexed user);\\n\\n    event PayTradingFeeToAffiliate(\\n        address indexed referrer,\\n        address trader,\\n        address indexed token,\\n        bool indexed isHeld,\\n        uint256 tradingFeeTokenAmount,\\n        uint256 tokenBonusAmount,\\n        uint256 sovBonusAmount,\\n        uint256 sovBonusAmountPaid\\n    );\\n\\n    event PayTradingFeeToAffiliateFail(\\n        address indexed referrer,\\n        address trader,\\n        address indexed token,\\n        uint256 tradingFeeTokenAmount,\\n        uint256 tokenBonusAmount,\\n        uint256 sovBonusAmount,\\n        uint256 sovBonusAmountTryingToPaid\\n    );\\n\\n    event WithdrawAffiliatesReferrerTokenFees(\\n        address indexed referrer,\\n        address indexed receiver,\\n        address indexed tokenAddress,\\n        uint256 amount\\n    );\\n}\\n\",\"keccak256\":\"0xf72cf23e90db3c49589ddc4e1796680ebfb69a9b146db89f9b61f5fcf6dd95ba\"},\"contracts/events/FeesEvents.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\n/**\\n * @title The Fees Events contract.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the events for fee payments.\\n * */\\ncontract FeesEvents {\\n    event PayLendingFee(address indexed payer, address indexed token, uint256 amount);\\n\\n    event PayTradingFee(\\n        address indexed payer,\\n        address indexed token,\\n        bytes32 indexed loanId,\\n        uint256 amount\\n    );\\n\\n    event PayBorrowingFee(\\n        address indexed payer,\\n        address indexed token,\\n        bytes32 indexed loanId,\\n        uint256 amount\\n    );\\n\\n    event EarnReward(\\n        address indexed receiver,\\n        address indexed token,\\n        bytes32 indexed loanId,\\n        uint256 feeRebatePercent,\\n        uint256 amount,\\n        uint256 basisPoint\\n    );\\n\\n    event EarnRewardFail(\\n        address indexed receiver,\\n        address indexed token,\\n        bytes32 indexed loanId,\\n        uint256 feeRebatePercent,\\n        uint256 amount,\\n        uint256 basisPoint\\n    );\\n}\\n\",\"keccak256\":\"0xe69bf53e15479be5fde1cbaadaf0c004ee038e8a6a37c99f7769bf5d8387015f\"},\"contracts/events/LoanClosingsEvents.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"./ModulesCommonEvents.sol\\\";\\n\\n/**\\n * @title The Loan Closing Events contract.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the events for loan closing operations.\\n * */\\ncontract LoanClosingsEvents is ModulesCommonEvents {\\n    /// topic0: 0x6349c1a02ec126f7f4fc6e6837e1859006e90e9901635c442d29271e77b96fb6\\n    event CloseWithDeposit(\\n        address indexed user,\\n        address indexed lender,\\n        bytes32 indexed loanId,\\n        address closer,\\n        address loanToken,\\n        address collateralToken,\\n        uint256 repayAmount,\\n        uint256 collateralWithdrawAmount,\\n        uint256 collateralToLoanRate,\\n        uint256 currentMargin\\n    );\\n\\n    /// topic0: 0x2ed7b29b4ca95cf3bb9a44f703872a66e6aa5e8f07b675fa9a5c124a1e5d7352\\n    event CloseWithSwap(\\n        address indexed user,\\n        address indexed lender,\\n        bytes32 indexed loanId,\\n        address collateralToken,\\n        address loanToken,\\n        address closer,\\n        uint256 positionCloseSize,\\n        uint256 loanCloseAmount,\\n        uint256 exitPrice, // one unit of collateralToken, denominated in loanToken\\n        uint256 currentLeverage\\n    );\\n\\n    /// topic0: 0x46fa03303782eb2f686515f6c0100f9a62dabe587b0d3f5a4fc0c822d6e532d3\\n    event Liquidate(\\n        address indexed user,\\n        address indexed liquidator,\\n        bytes32 indexed loanId,\\n        address lender,\\n        address loanToken,\\n        address collateralToken,\\n        uint256 repayAmount,\\n        uint256 collateralWithdrawAmount,\\n        uint256 collateralToLoanRate,\\n        uint256 currentMargin\\n    );\\n\\n    event Rollover(\\n        address indexed user,\\n        address indexed lender,\\n        bytes32 indexed loanId,\\n        uint256 principal,\\n        uint256 collateral,\\n        uint256 endTimestamp,\\n        address rewardReceiver,\\n        uint256 reward\\n    );\\n\\n    event swapExcess(bool shouldRefund, uint256 amount, uint256 amountInRbtc, uint256 threshold);\\n}\\n\",\"keccak256\":\"0x1ea325b9a213012865a52f38941ce6c1e8c29dce919215b5bdcc63a8a5980be1\"},\"contracts/events/LoanMaintenanceEvents.sol\":{\"content\":\"pragma solidity 0.5.17;\\n\\nimport \\\"./ModulesCommonEvents.sol\\\";\\n\\n/**\\n * @title The Loan Maintenance Events contract.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the events for loan maintenance operations.\\n * */\\ncontract LoanMaintenanceEvents is ModulesCommonEvents {\\n    event DepositCollateral(bytes32 indexed loanId, uint256 depositAmount, uint256 rate);\\n}\\n\",\"keccak256\":\"0xdee5098b947c22bcef6e38ecaf62bae6941572d1c245d2065ad41ea4f494c61d\"},\"contracts/events/LoanOpeningsEvents.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"./ModulesCommonEvents.sol\\\";\\n\\n/**\\n * @title The Loan Openings Events contract.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the events for loan openings operations.\\n * */\\ncontract LoanOpeningsEvents is ModulesCommonEvents {\\n    /// topic0: 0x7bd8cbb7ba34b33004f3deda0fd36c92fc0360acbd97843360037b467a538f90\\n    event Borrow(\\n        address indexed user,\\n        address indexed lender,\\n        bytes32 indexed loanId,\\n        address loanToken,\\n        address collateralToken,\\n        uint256 newPrincipal,\\n        uint256 newCollateral,\\n        uint256 interestRate,\\n        uint256 interestDuration,\\n        uint256 collateralToLoanRate,\\n        uint256 currentMargin\\n    );\\n\\n    /// topic0: 0xf640c1cfe1a912a0b0152b5a542e5c2403142eed75b06cde526cee54b1580e5c\\n    event Trade(\\n        address indexed user,\\n        address indexed lender,\\n        bytes32 indexed loanId,\\n        address collateralToken,\\n        address loanToken,\\n        uint256 positionSize,\\n        uint256 borrowedAmount,\\n        uint256 interestRate,\\n        uint256 settlementDate,\\n        uint256 entryPrice, /// one unit of collateralToken, denominated in loanToken\\n        uint256 entryLeverage,\\n        uint256 currentLeverage\\n    );\\n\\n    /// topic0: 0x0eef4f90457a741c97d76fcf13fa231fefdcc7649bdb3cb49157c37111c98433\\n    event DelegatedManagerSet(\\n        bytes32 indexed loanId,\\n        address indexed delegator,\\n        address indexed delegated,\\n        bool isActive\\n    );\\n}\\n\",\"keccak256\":\"0x585710ce6c570c6dbd1b8daf43b63a54b1d60ad01ee1dc3cae407d74d78f3093\"},\"contracts/events/LoanSettingsEvents.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"./ModulesCommonEvents.sol\\\";\\n\\n/**\\n * @title The Loan Settings Events contract.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the events for loan settings operations.\\n * */\\ncontract LoanSettingsEvents is ModulesCommonEvents {\\n    event LoanParamsSetup(\\n        bytes32 indexed id,\\n        address owner,\\n        address indexed loanToken,\\n        address indexed collateralToken,\\n        uint256 minInitialMargin,\\n        uint256 maintenanceMargin,\\n        uint256 maxLoanTerm\\n    );\\n    event LoanParamsIdSetup(bytes32 indexed id, address indexed owner);\\n\\n    event LoanParamsDisabled(\\n        bytes32 indexed id,\\n        address owner,\\n        address indexed loanToken,\\n        address indexed collateralToken,\\n        uint256 minInitialMargin,\\n        uint256 maintenanceMargin,\\n        uint256 maxLoanTerm\\n    );\\n    event LoanParamsIdDisabled(bytes32 indexed id, address indexed owner);\\n}\\n\",\"keccak256\":\"0xae9c49678a7bc02c2283648939c474c8bfd33781506e05c635c8334c5bf8682f\"},\"contracts/events/ModulesCommonEvents.sol\":{\"content\":\"pragma solidity 0.5.17;\\n\\n/**\\n * @title The common events for all modules\\n * @notice This contract contains the events which will be used by all modules\\n **/\\n\\ncontract ModulesCommonEvents {\\n    event ProtocolModuleContractReplaced(\\n        address indexed prevModuleContractAddress,\\n        address indexed newModuleContractAddress,\\n        bytes32 indexed module\\n    );\\n}\\n\",\"keccak256\":\"0xb07af42d7e6b0fe983889b883691b662a58d2ef8d75b3f32f17faff1871c8b8f\"},\"contracts/events/ProtocolSettingsEvents.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"./ModulesCommonEvents.sol\\\";\\nimport \\\"../interfaces/IERC20.sol\\\";\\n\\n/**\\n * @title The Protocol Settings Events contract.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the events for protocol settings operations.\\n * */\\ncontract ProtocolSettingsEvents is ModulesCommonEvents {\\n    event SetPriceFeedContract(address indexed sender, address oldValue, address newValue);\\n\\n    event SetSwapsImplContract(address indexed sender, address oldValue, address newValue);\\n\\n    event SetLoanPool(\\n        address indexed sender,\\n        address indexed loanPool,\\n        address indexed underlying\\n    );\\n\\n    event SetSupportedTokens(address indexed sender, address indexed token, bool isActive);\\n\\n    event SetLendingFeePercent(address indexed sender, uint256 oldValue, uint256 newValue);\\n\\n    event SetTradingFeePercent(address indexed sender, uint256 oldValue, uint256 newValue);\\n\\n    event SetBorrowingFeePercent(address indexed sender, uint256 oldValue, uint256 newValue);\\n\\n    event SetSwapExternalFeePercent(address indexed sender, uint256 oldValue, uint256 newValue);\\n\\n    event SetAffiliateFeePercent(address indexed sender, uint256 oldValue, uint256 newValue);\\n\\n    event SetAffiliateTradingTokenFeePercent(\\n        address indexed sender,\\n        uint256 oldValue,\\n        uint256 newValue\\n    );\\n\\n    event SetLiquidationIncentivePercent(\\n        address indexed sender,\\n        uint256 oldValue,\\n        uint256 newValue\\n    );\\n\\n    event SetMaxSwapSize(address indexed sender, uint256 oldValue, uint256 newValue);\\n\\n    event SetFeesController(\\n        address indexed sender,\\n        address indexed oldController,\\n        address indexed newController\\n    );\\n\\n    event SetWrbtcToken(\\n        address indexed sender,\\n        address indexed oldWethToken,\\n        address indexed newWethToken\\n    );\\n\\n    event SetSovrynSwapContractRegistryAddress(\\n        address indexed sender,\\n        address indexed oldSovrynSwapContractRegistryAddress,\\n        address indexed newSovrynSwapContractRegistryAddress\\n    );\\n\\n    event SetProtocolTokenAddress(\\n        address indexed sender,\\n        address indexed oldProtocolToken,\\n        address indexed newProtocolToken\\n    );\\n\\n    event WithdrawFees(\\n        address indexed sender,\\n        address indexed token,\\n        address indexed receiver,\\n        uint256 lendingAmount,\\n        uint256 tradingAmount,\\n        uint256 borrowingAmount,\\n        uint256 wRBTCConverted\\n    );\\n\\n    event WithdrawLendingFees(\\n        address indexed sender,\\n        address indexed token,\\n        address indexed receiver,\\n        uint256 amount\\n    );\\n\\n    event WithdrawTradingFees(\\n        address indexed sender,\\n        address indexed token,\\n        address indexed receiver,\\n        uint256 amount\\n    );\\n\\n    event WithdrawBorrowingFees(\\n        address indexed sender,\\n        address indexed token,\\n        address indexed receiver,\\n        uint256 amount\\n    );\\n\\n    event SetRolloverBaseReward(address indexed sender, uint256 oldValue, uint256 newValue);\\n\\n    event SetRebatePercent(\\n        address indexed sender,\\n        uint256 oldRebatePercent,\\n        uint256 newRebatePercent\\n    );\\n\\n    event SetSpecialRebates(\\n        address indexed sender,\\n        address indexed sourceToken,\\n        address indexed destToken,\\n        uint256 oldSpecialRebatesPercent,\\n        uint256 newSpecialRebatesPercent\\n    );\\n\\n    event SetProtocolAddress(\\n        address indexed sender,\\n        address indexed oldProtocol,\\n        address indexed newProtocol\\n    );\\n\\n    event SetMinReferralsToPayoutAffiliates(\\n        address indexed sender,\\n        uint256 oldMinReferrals,\\n        uint256 newMinReferrals\\n    );\\n\\n    event SetSOVTokenAddress(\\n        address indexed sender,\\n        address indexed oldTokenAddress,\\n        address indexed newTokenAddress\\n    );\\n\\n    event SetLockedSOVAddress(\\n        address indexed sender,\\n        address indexed oldAddress,\\n        address indexed newAddress\\n    );\\n\\n    event TogglePaused(address indexed sender, bool indexed oldFlag, bool indexed newFlag);\\n\\n    event SetTradingRebateRewardsBasisPoint(\\n        address indexed sender,\\n        uint256 oldBasisPoint,\\n        uint256 newBasisPoint\\n    );\\n\\n    event SetRolloverFlexFeePercent(\\n        address indexed sender,\\n        uint256 oldRolloverFlexFeePercent,\\n        uint256 newRolloverFlexFeePercent\\n    );\\n\\n    event SetDefaultPathConversion(\\n        address indexed sender,\\n        address indexed sourceTokenAddress,\\n        address indexed destTokenAddress,\\n        IERC20[] defaultPath\\n    );\\n\\n    event RemoveDefaultPathConversion(\\n        address indexed sender,\\n        address indexed sourceTokenAddress,\\n        address indexed destTokenAddress,\\n        IERC20[] defaultPath\\n    );\\n\\n    event SetAdmin(address indexed sender, address indexed oldAdmin, address indexed newAdmin);\\n\\n    event SetPauser(address indexed sender, address indexed oldPauser, address indexed newPauser);\\n}\\n\",\"keccak256\":\"0x20ca66a2c53669aa33379bf5233e3bcdddbba3504cd430a0143f0ee3ce1c2641\"},\"contracts/events/SwapsEvents.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"./ModulesCommonEvents.sol\\\";\\n\\n/**\\n * @title The Swaps Events contract.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the events for swap operations.\\n * */\\ncontract SwapsEvents is ModulesCommonEvents {\\n    event LoanSwap(\\n        bytes32 indexed loanId,\\n        address indexed sourceToken,\\n        address indexed destToken,\\n        address borrower,\\n        uint256 sourceAmount,\\n        uint256 destAmount\\n    );\\n\\n    event ExternalSwap(\\n        address indexed user,\\n        address indexed sourceToken,\\n        address indexed destToken,\\n        uint256 sourceAmount,\\n        uint256 destAmount\\n    );\\n}\\n\",\"keccak256\":\"0x0a1cd289076675980b916941ed923146160d34a8669fc3fb4a06610f285dfbd1\"},\"contracts/feeds/IPriceFeeds.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\ninterface IPriceFeeds {\\n    function queryRate(address sourceToken, address destToken)\\n        external\\n        view\\n        returns (uint256 rate, uint256 precision);\\n\\n    function queryPrecision(address sourceToken, address destToken)\\n        external\\n        view\\n        returns (uint256 precision);\\n\\n    function queryReturn(\\n        address sourceToken,\\n        address destToken,\\n        uint256 sourceAmount\\n    ) external view returns (uint256 destAmount);\\n\\n    function checkPriceDisagreement(\\n        address sourceToken,\\n        address destToken,\\n        uint256 sourceAmount,\\n        uint256 destAmount,\\n        uint256 maxSlippage\\n    ) external view returns (uint256 sourceToDestSwapRate);\\n\\n    function amountInEth(address Token, uint256 amount) external view returns (uint256 ethAmount);\\n\\n    function getMaxDrawdown(\\n        address loanToken,\\n        address collateralToken,\\n        uint256 loanAmount,\\n        uint256 collateralAmount,\\n        uint256 maintenanceMargin\\n    ) external view returns (uint256);\\n\\n    function getCurrentMarginAndCollateralSize(\\n        address loanToken,\\n        address collateralToken,\\n        uint256 loanAmount,\\n        uint256 collateralAmount\\n    ) external view returns (uint256 currentMargin, uint256 collateralInEthAmount);\\n\\n    function getCurrentMargin(\\n        address loanToken,\\n        address collateralToken,\\n        uint256 loanAmount,\\n        uint256 collateralAmount\\n    ) external view returns (uint256 currentMargin, uint256 collateralToLoanRate);\\n\\n    function shouldLiquidate(\\n        address loanToken,\\n        address collateralToken,\\n        uint256 loanAmount,\\n        uint256 collateralAmount,\\n        uint256 maintenanceMargin\\n    ) external view returns (bool);\\n\\n    function getFastGasPrice(address payToken) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0x2e2c2b393336efedb97659a2fc21c8dfb75b70e15d2422a3bcbf7ebd5fc83c82\"},\"contracts/interfaces/IERC20.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity >=0.5.0 <0.6.0;\\n\\ncontract IERC20 {\\n    string public name;\\n    uint8 public decimals;\\n    string public symbol;\\n\\n    function totalSupply() external view returns (uint256);\\n\\n    function balanceOf(address _who) external view returns (uint256);\\n\\n    function allowance(address _owner, address _spender) external view returns (uint256);\\n\\n    function approve(address _spender, uint256 _value) external returns (bool);\\n\\n    function transfer(address _to, uint256 _value) external returns (bool);\\n\\n    function transferFrom(\\n        address _from,\\n        address _to,\\n        uint256 _value\\n    ) external returns (bool);\\n\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n}\\n\",\"keccak256\":\"0xbc0c9bb48f19651930ec9aff366b2e11a1abf89c846e4b2d52d8102b15ce6721\"},\"contracts/interfaces/ISovryn.sol\":{\"content\":\"/**\\n * Copyright 2017-2020, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity >=0.5.0 <0.6.0;\\npragma experimental ABIEncoderV2;\\n//TODO: stored in ./interfaces only while brownie isn't removed\\n//TODO: move to contracts/interfaces after with brownie is removed\\n\\nimport \\\"../core/State.sol\\\";\\nimport \\\"../events/ProtocolSettingsEvents.sol\\\";\\nimport \\\"../events/LoanSettingsEvents.sol\\\";\\nimport \\\"../events/LoanOpeningsEvents.sol\\\";\\nimport \\\"../events/LoanMaintenanceEvents.sol\\\";\\nimport \\\"../events/LoanClosingsEvents.sol\\\";\\nimport \\\"../events/FeesEvents.sol\\\";\\nimport \\\"../events/SwapsEvents.sol\\\";\\nimport \\\"../events/AffiliatesEvents.sol\\\";\\nimport \\\"../connectors/loantoken/lib/MarginTradeStructHelpers.sol\\\";\\n\\ncontract ISovryn is\\n    State,\\n    ProtocolSettingsEvents,\\n    LoanSettingsEvents,\\n    LoanOpeningsEvents,\\n    LoanMaintenanceEvents,\\n    LoanClosingsEvents,\\n    SwapsEvents,\\n    AffiliatesEvents,\\n    FeesEvents\\n{\\n    /// Triggered whenever interest is paid to lender.\\n    event PayInterestTransfer(\\n        address indexed interestToken,\\n        address indexed lender,\\n        uint256 effectiveInterest\\n    );\\n\\n    ////// Protocol //////\\n\\n    function replaceContract(address target) external;\\n\\n    function setTargets(string[] calldata sigsArr, address[] calldata targetsArr) external;\\n\\n    function getTarget(string calldata sig) external view returns (address);\\n\\n    ////// Protocol Settings //////\\n\\n    function setSovrynProtocolAddress(address newProtocolAddress) external;\\n\\n    function setSOVTokenAddress(address newSovTokenAddress) external;\\n\\n    function setLockedSOVAddress(address newSOVLockedAddress) external;\\n\\n    function setMinReferralsToPayoutAffiliates(uint256 newMinReferrals) external;\\n\\n    function setPriceFeedContract(address newContract) external;\\n\\n    function setSwapsImplContract(address newContract) external;\\n\\n    function setLoanPool(address[] calldata pools, address[] calldata assets) external;\\n\\n    function setSupportedTokens(address[] calldata addrs, bool[] calldata toggles) external;\\n\\n    function setLendingFeePercent(uint256 newValue) external;\\n\\n    function setTradingFeePercent(uint256 newValue) external;\\n\\n    function setBorrowingFeePercent(uint256 newValue) external;\\n\\n    function setSwapExternalFeePercent(uint256 newValue) external;\\n\\n    function setAffiliateFeePercent(uint256 newValue) external;\\n\\n    function setAffiliateTradingTokenFeePercent(uint256 newValue) external;\\n\\n    function setLiquidationIncentivePercent(uint256 newAmount) external;\\n\\n    function setMaxDisagreement(uint256 newAmount) external;\\n\\n    function setSourceBuffer(uint256 newAmount) external;\\n\\n    function setMaxSwapSize(uint256 newAmount) external;\\n\\n    function setFeesController(address newController) external;\\n\\n    function withdrawFees(address[] calldata tokens, address receiver)\\n        external\\n        returns (uint256 totalWRBTCWithdrawn);\\n\\n    function withdrawLendingFees(\\n        address token,\\n        address receiver,\\n        uint256 amount\\n    ) external returns (bool);\\n\\n    function withdrawTradingFees(\\n        address token,\\n        address receiver,\\n        uint256 amount\\n    ) external returns (bool);\\n\\n    function withdrawBorrowingFees(\\n        address token,\\n        address receiver,\\n        uint256 amount\\n    ) external returns (bool);\\n\\n    function withdrawProtocolToken(address receiver, uint256 amount)\\n        external\\n        returns (address, bool);\\n\\n    function depositProtocolToken(uint256 amount) external;\\n\\n    function getLoanPoolsList(uint256 start, uint256 count)\\n        external\\n        view\\n        returns (bytes32[] memory);\\n\\n    function isLoanPool(address loanPool) external view returns (bool);\\n\\n    function setWrbtcToken(address wrbtcTokenAddress) external;\\n\\n    function setSovrynSwapContractRegistryAddress(address registryAddress) external;\\n\\n    function setProtocolTokenAddress(address _protocolTokenAddress) external;\\n\\n    function setRolloverBaseReward(uint256 transactionCost) external;\\n\\n    function setRebatePercent(uint256 rebatePercent) external;\\n\\n    function setSpecialRebates(\\n        address sourceToken,\\n        address destToken,\\n        uint256 specialRebatesPercent\\n    ) external;\\n\\n    function getSpecialRebates(address sourceToken, address destToken)\\n        external\\n        view\\n        returns (uint256 specialRebatesPercent);\\n\\n    function togglePaused(bool paused) external;\\n\\n    function isProtocolPaused() external view returns (bool);\\n\\n    ////// SwapsImplSovrynSwapModule //////\\n    function getSovrynSwapNetworkContract(address sovrynSwapRegistryAddress)\\n        public\\n        view\\n        returns (address);\\n\\n    function getContractHexName(string calldata source) external pure returns (bytes32 result);\\n\\n    function swapsImplExpectedRate(\\n        address sourceTokenAddress,\\n        address destTokenAddress,\\n        uint256 sourceTokenAmount\\n    ) external view returns (uint256);\\n\\n    function swapsImplExpectedReturn(\\n        address sourceTokenAddress,\\n        address destTokenAddress,\\n        uint256 sourceTokenAmount\\n    ) external view returns (uint256 expectedReturn);\\n\\n    ////// Loan Settings //////\\n\\n    function setupLoanParams(LoanParams[] calldata loanParamsList)\\n        external\\n        returns (bytes32[] memory loanParamsIdList);\\n\\n    // Deactivates LoanParams for future loans. Active loans using it are unaffected.\\n    function disableLoanParams(bytes32[] calldata loanParamsIdList) external;\\n\\n    function getLoanParams(bytes32[] calldata loanParamsIdList)\\n        external\\n        view\\n        returns (LoanParams[] memory loanParamsList);\\n\\n    function getLoanParamsList(\\n        address owner,\\n        uint256 start,\\n        uint256 count\\n    ) external view returns (bytes32[] memory loanParamsList);\\n\\n    function getTotalPrincipal(address lender, address loanToken) external view returns (uint256);\\n\\n    function minInitialMargin(bytes32 loanParamsId) external view returns (uint256);\\n\\n    ////// Loan Openings //////\\n\\n    function borrowOrTradeFromPool(\\n        bytes32 loanParamsId,\\n        bytes32 loanId, // if 0, start a new loan\\n        bool isTorqueLoan,\\n        uint256 initialMargin,\\n        MarginTradeStructHelpers.SentAddresses calldata sentAddresses,\\n        // lender: must match loan if loanId provided\\n        // borrower: must match loan if loanId provided\\n        // receiver: receiver of funds (address(0) assumes borrower address)\\n        // manager: delegated manager of loan unless address(0)\\n        MarginTradeStructHelpers.SentAmounts calldata sentValues,\\n        // newRate: new loan interest rate\\n        // newPrincipal: new loan size (borrowAmount + any borrowed interest)\\n        // torqueInterest: new amount of interest to escrow for Torque loan (determines initial loan length)\\n        // loanTokenReceived: total loanToken deposit (amount not sent to borrower in the case of Torque loans)\\n        // collateralTokenReceived: total collateralToken deposit\\n        bytes calldata loanDataBytes\\n    ) external payable returns (uint256 newPrincipal, uint256 newCollateral);\\n\\n    function setDelegatedManager(\\n        bytes32 loanId,\\n        address delegated,\\n        bool toggle\\n    ) external;\\n\\n    function getEstimatedMarginExposure(\\n        address loanToken,\\n        address collateralToken,\\n        uint256 loanTokenSent,\\n        uint256 collateralTokenSent,\\n        uint256 interestRate,\\n        uint256 newPrincipal\\n    ) external view returns (uint256);\\n\\n    function getRequiredCollateral(\\n        address loanToken,\\n        address collateralToken,\\n        uint256 newPrincipal,\\n        uint256 marginAmount,\\n        bool isTorqueLoan\\n    ) external view returns (uint256 collateralAmountRequired);\\n\\n    function getBorrowAmount(\\n        address loanToken,\\n        address collateralToken,\\n        uint256 collateralTokenAmount,\\n        uint256 marginAmount,\\n        bool isTorqueLoan\\n    ) external view returns (uint256 borrowAmount);\\n\\n    ////// Loan Closings //////\\n\\n    function liquidate(\\n        bytes32 loanId,\\n        address receiver,\\n        uint256 closeAmount // denominated in loanToken\\n    )\\n        external\\n        payable\\n        returns (\\n            uint256 loanCloseAmount,\\n            uint256 seizedAmount,\\n            address seizedToken\\n        );\\n\\n    function rollover(bytes32 loanId, bytes calldata loanDataBytes) external;\\n\\n    function closeWithDeposit(\\n        bytes32 loanId,\\n        address receiver,\\n        uint256 depositAmount // denominated in loanToken\\n    )\\n        external\\n        payable\\n        returns (\\n            uint256 loanCloseAmount,\\n            uint256 withdrawAmount,\\n            address withdrawToken\\n        );\\n\\n    function closeWithSwap(\\n        bytes32 loanId,\\n        address receiver,\\n        uint256 swapAmount, // denominated in collateralToken\\n        bool returnTokenIsCollateral, // true: withdraws collateralToken, false: withdraws loanToken\\n        bytes calldata loanDataBytes\\n    )\\n        external\\n        returns (\\n            uint256 loanCloseAmount,\\n            uint256 withdrawAmount,\\n            address withdrawToken\\n        );\\n\\n    ////// Loan Maintenance //////\\n\\n    function depositCollateral(\\n        bytes32 loanId,\\n        uint256 depositAmount // must match msg.value if ether is sent\\n    ) external payable;\\n\\n    function withdrawCollateral(\\n        bytes32 loanId,\\n        address receiver,\\n        uint256 withdrawAmount\\n    ) external returns (uint256 actualWithdrawAmount);\\n\\n    function withdrawAccruedInterest(address loanToken) external;\\n\\n    function getLenderInterestData(address lender, address loanToken)\\n        external\\n        view\\n        returns (\\n            uint256 interestPaid,\\n            uint256 interestPaidDate,\\n            uint256 interestOwedPerDay,\\n            uint256 interestUnPaid,\\n            uint256 interestFeePercent,\\n            uint256 principalTotal\\n        );\\n\\n    function getLoanInterestData(bytes32 loanId)\\n        external\\n        view\\n        returns (\\n            address loanToken,\\n            uint256 interestOwedPerDay,\\n            uint256 interestDepositTotal,\\n            uint256 interestDepositRemaining\\n        );\\n\\n    struct LoanReturnData {\\n        bytes32 loanId;\\n        address loanToken;\\n        address collateralToken;\\n        uint256 principal;\\n        uint256 collateral;\\n        uint256 interestOwedPerDay;\\n        uint256 interestDepositRemaining;\\n        uint256 startRate; // collateralToLoanRate\\n        uint256 startMargin;\\n        uint256 maintenanceMargin;\\n        uint256 currentMargin;\\n        uint256 maxLoanTerm;\\n        uint256 endTimestamp;\\n        uint256 maxLiquidatable;\\n        uint256 maxSeizable;\\n    }\\n\\n    struct LoanReturnDataV2 {\\n        bytes32 loanId;\\n        address loanToken;\\n        address collateralToken;\\n        address borrower;\\n        uint256 principal;\\n        uint256 collateral;\\n        uint256 interestOwedPerDay;\\n        uint256 interestDepositRemaining;\\n        uint256 startRate; /// collateralToLoanRate\\n        uint256 startMargin;\\n        uint256 maintenanceMargin;\\n        uint256 currentMargin;\\n        uint256 maxLoanTerm;\\n        uint256 endTimestamp;\\n        uint256 maxLiquidatable;\\n        uint256 maxSeizable;\\n        uint256 creationTimestamp;\\n    }\\n\\n    function getUserLoans(\\n        address user,\\n        uint256 start,\\n        uint256 count,\\n        uint256 loanType,\\n        bool isLender,\\n        bool unsafeOnly\\n    ) external view returns (LoanReturnData[] memory loansData);\\n\\n    function getUserLoansV2(\\n        address user,\\n        uint256 start,\\n        uint256 count,\\n        uint256 loanType,\\n        bool isLender,\\n        bool unsafeOnly\\n    ) external view returns (LoanReturnDataV2[] memory loansDataV2);\\n\\n    function getLoan(bytes32 loanId) external view returns (LoanReturnData memory loanData);\\n\\n    function getLoanV2(bytes32 loanId) external view returns (LoanReturnDataV2 memory loanDataV2);\\n\\n    function getActiveLoans(\\n        uint256 start,\\n        uint256 count,\\n        bool unsafeOnly\\n    ) external view returns (LoanReturnData[] memory loansData);\\n\\n    function getActiveLoansV2(\\n        uint256 start,\\n        uint256 count,\\n        bool unsafeOnly\\n    ) external view returns (LoanReturnDataV2[] memory loansDataV2);\\n\\n    function extendLoanDuration(\\n        bytes32 loanId,\\n        uint256 depositAmount,\\n        bool useCollateral,\\n        bytes calldata /// loanDataBytes, for future use.\\n    ) external returns (uint256 secondsExtended);\\n\\n    function reduceLoanDuration(\\n        bytes32 loanId,\\n        address receiver,\\n        uint256 withdrawAmount\\n    ) external returns (uint256 secondsReduced);\\n\\n    ////// Swaps External //////\\n    function swapExternal(\\n        address sourceToken,\\n        address destToken,\\n        address receiver,\\n        address returnToSender,\\n        uint256 sourceTokenAmount,\\n        uint256 requiredDestTokenAmount,\\n        uint256 minReturn,\\n        bytes calldata swapData\\n    ) external returns (uint256 destTokenAmountReceived, uint256 sourceTokenAmountUsed);\\n\\n    function getSwapExpectedReturn(\\n        address sourceToken,\\n        address destToken,\\n        uint256 sourceTokenAmount\\n    ) external view returns (uint256);\\n\\n    function checkPriceDivergence(\\n        address sourceToken,\\n        address destToken,\\n        uint256 sourceTokenAmount,\\n        uint256 minReturn\\n    ) public view;\\n\\n    ////// Affiliates Module //////\\n\\n    function getUserNotFirstTradeFlag(address user) external view returns (bool);\\n\\n    function setUserNotFirstTradeFlag(address user) external;\\n\\n    function payTradingFeeToAffiliatesReferrer(\\n        address referrer,\\n        address trader,\\n        address token,\\n        uint256 tradingFeeTokenBaseAmount\\n    ) external returns (uint256 affiliatesBonusSOVAmount, uint256 affiliatesBonusTokenAmount);\\n\\n    function setAffiliatesReferrer(address user, address referrer) external; //onlyCallableByLoanPools\\n\\n    function getReferralsList(address referrer) external view returns (address[] memory refList);\\n\\n    function getAffiliatesReferrerBalances(address referrer)\\n        external\\n        view\\n        returns (address[] memory referrerTokensList, uint256[] memory referrerTokensBalances);\\n\\n    function getAffiliatesReferrerTokensList(address referrer)\\n        external\\n        view\\n        returns (address[] memory tokensList);\\n\\n    function getAffiliatesReferrerTokenBalance(address referrer, address token)\\n        external\\n        view\\n        returns (uint256);\\n\\n    function withdrawAffiliatesReferrerTokenFees(\\n        address token,\\n        address receiver,\\n        uint256 amount\\n    ) external;\\n\\n    function withdrawAllAffiliatesReferrerTokenFees(address receiver) external;\\n\\n    function getProtocolAddress() external view returns (address);\\n\\n    function getSovTokenAddress() external view returns (address);\\n\\n    function getLockedSOVAddress() external view returns (address);\\n\\n    function getFeeRebatePercent() external view returns (uint256);\\n\\n    function getMinReferralsToPayout() external view returns (uint256);\\n\\n    function getAffiliatesUserReferrer(address user) external view returns (address referrer);\\n\\n    function getAffiliateRewardsHeld(address referrer) external view returns (uint256);\\n\\n    function getAffiliateTradingTokenFeePercent()\\n        external\\n        view\\n        returns (uint256 affiliateTradingTokenFeePercent);\\n\\n    function getAffiliatesTokenRewardsValueInRbtc(address referrer)\\n        external\\n        view\\n        returns (uint256 rbtcTotalAmount);\\n\\n    function getSwapExternalFeePercent() external view returns (uint256 swapExternalFeePercent);\\n\\n    function setTradingRebateRewardsBasisPoint(uint256 newBasisPoint) external;\\n\\n    function getTradingRebateRewardsBasisPoint() external view returns (uint256);\\n\\n    function getDedicatedSOVRebate() external view returns (uint256);\\n\\n    function setRolloverFlexFeePercent(uint256 newRolloverFlexFeePercent) external;\\n\\n    function getDefaultPathConversion(address sourceTokenAddress, address destTokenAddress)\\n        external\\n        view\\n        returns (IERC20[] memory);\\n\\n    function setDefaultPathConversion(IERC20[] calldata defaultPath) external;\\n\\n    function removeDefaultPathConversion(address sourceTokenAddress, address destTokenAddress)\\n        external;\\n\\n    function checkCloseWithDepositIsTinyPosition(bytes32 loanId, uint256 depositAmount)\\n        external\\n        view\\n        returns (bool isTinyPosition, uint256 tinyPositionAmount);\\n\\n    function setAdmin(address newAdmin) external;\\n\\n    function getAdmin() external view returns (address);\\n\\n    function setPauser(address newPauser) external;\\n\\n    function getPauser() external view returns (address);\\n}\\n\",\"keccak256\":\"0x4e470e1fe1719c2c58b0e44aedce3ee6a21191063b533ccb71c9219a192e8884\"},\"contracts/interfaces/IWrbtc.sol\":{\"content\":\"/**\\n * Copyright 2017-2020, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity >=0.5.0 <0.6.0;\\n\\ninterface IWrbtc {\\n    function deposit() external payable;\\n\\n    function withdraw(uint256 wad) external;\\n}\\n\",\"keccak256\":\"0x20fdfe4b5e32fd7f863b3fa128e3c80bd4ccf090a4ffba56186ef3b7f2a80492\"},\"contracts/interfaces/IWrbtcERC20.sol\":{\"content\":\"/**\\n * Copyright 2017-2020, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity >=0.5.0 <0.6.0;\\n\\nimport \\\"./IWrbtc.sol\\\";\\nimport \\\"./IERC20.sol\\\";\\n\\ncontract IWrbtcERC20 is IWrbtc, IERC20 {}\\n\",\"keccak256\":\"0x7301a8c8ca7aa016ec94268a16d07366875f2e406442e929968dd745b1ee5be5\"},\"contracts/mixins/EnumerableAddressSet.sol\":{\"content\":\"pragma solidity ^0.5.0;\\n\\n/**\\n * @dev Based on Library for managing\\n * https://en.wikipedia.org/wiki/Set_(abstract_data_type)[sets] of primitive\\n * types.\\n *\\n * Sets have the following properties:\\n *\\n * - Elements are added, removed, and checked for existence in constant time\\n * (O(1)).\\n * - Elements are enumerated in O(n). No guarantees are made on the ordering.\\n *\\n * As of v2.5.0, only `address` sets are supported.\\n *\\n * Include with `using EnumerableSet for EnumerableSet.AddressSet;`.\\n *\\n * _Available since v2.5.0._\\n */\\nlibrary EnumerableAddressSet {\\n    struct AddressSet {\\n        // Position of the value in the `values` array, plus 1 because index 0\\n        // means a value is not in the set.\\n        mapping(address => uint256) index;\\n        address[] values;\\n    }\\n\\n    /**\\n     * @dev Add a value to a set. O(1).\\n     * Returns false if the value was already in the set.\\n     */\\n    function add(AddressSet storage set, address value) internal returns (bool) {\\n        if (!contains(set, value)) {\\n            set.index[value] = set.values.push(value);\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    /**\\n     * @dev Removes a value from a set. O(1).\\n     * Returns false if the value was not present in the set.\\n     */\\n    function remove(AddressSet storage set, address value) internal returns (bool) {\\n        if (contains(set, value)) {\\n            uint256 toDeleteIndex = set.index[value] - 1;\\n            uint256 lastIndex = set.values.length - 1;\\n\\n            // If the element we're deleting is the last one, we can just remove it without doing a swap\\n            if (lastIndex != toDeleteIndex) {\\n                address lastValue = set.values[lastIndex];\\n\\n                // Move the last value to the index where the deleted value is\\n                set.values[toDeleteIndex] = lastValue;\\n                // Update the index for the moved value\\n                set.index[lastValue] = toDeleteIndex + 1; // All indexes are 1-based\\n            }\\n\\n            // Delete the index entry for the deleted value\\n            delete set.index[value];\\n\\n            // Delete the old entry for the moved value\\n            set.values.pop();\\n\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function contains(AddressSet storage set, address value) internal view returns (bool) {\\n        return set.index[value] != 0;\\n    }\\n\\n    /**\\n     * @dev Returns an array with all values in the set. O(N).\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n\\n     * WARNING: This function may run out of gas on large sets: use {length} and\\n     * {get} instead in these cases.\\n     */\\n    function enumerate(AddressSet storage set) internal view returns (address[] memory) {\\n        address[] memory output = new address[](set.values.length);\\n        for (uint256 i; i < set.values.length; i++) {\\n            output[i] = set.values[i];\\n        }\\n        return output;\\n    }\\n\\n    /**\\n     * @dev Returns a chunk of array as recommended in enumerate() to avoid running of gas.\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n\\n     * WARNING: This function may run out of gas on large sets: use {length} and\\n     * {get} instead in these cases.\\n     \\n     * @param start start index of chunk\\n     * @param count num of element to return; if count == 0 then returns all the elements from the @param start\\n     */\\n    function enumerateChunk(\\n        AddressSet storage set,\\n        uint256 start,\\n        uint256 count\\n    ) internal view returns (address[] memory output) {\\n        uint256 end = start + count;\\n        require(end >= start, \\\"addition overflow\\\");\\n        end = (set.values.length < end || count == 0) ? set.values.length : end;\\n        if (end == 0 || start >= end) {\\n            return output;\\n        }\\n\\n        output = new address[](end - start);\\n        for (uint256 i; i < end - start; i++) {\\n            output[i] = set.values[i + start];\\n        }\\n        return output;\\n    }\\n\\n    /**\\n     * @dev Returns the number of elements on the set. O(1).\\n     */\\n    function length(AddressSet storage set) internal view returns (uint256) {\\n        return set.values.length;\\n    }\\n\\n    /** @dev Returns the element stored at position `index` in the set. O(1).\\n     * Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     */\\n    function get(AddressSet storage set, uint256 index) internal view returns (address) {\\n        return set.values[index];\\n    }\\n}\\n\",\"keccak256\":\"0xea6fba941ec8502aa11a7ab37e74b917d0dc47bb254e359a2870a87ef97d9872\"},\"contracts/mixins/EnumerableBytes32Set.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\n/**\\n * @title Library for managing loan sets.\\n *\\n * @notice Sets have the following properties:\\n *\\n * - Elements are added, removed, and checked for existence in constant time\\n * (O(1)).\\n * - Elements are enumerated in O(n). No guarantees are made on the ordering.\\n *\\n * Include with `using EnumerableBytes32Set for EnumerableBytes32Set.Bytes32Set;`.\\n * */\\nlibrary EnumerableBytes32Set {\\n    struct Bytes32Set {\\n        /// Position of the value in the `values` array, plus 1 because index 0\\n        /// means a value is not in the set.\\n        mapping(bytes32 => uint256) index;\\n        bytes32[] values;\\n    }\\n\\n    /**\\n     * @notice Add an address value to a set. O(1).\\n     *\\n     * @param set The set of values.\\n     * @param addrvalue The address to add.\\n     *\\n     * @return False if the value was already in the set.\\n     */\\n    function addAddress(Bytes32Set storage set, address addrvalue) internal returns (bool) {\\n        bytes32 value;\\n        assembly {\\n            value := addrvalue\\n        }\\n        return addBytes32(set, value);\\n    }\\n\\n    /**\\n     * @notice Add a value to a set. O(1).\\n     *\\n     * @param set The set of values.\\n     * @param value The new value to add.\\n     *\\n     * @return False if the value was already in the set.\\n     */\\n    function addBytes32(Bytes32Set storage set, bytes32 value) internal returns (bool) {\\n        if (!contains(set, value)) {\\n            set.index[value] = set.values.push(value);\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    /**\\n     * @notice Remove an address value from a set. O(1).\\n     *\\n     * @param set The set of values.\\n     * @param addrvalue The address to remove.\\n     *\\n     * @return False if the address was not present in the set.\\n     */\\n    function removeAddress(Bytes32Set storage set, address addrvalue) internal returns (bool) {\\n        bytes32 value;\\n        assembly {\\n            value := addrvalue\\n        }\\n        return removeBytes32(set, value);\\n    }\\n\\n    /**\\n     * @notice Remove a value from a set. O(1).\\n     *\\n     * @param set The set of values.\\n     * @param value The value to remove.\\n     *\\n     * @return False if the value was not present in the set.\\n     */\\n    function removeBytes32(Bytes32Set storage set, bytes32 value) internal returns (bool) {\\n        if (contains(set, value)) {\\n            uint256 toDeleteIndex = set.index[value] - 1;\\n            uint256 lastIndex = set.values.length - 1;\\n\\n            /// If the element we're deleting is the last one,\\n            /// we can just remove it without doing a swap.\\n            if (lastIndex != toDeleteIndex) {\\n                bytes32 lastValue = set.values[lastIndex];\\n\\n                /// Move the last value to the index where the deleted value is.\\n                set.values[toDeleteIndex] = lastValue;\\n\\n                /// Update the index for the moved value.\\n                set.index[lastValue] = toDeleteIndex + 1; // All indexes are 1-based\\n            }\\n\\n            /// Delete the index entry for the deleted value.\\n            delete set.index[value];\\n\\n            /// Delete the old entry for the moved value.\\n            set.values.pop();\\n\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    /**\\n     * @notice Find out whether a value exists in the set.\\n     *\\n     * @param set The set of values.\\n     * @param value The value to find.\\n     *\\n     * @return True if the value is in the set. O(1).\\n     */\\n    function contains(Bytes32Set storage set, bytes32 value) internal view returns (bool) {\\n        return set.index[value] != 0;\\n    }\\n\\n    /**\\n     * @dev Returns true if the value is in the set. O(1).\\n     */\\n    function containsAddress(Bytes32Set storage set, address addrvalue)\\n        internal\\n        view\\n        returns (bool)\\n    {\\n        bytes32 value;\\n        assembly {\\n            value := addrvalue\\n        }\\n        return set.index[value] != 0;\\n    }\\n\\n    /**\\n     * @notice Get all set values.\\n     *\\n     * @param set The set of values.\\n     * @param start The offset of the returning set.\\n     * @param count The limit of number of values to return.\\n     *\\n     * @return An array with all values in the set. O(N).\\n     *\\n     * @dev Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * WARNING: This function may run out of gas on large sets: use {length} and\\n     * {get} instead in these cases.\\n     */\\n    function enumerate(\\n        Bytes32Set storage set,\\n        uint256 start,\\n        uint256 count\\n    ) internal view returns (bytes32[] memory output) {\\n        uint256 end = start + count;\\n        require(end >= start, \\\"addition overflow\\\");\\n        end = set.values.length < end ? set.values.length : end;\\n        if (end == 0 || start >= end) {\\n            return output;\\n        }\\n\\n        output = new bytes32[](end - start);\\n        for (uint256 i; i < end - start; i++) {\\n            output[i] = set.values[i + start];\\n        }\\n        return output;\\n    }\\n\\n    /**\\n     * @notice Get the legth of the set.\\n     *\\n     * @param set The set of values.\\n     *\\n     * @return the number of elements on the set. O(1).\\n     */\\n    function length(Bytes32Set storage set) internal view returns (uint256) {\\n        return set.values.length;\\n    }\\n\\n    /**\\n     * @notice Get an item from the set by its index.\\n     *\\n     * @dev Note that there are no guarantees on the ordering of values inside the\\n     * array, and it may change when more values are added or removed.\\n     *\\n     * Requirements:\\n     *\\n     * - `index` must be strictly less than {length}.\\n     *\\n     * @param set The set of values.\\n     * @param index The index of the value to return.\\n     *\\n     * @return the element stored at position `index` in the set. O(1).\\n     */\\n    function get(Bytes32Set storage set, uint256 index) internal view returns (bytes32) {\\n        return set.values[index];\\n    }\\n}\\n\",\"keccak256\":\"0xa2801a585c566e07f21c1ebccd0cd0447dd5fd9fe6c1ff2b58d4d979d88a6db0\"},\"contracts/mixins/FeesHelper.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"../core/State.sol\\\";\\nimport \\\"../openzeppelin/SafeERC20.sol\\\";\\nimport \\\"../feeds/IPriceFeeds.sol\\\";\\nimport \\\"../events/FeesEvents.sol\\\";\\nimport \\\"../modules/interfaces/ProtocolAffiliatesInterface.sol\\\";\\nimport \\\"../interfaces/ISovryn.sol\\\";\\nimport \\\"../core/objects/LoanParamsStruct.sol\\\";\\n\\n/**\\n * @title The Fees Helper contract.\\n *\\n * This contract calculates and pays lending/borrow fees and rewards.\\n * */\\ncontract FeesHelper is State, FeesEvents {\\n    using SafeERC20 for IERC20;\\n\\n    /**\\n     * @notice Calculate trading fee.\\n     * @param feeTokenAmount The amount of tokens to trade.\\n     * @return The fee of the trade.\\n     * */\\n    function _getTradingFee(uint256 feeTokenAmount) internal view returns (uint256) {\\n        return feeTokenAmount.mul(tradingFeePercent).divCeil(10**20);\\n    }\\n\\n    /**\\n     * @notice Calculate swap external fee.\\n     * @param feeTokenAmount The amount of token to swap.\\n     * @return The fee of the swap.\\n     */\\n    function _getSwapExternalFee(uint256 feeTokenAmount) internal view returns (uint256) {\\n        return feeTokenAmount.mul(swapExtrernalFeePercent).divCeil(10**20);\\n    }\\n\\n    /*\\n\\t// p3.9 from bzx peckshield-audit-report-bZxV2-v1.0rc1.pdf\\n\\t// cannot be applied solely nor with LoanOpenings.sol as it drives to some other tests failure\\n\\tfunction _getTradingFee(uint256 feeTokenAmount) internal view returns (uint256) {\\n\\t\\tuint256 collateralAmountRequired =\\n\\t\\t\\tfeeTokenAmount.mul(10**20).divCeil(\\n\\t\\t\\t\\t10**20 - tradingFeePercent // never will overflow\\n\\t\\t\\t);\\n\\t\\treturn collateralAmountRequired.sub(feeTokenAmount);\\n\\t}*/\\n\\n    /**\\n     * @notice Calculate the loan origination fee.\\n     * @param feeTokenAmount The amount of tokens to borrow.\\n     * @return The fee of the loan.\\n     * */\\n    function _getBorrowingFee(uint256 feeTokenAmount) internal view returns (uint256) {\\n        return feeTokenAmount.mul(borrowingFeePercent).divCeil(10**20);\\n        /*\\n\\t\\t// p3.9 from bzx peckshield-audit-report-bZxV2-v1.0rc1.pdf\\n\\t\\t// cannot be applied solely nor with LoanOpenings.sol as it drives to some other tests failure\\n\\t\\tuint256 collateralAmountRequired =\\n\\t\\t\\tfeeTokenAmount.mul(10**20).divCeil(\\n\\t\\t\\t\\t10**20 - borrowingFeePercent // never will overflow\\n\\t\\t\\t);\\n\\t\\treturn collateralAmountRequired.sub(feeTokenAmount);*/\\n    }\\n\\n    /**\\n     * @notice Settle the trading fee and pay the token reward to the affiliates referrer.\\n     *\\n     * @param referrer The affiliate referrer address to send the reward to.\\n     * @param trader The account that performs this trade.\\n     * @param feeToken The address of the token in which the trading fee is paid.\\n     * @param tradingFee The amount of tokens accrued as fees on the trading.\\n     *\\n     * @return affiliatesBonusSOVAmount the total SOV amount that is distributed to the referrer\\n     * @return affiliatesBonusTokenAmount the total Token Base on the trading fee pairs that is distributed to the referrer\\n     * */\\n    function _payTradingFeeToAffiliate(\\n        address referrer,\\n        address trader,\\n        address feeToken,\\n        uint256 tradingFee\\n    ) internal returns (uint256 affiliatesBonusSOVAmount, uint256 affiliatesBonusTokenAmount) {\\n        (affiliatesBonusSOVAmount, affiliatesBonusTokenAmount) = ProtocolAffiliatesInterface(\\n            address(this)\\n        )\\n            .payTradingFeeToAffiliatesReferrer(referrer, trader, feeToken, tradingFee);\\n    }\\n\\n    /**\\n     * @notice Settle the trading fee and pay the token reward to the user.\\n     * @param user The address to send the reward to.\\n     * @param loanId The Id of the associated loan - used for logging only.\\n     * @param feeToken The address of the token in which the trading fee is paid.\\n     * @param tradingFee The amount of tokens accrued as fees on the trading.\\n     * */\\n    function _payTradingFee(\\n        address user,\\n        bytes32 loanId,\\n        address feeToken,\\n        address feeTokenPair,\\n        uint256 tradingFee\\n    ) internal {\\n        uint256 protocolTradingFee = tradingFee; /// Trading fee paid to protocol.\\n        if (tradingFee != 0) {\\n            if (affiliatesUserReferrer[user] != address(0)) {\\n                _payTradingFeeToAffiliate(\\n                    affiliatesUserReferrer[user],\\n                    user,\\n                    feeToken,\\n                    protocolTradingFee\\n                );\\n                protocolTradingFee = (\\n                    protocolTradingFee.sub(protocolTradingFee.mul(affiliateFeePercent).div(10**20))\\n                )\\n                    .sub(protocolTradingFee.mul(affiliateTradingTokenFeePercent).div(10**20));\\n            }\\n\\n            /// Increase the storage variable keeping track of the accumulated fees.\\n            tradingFeeTokensHeld[feeToken] = tradingFeeTokensHeld[feeToken].add(\\n                protocolTradingFee\\n            );\\n\\n            emit PayTradingFee(user, feeToken, loanId, protocolTradingFee);\\n\\n            /// Pay the token reward to the user.\\n            _payFeeReward(user, loanId, feeToken, feeTokenPair, tradingFee);\\n        }\\n    }\\n\\n    /**\\n     * @notice Settle the borrowing fee and pay the token reward to the user.\\n     * @param user The address to send the reward to.\\n     * @param loanId The Id of the associated loan - used for logging only.\\n     * @param feeToken The address of the token in which the borrowig fee is paid.\\n     * @param borrowingFee The height of the fee.\\n     * */\\n    function _payBorrowingFee(\\n        address user,\\n        bytes32 loanId,\\n        address feeToken,\\n        address feeTokenPair,\\n        uint256 borrowingFee\\n    ) internal {\\n        if (borrowingFee != 0) {\\n            /// Increase the storage variable keeping track of the accumulated fees.\\n            borrowingFeeTokensHeld[feeToken] = borrowingFeeTokensHeld[feeToken].add(borrowingFee);\\n\\n            emit PayBorrowingFee(user, feeToken, loanId, borrowingFee);\\n\\n            /// Pay the token reward to the user.\\n            _payFeeReward(user, loanId, feeToken, feeTokenPair, borrowingFee);\\n        }\\n    }\\n\\n    /**\\n     * @notice Settle the lending fee (based on the interest). Pay no token reward to the user.\\n     * @param user The address to send the reward to.\\n     * @param feeToken The address of the token in which the lending fee is paid.\\n     * @param lendingFee The height of the fee.\\n     * */\\n    function _payLendingFee(\\n        address user,\\n        address feeToken,\\n        uint256 lendingFee\\n    ) internal {\\n        if (lendingFee != 0) {\\n            /// Increase the storage variable keeping track of the accumulated fees.\\n            lendingFeeTokensHeld[feeToken] = lendingFeeTokensHeld[feeToken].add(lendingFee);\\n\\n            emit PayLendingFee(user, feeToken, lendingFee);\\n\\n            //// NOTE: Lenders do not receive a fee reward ////\\n        }\\n    }\\n\\n    /// Settle and pay borrowers based on the fees generated by their interest payments.\\n    function _settleFeeRewardForInterestExpense(\\n        LoanInterest storage loanInterestLocal,\\n        bytes32 loanId,\\n        address feeToken,\\n        address feeTokenPair,\\n        address user,\\n        uint256 interestTime\\n    ) internal {\\n        /// This represents the fee generated by a borrower's interest payment.\\n        uint256 interestExpenseFee =\\n            interestTime\\n                .sub(loanInterestLocal.updatedTimestamp)\\n                .mul(loanInterestLocal.owedPerDay)\\n                .mul(lendingFeePercent)\\n                .div(1 days * 10**20);\\n\\n        loanInterestLocal.updatedTimestamp = interestTime;\\n\\n        if (interestExpenseFee != 0) {\\n            _payFeeReward(user, loanId, feeToken, feeTokenPair, interestExpenseFee);\\n        }\\n    }\\n\\n    /**\\n     * @notice Pay the potocolToken reward to user. The reward is worth 50% of the trading/borrowing fee.\\n     * @param user The address to send the reward to.\\n     * @param loanId The Id of the associeated loan - used for logging only.\\n     * @param feeToken The address of the token in which the trading/borrowing fee was paid.\\n     * @param feeAmount The height of the fee.\\n     * */\\n    function _payFeeReward(\\n        address user,\\n        bytes32 loanId,\\n        address feeToken,\\n        address feeTokenPair,\\n        uint256 feeAmount\\n    ) internal {\\n        uint256 rewardAmount;\\n        uint256 _feeRebatePercent = feeRebatePercent;\\n        address _priceFeeds = priceFeeds;\\n\\n        if (specialRebates[feeToken][feeTokenPair] > 0) {\\n            _feeRebatePercent = specialRebates[feeToken][feeTokenPair];\\n        }\\n\\n        /// Note: this should be refactored.\\n        /// Calculate the reward amount, querying the price feed.\\n        (bool success, bytes memory data) =\\n            _priceFeeds.staticcall(\\n                abi.encodeWithSelector(\\n                    IPriceFeeds(_priceFeeds).queryReturn.selector,\\n                    feeToken,\\n                    sovTokenAddress, /// Price rewards using BZRX price rather than vesting token price.\\n                    feeAmount.mul(_feeRebatePercent).div(10**20)\\n                )\\n            );\\n        // solhint-disable-next-line no-inline-assembly\\n        assembly {\\n            if eq(success, 1) {\\n                rewardAmount := mload(add(data, 32))\\n            }\\n        }\\n\\n        // Check the dedicated SOV that is used to pay trading rebate rewards\\n        uint256 dedicatedSOV = ISovryn(address(this)).getDedicatedSOVRebate();\\n        if (rewardAmount != 0 && dedicatedSOV >= rewardAmount) {\\n            IERC20(sovTokenAddress).approve(lockedSOVAddress, rewardAmount);\\n\\n            (bool success, ) =\\n                lockedSOVAddress.call(\\n                    abi.encodeWithSignature(\\n                        \\\"deposit(address,uint256,uint256)\\\",\\n                        user,\\n                        rewardAmount,\\n                        tradingRebateRewardsBasisPoint\\n                    )\\n                );\\n\\n            if (success) {\\n                protocolTokenPaid = protocolTokenPaid.add(rewardAmount);\\n\\n                emit EarnReward(\\n                    user,\\n                    sovTokenAddress,\\n                    loanId,\\n                    _feeRebatePercent,\\n                    rewardAmount,\\n                    tradingRebateRewardsBasisPoint\\n                );\\n            } else {\\n                emit EarnRewardFail(\\n                    user,\\n                    sovTokenAddress,\\n                    loanId,\\n                    _feeRebatePercent,\\n                    rewardAmount,\\n                    tradingRebateRewardsBasisPoint\\n                );\\n            }\\n        } else if (rewardAmount != 0 && dedicatedSOV < rewardAmount) {\\n            emit EarnRewardFail(\\n                user,\\n                sovTokenAddress,\\n                loanId,\\n                _feeRebatePercent,\\n                rewardAmount,\\n                tradingRebateRewardsBasisPoint\\n            );\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x9094bce5eab7109594a795982a779641c951c2617a618f5eab1f651b3b945077\"},\"contracts/mixins/InterestUser.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"../openzeppelin/SafeERC20.sol\\\";\\nimport \\\"../core/State.sol\\\";\\nimport \\\"../mixins/VaultController.sol\\\";\\nimport \\\"./FeesHelper.sol\\\";\\n\\n/**\\n * @title The Interest User contract.\\n *\\n * This contract pays loan interests.\\n * */\\ncontract InterestUser is VaultController, FeesHelper {\\n    using SafeERC20 for IERC20;\\n\\n    /// Triggered whenever interest is paid to lender.\\n    event PayInterestTransfer(\\n        address indexed interestToken,\\n        address indexed lender,\\n        uint256 effectiveInterest\\n    );\\n\\n    /**\\n     * @notice Internal function to pay interest of a loan.\\n     * @dev Calls _payInterestTransfer internal function to transfer tokens.\\n     * @param lender The account address of the lender.\\n     * @param interestToken The token address to pay interest with.\\n     * */\\n    function _payInterest(address lender, address interestToken) internal {\\n        LenderInterest storage lenderInterestLocal = lenderInterest[lender][interestToken];\\n\\n        uint256 interestOwedNow = 0;\\n        if (lenderInterestLocal.owedPerDay != 0 && lenderInterestLocal.updatedTimestamp != 0) {\\n            interestOwedNow = block\\n                .timestamp\\n                .sub(lenderInterestLocal.updatedTimestamp)\\n                .mul(lenderInterestLocal.owedPerDay)\\n                .div(1 days);\\n\\n            lenderInterestLocal.updatedTimestamp = block.timestamp;\\n\\n            if (interestOwedNow > lenderInterestLocal.owedTotal)\\n                interestOwedNow = lenderInterestLocal.owedTotal;\\n\\n            if (interestOwedNow != 0) {\\n                lenderInterestLocal.paidTotal = lenderInterestLocal.paidTotal.add(interestOwedNow);\\n                lenderInterestLocal.owedTotal = lenderInterestLocal.owedTotal.sub(interestOwedNow);\\n\\n                _payInterestTransfer(lender, interestToken, interestOwedNow);\\n            }\\n        } else {\\n            lenderInterestLocal.updatedTimestamp = block.timestamp;\\n        }\\n    }\\n\\n    /**\\n     * @notice Internal function to transfer tokens for the interest of a loan.\\n     * @param lender The account address of the lender.\\n     * @param interestToken The token address to pay interest with.\\n     * @param interestOwedNow The amount of interest to pay.\\n     * */\\n    function _payInterestTransfer(\\n        address lender,\\n        address interestToken,\\n        uint256 interestOwedNow\\n    ) internal {\\n        uint256 lendingFee = interestOwedNow.mul(lendingFeePercent).div(10**20);\\n        /// TODO: refactor: data incapsulation violation and DRY design principles\\n        /// uint256 lendingFee = interestOwedNow.mul(lendingFeePercent).divCeil(10**20); is better but produces errors in tests because of this\\n\\n        _payLendingFee(lender, interestToken, lendingFee);\\n\\n        /// Transfers the interest to the lender, less the interest fee.\\n        vaultWithdraw(interestToken, lender, interestOwedNow.sub(lendingFee));\\n\\n        /// Event Log\\n        emit PayInterestTransfer(interestToken, lender, interestOwedNow.sub(lendingFee));\\n    }\\n}\\n\",\"keccak256\":\"0x870208d1ae2c7adca9478b86fe5e70b4458bf719d49b19f5a8a4441bdaccf866\"},\"contracts/mixins/ModuleCommonFunctionalities.sol\":{\"content\":\"pragma solidity 0.5.17;\\n\\nimport \\\"../core/State.sol\\\";\\n\\ncontract ModuleCommonFunctionalities is State {\\n    modifier whenNotPaused() {\\n        require(!pause, \\\"Paused\\\");\\n        _;\\n    }\\n}\\n\",\"keccak256\":\"0x9ed7a6a635ef960b53888b28a2a6bed8b071255cad8cd33f00386a634cbddb74\"},\"contracts/mixins/VaultController.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"../openzeppelin/SafeERC20.sol\\\";\\nimport \\\"../core/State.sol\\\";\\n\\n/**\\n * @title The Vault Controller contract.\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized margin\\n * trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract implements functionality to deposit and withdraw wrBTC and\\n * other tokens from the vault.\\n * */\\ncontract VaultController is State {\\n    using SafeERC20 for IERC20;\\n\\n    event VaultDeposit(address indexed asset, address indexed from, uint256 amount);\\n    event VaultWithdraw(address indexed asset, address indexed to, uint256 amount);\\n\\n    /**\\n     * @notice Deposit wrBTC into the vault.\\n     *\\n     * @param from The address of the account paying the deposit.\\n     * @param value The amount of wrBTC tokens to transfer.\\n     */\\n    function vaultEtherDeposit(address from, uint256 value) internal {\\n        IWrbtcERC20 _wrbtcToken = wrbtcToken;\\n        _wrbtcToken.deposit.value(value)();\\n\\n        emit VaultDeposit(address(_wrbtcToken), from, value);\\n    }\\n\\n    /**\\n     * @notice Withdraw wrBTC from the vault.\\n     *\\n     * @param to The address of the recipient.\\n     * @param value The amount of wrBTC tokens to transfer.\\n     */\\n    function vaultEtherWithdraw(address to, uint256 value) internal {\\n        if (value != 0) {\\n            IWrbtcERC20 _wrbtcToken = wrbtcToken;\\n            uint256 balance = address(this).balance;\\n            if (value > balance) {\\n                _wrbtcToken.withdraw(value - balance);\\n            }\\n            Address.sendValue(to, value);\\n\\n            emit VaultWithdraw(address(_wrbtcToken), to, value);\\n        }\\n    }\\n\\n    /**\\n     * @notice Deposit tokens into the vault.\\n     *\\n     * @param token The address of the token instance.\\n     * @param from The address of the account paying the deposit.\\n     * @param value The amount of tokens to transfer.\\n     */\\n    function vaultDeposit(\\n        address token,\\n        address from,\\n        uint256 value\\n    ) internal {\\n        if (value != 0) {\\n            IERC20(token).safeTransferFrom(from, address(this), value);\\n\\n            emit VaultDeposit(token, from, value);\\n        }\\n    }\\n\\n    /**\\n     * @notice Withdraw tokens from the vault.\\n     *\\n     * @param token The address of the token instance.\\n     * @param to The address of the recipient.\\n     * @param value The amount of tokens to transfer.\\n     */\\n    function vaultWithdraw(\\n        address token,\\n        address to,\\n        uint256 value\\n    ) internal {\\n        if (value != 0) {\\n            IERC20(token).safeTransfer(to, value);\\n\\n            emit VaultWithdraw(token, to, value);\\n        }\\n    }\\n\\n    /**\\n     * @notice Transfer tokens from an account into another one.\\n     *\\n     * @param token The address of the token instance.\\n     * @param from The address of the account paying.\\n     * @param to The address of the recipient.\\n     * @param value The amount of tokens to transfer.\\n     */\\n    function vaultTransfer(\\n        address token,\\n        address from,\\n        address to,\\n        uint256 value\\n    ) internal {\\n        if (value != 0) {\\n            if (from == address(this)) {\\n                IERC20(token).safeTransfer(to, value);\\n            } else {\\n                IERC20(token).safeTransferFrom(from, to, value);\\n            }\\n        }\\n    }\\n\\n    /**\\n     * @notice Approve an allowance of tokens to be spent by an account.\\n     *\\n     * @param token The address of the token instance.\\n     * @param to The address of the spender.\\n     * @param value The amount of tokens to allow.\\n     */\\n    function vaultApprove(\\n        address token,\\n        address to,\\n        uint256 value\\n    ) internal {\\n        if (value != 0 && IERC20(token).allowance(address(this), to) != 0) {\\n            IERC20(token).safeApprove(to, 0);\\n        }\\n        IERC20(token).safeApprove(to, value);\\n    }\\n}\\n\",\"keccak256\":\"0xdcde4eee041b77ec9b73378a4a75b4d20d62f2e76f96f759d55260cf6717d0f3\"},\"contracts/modules/LoanOpenings.sol\":{\"content\":\"/**\\n * Copyright 2017-2020, bZeroX, LLC. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\npragma experimental ABIEncoderV2;\\n\\nimport \\\"../core/State.sol\\\";\\nimport \\\"../events/LoanOpeningsEvents.sol\\\";\\nimport \\\"../mixins/VaultController.sol\\\";\\nimport \\\"../mixins/InterestUser.sol\\\";\\nimport \\\"../swaps/SwapsUser.sol\\\";\\nimport \\\"../mixins/ModuleCommonFunctionalities.sol\\\";\\nimport \\\"../connectors/loantoken/lib/MarginTradeStructHelpers.sol\\\";\\n\\n/**\\n * @title Loan Openings contract.\\n *\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains functions to borrow and trade.\\n * */\\ncontract LoanOpenings is\\n    LoanOpeningsEvents,\\n    VaultController,\\n    InterestUser,\\n    SwapsUser,\\n    ModuleCommonFunctionalities\\n{\\n    constructor() public {}\\n\\n    /**\\n     * @notice Fallback function is to react to receiving value (rBTC).\\n     * */\\n    function() external {\\n        revert(\\\"fallback not allowed\\\");\\n    }\\n\\n    /**\\n     * @notice Set function selectors on target contract.\\n     *\\n     * @param target The address of the target contract.\\n     * */\\n    function initialize(address target) external onlyOwner {\\n        address prevModuleContractAddress = logicTargets[this.borrowOrTradeFromPool.selector];\\n        _setTarget(this.borrowOrTradeFromPool.selector, target);\\n        _setTarget(this.setDelegatedManager.selector, target);\\n        _setTarget(this.getEstimatedMarginExposure.selector, target);\\n        _setTarget(this.getRequiredCollateral.selector, target);\\n        _setTarget(this.getBorrowAmount.selector, target);\\n        emit ProtocolModuleContractReplaced(prevModuleContractAddress, target, \\\"LoanOpenings\\\");\\n    }\\n\\n    /**\\n     * @notice Borrow or trade from pool.\\n     *\\n     * @dev Note: Only callable by loan pools (iTokens).\\n     * Wrapper to _borrowOrTrade internal function.\\n     *\\n     * @param loanParamsId The ID of the loan parameters.\\n     * @param loanId The ID of the loan. If 0, start a new loan.\\n     * @param isTorqueLoan Whether the loan is a Torque loan.\\n     * @param initialMargin The initial amount of margin.\\n     * @param sentAddresses The addresses to send tokens: lender, borrower,\\n     *   receiver and manager:\\n     *     lender: must match loan if loanId provided.\\n     *     borrower: must match loan if loanId provided.\\n     *     receiver: receiver of funds (address(0) assumes borrower address).\\n     *     manager: delegated manager of loan unless address(0).\\n     * @param sentValues The values to send:\\n     *     interestRate: New loan interest rate.\\n     *     newPrincipal: New loan size (borrowAmount + any borrowed interest).\\n     *     interestInitialAmount: New amount of interest to escrow for Torque loan (determines initial loan length).\\n     *     loanTokenReceived: Total loanToken deposit (amount not sent to borrower in the case of Torque loans).\\n     *     collateralTokenSent: Total collateralToken deposit.\\n     *     minEntryPrice: Minimum entry price for checking price divergence (Value of loan token in collateral).\\n     * @param loanDataBytes The payload for the call. These loan DataBytes are\\n     *   additional loan data (not in use for token swaps).\\n     *\\n     * @return newPrincipal The new loan size.\\n     * @return newCollateral The new collateral amount.\\n     * */\\n    function borrowOrTradeFromPool(\\n        bytes32 loanParamsId,\\n        bytes32 loanId,\\n        bool isTorqueLoan,\\n        uint256 initialMargin,\\n        MarginTradeStructHelpers.SentAddresses calldata sentAddresses,\\n        MarginTradeStructHelpers.SentAmounts calldata sentValues,\\n        bytes calldata loanDataBytes\\n    )\\n        external\\n        payable\\n        nonReentrant\\n        whenNotPaused\\n        returns (uint256 newPrincipal, uint256 newCollateral)\\n    {\\n        require(msg.value == 0 || loanDataBytes.length != 0, \\\"loanDataBytes required with ether\\\");\\n\\n        /// Only callable by loan pools.\\n        require(loanPoolToUnderlying[msg.sender] != address(0), \\\"not authorized\\\");\\n\\n        LoanParams memory loanParamsLocal = loanParams[loanParamsId];\\n        require(loanParamsLocal.id != 0, \\\"loanParams not exists\\\");\\n\\n        /// Get required collateral.\\n        uint256 collateralAmountRequired =\\n            _getRequiredCollateral(\\n                loanParamsLocal.loanToken,\\n                loanParamsLocal.collateralToken,\\n                sentValues.newPrincipal,\\n                initialMargin,\\n                isTorqueLoan\\n            );\\n        require(collateralAmountRequired != 0, \\\"collateral is 0\\\");\\n\\n        return\\n            _borrowOrTrade(\\n                loanParamsLocal,\\n                loanId,\\n                isTorqueLoan,\\n                collateralAmountRequired,\\n                initialMargin,\\n                sentAddresses,\\n                sentValues,\\n                loanDataBytes\\n            );\\n    }\\n\\n    /**\\n     * @notice Set the delegated manager.\\n     *\\n     * @dev Wrapper for _setDelegatedManager internal function.\\n     *\\n     * @param loanId The ID of the loan. If 0, start a new loan.\\n     * @param delegated The address of the delegated manager.\\n     * @param toggle The flag true/false for the delegated manager.\\n     * */\\n    function setDelegatedManager(\\n        bytes32 loanId,\\n        address delegated,\\n        bool toggle\\n    ) external whenNotPaused {\\n        require(loans[loanId].borrower == msg.sender, \\\"unauthorized\\\");\\n\\n        _setDelegatedManager(loanId, msg.sender, delegated, toggle);\\n    }\\n\\n    /**\\n     * @notice Get the estimated margin exposure.\\n     *\\n     * Margin is the money borrowed from a broker to purchase an investment\\n     * and is the difference between the total value of investment and the\\n     * loan amount. Margin trading refers to the practice of using borrowed\\n     * funds from a broker to trade a financial asset, which forms the\\n     * collateral for the loan from the broker.\\n     *\\n     * @param loanToken The loan token instance address.\\n     * @param collateralToken The collateral token instance address.\\n     * @param loanTokenSent The amount of loan tokens sent.\\n     * @param collateralTokenSent The amount of collateral tokens sent.\\n     * @param interestRate The interest rate. Percentage w/ 18 decimals.\\n     * @param newPrincipal The updated amount of principal (current debt).\\n     *\\n     * @return The margin exposure.\\n     * */\\n    function getEstimatedMarginExposure(\\n        address loanToken,\\n        address collateralToken,\\n        uint256 loanTokenSent,\\n        uint256 collateralTokenSent,\\n        uint256 interestRate,\\n        uint256 newPrincipal\\n    ) external view returns (uint256) {\\n        uint256 maxLoanTerm = 2419200; // 28 days\\n\\n        uint256 owedPerDay = newPrincipal.mul(interestRate).div(365 * 10**20);\\n\\n        uint256 interestAmountRequired = maxLoanTerm.mul(owedPerDay).div(86400);\\n\\n        uint256 swapAmount = loanTokenSent.sub(interestAmountRequired);\\n        uint256 tradingFee = _getTradingFee(swapAmount);\\n        if (tradingFee != 0) {\\n            swapAmount = swapAmount.sub(tradingFee);\\n        }\\n\\n        uint256 receivedAmount = _swapsExpectedReturn(loanToken, collateralToken, swapAmount);\\n        if (receivedAmount == 0) {\\n            return 0;\\n        } else {\\n            return collateralTokenSent.add(receivedAmount);\\n        }\\n    }\\n\\n    /**\\n     * @notice Get the required collateral.\\n     *\\n     * @dev Calls internal _getRequiredCollateral and add fees.\\n     *\\n     * @param loanToken The loan token instance address.\\n     * @param collateralToken The collateral token instance address.\\n     * @param newPrincipal The updated amount of principal (current debt).\\n     * @param marginAmount The amount of margin of the trade.\\n     * @param isTorqueLoan Whether the loan is a Torque loan.\\n     *\\n     * @return collateralAmountRequired The required collateral.\\n     * */\\n    function getRequiredCollateral(\\n        address loanToken,\\n        address collateralToken,\\n        uint256 newPrincipal,\\n        uint256 marginAmount,\\n        bool isTorqueLoan\\n    ) public view returns (uint256 collateralAmountRequired) {\\n        if (marginAmount != 0) {\\n            collateralAmountRequired = _getRequiredCollateral(\\n                loanToken,\\n                collateralToken,\\n                newPrincipal,\\n                marginAmount,\\n                isTorqueLoan\\n            );\\n\\n            // p3.9 from bzx peckshield-audit-report-bZxV2-v1.0rc1.pdf\\n            // cannot be applied solely as it drives to some other tests failure\\n            /*\\n\\t\\t\\tuint256 feePercent = isTorqueLoan ? borrowingFeePercent : tradingFeePercent;\\n\\t\\t\\tif (collateralAmountRequired != 0 && feePercent != 0) {\\n\\t\\t\\t\\tcollateralAmountRequired = collateralAmountRequired.mul(10**20).divCeil(\\n\\t\\t\\t\\t\\t10**20 - feePercent // never will overflow\\n\\t\\t\\t\\t);\\n\\t\\t\\t}*/\\n\\n            uint256 fee =\\n                isTorqueLoan\\n                    ? _getBorrowingFee(collateralAmountRequired)\\n                    : _getTradingFee(collateralAmountRequired);\\n            if (fee != 0) {\\n                collateralAmountRequired = collateralAmountRequired.add(fee);\\n            }\\n        }\\n    }\\n\\n    /**\\n     * @notice Get the borrow amount of a trade loan.\\n     *\\n     * @dev Basically borrowAmount = collateral / marginAmount\\n     *\\n     * Collateral is something that helps secure a loan. When you borrow money,\\n     * you agree that your lender can take something and sell it to get their\\n     * money back if you fail to repay the loan. That's the collateral.\\n     *\\n     * @param loanToken The loan token instance address.\\n     * @param collateralToken The collateral token instance address.\\n     * @param collateralTokenAmount The amount of collateral.\\n     * @param marginAmount The amount of margin of the trade.\\n     * @param isTorqueLoan Whether the loan is a Torque loan.\\n     *\\n     * @return borrowAmount The borrow amount.\\n     * */\\n    function getBorrowAmount(\\n        address loanToken,\\n        address collateralToken,\\n        uint256 collateralTokenAmount,\\n        uint256 marginAmount,\\n        bool isTorqueLoan\\n    ) public view returns (uint256 borrowAmount) {\\n        if (marginAmount != 0) {\\n            if (isTorqueLoan) {\\n                marginAmount = marginAmount.add(10**20); /// Adjust for over-collateralized loan.\\n            }\\n            uint256 collateral = collateralTokenAmount;\\n            uint256 fee = isTorqueLoan ? _getBorrowingFee(collateral) : _getTradingFee(collateral);\\n            if (fee != 0) {\\n                collateral = collateral.sub(fee);\\n            }\\n            if (loanToken == collateralToken) {\\n                borrowAmount = collateral.mul(10**20).div(marginAmount);\\n            } else {\\n                (uint256 sourceToDestRate, uint256 sourceToDestPrecision) =\\n                    IPriceFeeds(priceFeeds).queryRate(collateralToken, loanToken);\\n                if (sourceToDestPrecision != 0) {\\n                    borrowAmount = collateral\\n                        .mul(10**20)\\n                        .mul(sourceToDestRate)\\n                        .div(marginAmount)\\n                        .div(sourceToDestPrecision);\\n                }\\n            }\\n            /*\\n\\t\\t\\t// p3.9 from bzx peckshield-audit-report-bZxV2-v1.0rc1.pdf\\n\\t\\t\\t// cannot be applied solely as it drives to some other tests failure\\n\\t\\t\\tuint256 feePercent = isTorqueLoan ? borrowingFeePercent : tradingFeePercent;\\n\\t\\t\\tif (borrowAmount != 0 && feePercent != 0) {\\n\\t\\t\\t\\tborrowAmount = borrowAmount\\n\\t\\t\\t\\t\\t.mul(\\n\\t\\t\\t\\t\\t10**20 - feePercent // never will overflow\\n\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t.divCeil(10**20);\\n\\t\\t\\t}*/\\n        }\\n    }\\n\\n    /**\\n     * @notice Borrow or trade.\\n     *\\n     * @param loanParamsLocal The loan parameters.\\n     * @param loanId The ID of the loan. If 0, start a new loan.\\n     * @param isTorqueLoan Whether the loan is a Torque loan.\\n     * @param collateralAmountRequired The required amount of collateral.\\n     * @param initialMargin The initial amount of margin.\\n     * @param sentAddresses The addresses to send tokens: lender, borrower,\\n     *   receiver and manager:\\n     *     lender: must match loan if loanId provided.\\n     *     borrower: must match loan if loanId provided.\\n     *     receiver: receiver of funds (address(0) assumes borrower address).\\n     *     manager: delegated manager of loan unless address(0).\\n     * @param sentValues The values to send:\\n     *     interestRate: New loan interest rate.\\n     *     newPrincipal: New loan size (borrowAmount + any borrowed interest).\\n     *     interestInitialAmount: New amount of interest to escrow for Torque loan (determines initial loan length).\\n     *     loanTokenReceived: Total loanToken deposit (amount not sent to borrower in the case of Torque loans).\\n     *     collateralTokenSent: Total collateralToken deposit.\\n     *     minEntryPrice: Minimum entry price for checking price divergence (Value of loan token in collateral).\\n     * @param loanDataBytes The payload for the call. These loan DataBytes are\\n     *   additional loan data (not in use for token swaps).\\n     *\\n     * @return The new loan size.\\n     * @return The new collateral amount.\\n     * */\\n    function _borrowOrTrade(\\n        LoanParams memory loanParamsLocal,\\n        bytes32 loanId,\\n        bool isTorqueLoan,\\n        uint256 collateralAmountRequired,\\n        uint256 initialMargin,\\n        MarginTradeStructHelpers.SentAddresses memory sentAddresses,\\n        MarginTradeStructHelpers.SentAmounts memory sentValues,\\n        bytes memory loanDataBytes\\n    ) internal returns (uint256, uint256) {\\n        require(\\n            loanParamsLocal.collateralToken != loanParamsLocal.loanToken,\\n            \\\"collateral/loan match\\\"\\n        );\\n        require(initialMargin >= loanParamsLocal.minInitialMargin, \\\"initialMargin too low\\\");\\n\\n        /// maxLoanTerm == 0 indicates a Torque loan and requires that torqueInterest != 0\\n        require(\\n            loanParamsLocal.maxLoanTerm != 0 || sentValues.interestInitialAmount != 0, /// torqueInterest\\n            \\\"invalid interest\\\"\\n        );\\n\\n        // @note this fix is for borrowing only\\n        uint256 sentNewPrincipal = isTorqueLoan ? sentValues.newPrincipal : 0;\\n\\n        /// Initialize loan.\\n        Loan storage loanLocal =\\n            loans[\\n                _initializeLoan(\\n                    loanParamsLocal,\\n                    loanId,\\n                    initialMargin,\\n                    sentAddresses,\\n                    sentValues.newPrincipal\\n                )\\n            ];\\n\\n        // Get required interest.\\n        uint256 amount =\\n            _initializeInterest(\\n                loanParamsLocal,\\n                loanLocal,\\n                sentValues.interestRate, /// newRate\\n                sentValues.newPrincipal, /// newPrincipal,\\n                sentValues.interestInitialAmount /// torqueInterest\\n            );\\n\\n        /// substract out interest from usable loanToken sent.\\n        sentValues.loanTokenSent = sentValues.loanTokenSent.sub(amount);\\n\\n        if (isTorqueLoan) {\\n            require(sentValues.loanTokenSent == 0, \\\"surplus loan token\\\");\\n\\n            uint256 borrowingFee = _getBorrowingFee(sentValues.collateralTokenSent);\\n            // need to temp into local state to avoid\\n            address _collateralToken = loanParamsLocal.collateralToken;\\n            address _loanToken = loanParamsLocal.loanToken;\\n            if (borrowingFee != 0) {\\n                _payBorrowingFee(\\n                    sentAddresses.borrower, /// borrower\\n                    loanLocal.id,\\n                    _collateralToken, /// fee token\\n                    _loanToken, /// pairToken (used to check if there is any special rebates or not) -- to pay fee reward\\n                    borrowingFee\\n                );\\n\\n                sentValues.collateralTokenSent = sentValues.collateralTokenSent.sub(borrowingFee);\\n            }\\n        } else {\\n            /// Update collateral after trade.\\n            sentValues = _updateCollateralAfterTrade(\\n                loanId,\\n                loanParamsLocal,\\n                sentAddresses,\\n                sentValues,\\n                loanDataBytes\\n            );\\n        }\\n\\n        /// Settle collateral.\\n        require(\\n            _isCollateralSatisfied(\\n                loanParamsLocal,\\n                loanLocal,\\n                initialMargin,\\n                sentValues.collateralTokenSent,\\n                collateralAmountRequired,\\n                sentNewPrincipal\\n            ),\\n            \\\"collateral insufficient\\\"\\n        );\\n\\n        loanLocal.collateral = loanLocal.collateral.add(sentValues.collateralTokenSent);\\n\\n        if (isTorqueLoan) {\\n            /// reclaiming variable -> interestDuration\\n            sentValues.interestDuration = loanLocal.endTimestamp.sub(block.timestamp);\\n        } else {\\n            /// reclaiming variable -> entryLeverage = 100 / initialMargin\\n            sentValues.entryLeverage = SafeMath.div(10**38, initialMargin);\\n        }\\n\\n        _finalizeOpen(loanParamsLocal, loanLocal, sentAddresses, sentValues, isTorqueLoan);\\n\\n        return (sentValues.newPrincipal, sentValues.collateralTokenSent); /// newPrincipal, newCollateral\\n    }\\n\\n    function _updateCollateralAfterTrade(\\n        bytes32 loanId,\\n        LoanParams memory loanParamsLocal,\\n        MarginTradeStructHelpers.SentAddresses memory sentAddresses,\\n        MarginTradeStructHelpers.SentAmounts memory sentValues,\\n        bytes memory loanDataBytes\\n    ) internal returns (MarginTradeStructHelpers.SentAmounts memory) {\\n        uint256 receivedAmount;\\n        (receivedAmount, , sentValues.loanToCollateralSwapRate) = _loanSwap(\\n            loanId,\\n            loanParamsLocal.loanToken,\\n            loanParamsLocal.collateralToken,\\n            sentAddresses.borrower, /// borrower\\n            sentValues.loanTokenSent, /// loanTokenUsable (minSourceTokenAmount)\\n            0, /// maxSourceTokenAmount (0 means minSourceTokenAmount)\\n            0, /// requiredDestTokenAmount (enforces that all of loanTokenUsable is swapped)\\n            false, /// bypassFee\\n            loanDataBytes\\n        );\\n        sentValues.collateralTokenSent = sentValues.collateralTokenSent.add(receivedAmount);\\n\\n        /// Check the minEntryPrice with the rate\\n        require(\\n            sentValues.loanToCollateralSwapRate >= sentValues.minEntryPrice,\\n            \\\"entry price above the minimum\\\"\\n        );\\n\\n        return sentValues;\\n    }\\n\\n    /**\\n     * @notice Finalize an open loan.\\n     *\\n     * @dev Finalize it by updating local parameters of the loan.\\n     *\\n     * @param loanParamsLocal The loan parameters.\\n     * @param loanLocal The loan object.\\n     * @param sentAddresses The addresses to send tokens: lender, borrower,\\n     *   receiver and manager:\\n     *     lender: must match loan if loanId provided.\\n     *     borrower: must match loan if loanId provided.\\n     *     receiver: receiver of funds (address(0) assumes borrower address).\\n     *     manager: delegated manager of loan unless address(0).\\n     * @param sentValues The values to send:\\n     *     interestRate: New loan interest rate.\\n     *     newPrincipal: New loan size (borrowAmount + any borrowed interest).\\n     *     interestInitialAmount: New amount of interest to escrow for Torque loan (determines initial loan length).\\n     *     loanTokenReceived: Total loanToken deposit (amount not sent to borrower in the case of Torque loans).\\n     *     collateralTokenSent: Total collateralToken deposit.\\n     *     minEntryPrice: Minimum entry price for checking price divergence (Value of loan token in collateral).\\n     * @param isTorqueLoan Whether the loan is a Torque loan.\\n     * */\\n    function _finalizeOpen(\\n        LoanParams memory loanParamsLocal,\\n        Loan storage loanLocal,\\n        MarginTradeStructHelpers.SentAddresses memory sentAddresses,\\n        MarginTradeStructHelpers.SentAmounts memory sentValues,\\n        bool isTorqueLoan\\n    ) internal {\\n        /// @dev TODO: here the actual used rate and margin should go.\\n        (uint256 initialMargin, uint256 collateralToLoanRate) =\\n            IPriceFeeds(priceFeeds).getCurrentMargin(\\n                loanParamsLocal.loanToken,\\n                loanParamsLocal.collateralToken,\\n                loanLocal.principal,\\n                loanLocal.collateral\\n            );\\n        require(initialMargin > loanParamsLocal.maintenanceMargin, \\\"unhealthy position\\\");\\n\\n        if (loanLocal.startTimestamp == block.timestamp) {\\n            uint256 loanToCollateralPrecision =\\n                IPriceFeeds(priceFeeds).queryPrecision(\\n                    loanParamsLocal.loanToken,\\n                    loanParamsLocal.collateralToken\\n                );\\n            uint256 collateralToLoanPrecision =\\n                IPriceFeeds(priceFeeds).queryPrecision(\\n                    loanParamsLocal.collateralToken,\\n                    loanParamsLocal.loanToken\\n                );\\n            uint256 totalSwapRate = loanToCollateralPrecision.mul(collateralToLoanPrecision);\\n            loanLocal.startRate = isTorqueLoan\\n                ? collateralToLoanRate\\n                : totalSwapRate.div(sentValues.loanToCollateralSwapRate);\\n        }\\n\\n        _emitOpeningEvents(\\n            loanParamsLocal,\\n            loanLocal,\\n            sentAddresses,\\n            sentValues,\\n            collateralToLoanRate,\\n            initialMargin,\\n            isTorqueLoan\\n        );\\n    }\\n\\n    /**\\n     * @notice Emit the opening events.\\n     *\\n     * @param loanParamsLocal The loan parameters.\\n     * @param loanLocal The loan object.\\n     * @param sentAddresses The addresses to send tokens: lender, borrower,\\n     *   receiver and manager:\\n     *     lender: must match loan if loanId provided.\\n     *     borrower: must match loan if loanId provided.\\n     *     receiver: receiver of funds (address(0) assumes borrower address).\\n     *     manager: delegated manager of loan unless address(0).\\n     * @param sentValues The values to send:\\n     *     interestRate: New loan interest rate.\\n     *     newPrincipal: New loan size (borrowAmount + any borrowed interest).\\n     *     interestInitialAmount: New amount of interest to escrow for Torque loan (determines initial loan length).\\n     *     loanTokenReceived: Total loanToken deposit (amount not sent to borrower in the case of Torque loans).\\n     *     collateralTokenSent: Total collateralToken deposit.\\n     *     minEntryPrice: Minimum entry price for checking price divergence (Value of loan token in collateral).\\n     * @param collateralToLoanRate The exchange rate from collateral to loan\\n     *   tokens.\\n     * @param margin The amount of margin of the trade.\\n     * @param isTorqueLoan Whether the loan is a Torque loan.\\n     * */\\n    function _emitOpeningEvents(\\n        LoanParams memory loanParamsLocal,\\n        Loan memory loanLocal,\\n        MarginTradeStructHelpers.SentAddresses memory sentAddresses,\\n        MarginTradeStructHelpers.SentAmounts memory sentValues,\\n        uint256 collateralToLoanRate,\\n        uint256 margin,\\n        bool isTorqueLoan\\n    ) internal {\\n        if (isTorqueLoan) {\\n            emit Borrow(\\n                sentAddresses.borrower, /// user (borrower)\\n                sentAddresses.lender, /// lender\\n                loanLocal.id, /// loanId\\n                loanParamsLocal.loanToken, /// loanToken\\n                loanParamsLocal.collateralToken, /// collateralToken\\n                sentValues.newPrincipal, /// newPrincipal\\n                sentValues.collateralTokenSent, /// newCollateral\\n                sentValues.interestRate, /// interestRate\\n                sentValues.interestDuration, /// interestDuration\\n                collateralToLoanRate, /// collateralToLoanRate,\\n                margin /// currentMargin\\n            );\\n        } else {\\n            /// currentLeverage = 100 / currentMargin\\n            margin = SafeMath.div(10**38, margin);\\n\\n            emit Trade(\\n                sentAddresses.borrower, /// user (trader)\\n                sentAddresses.lender, /// lender\\n                loanLocal.id, /// loanId\\n                loanParamsLocal.collateralToken, /// collateralToken\\n                loanParamsLocal.loanToken, /// loanToken\\n                sentValues.collateralTokenSent, /// positionSize\\n                sentValues.newPrincipal, /// borrowedAmount\\n                sentValues.interestRate, /// interestRate,\\n                loanLocal.endTimestamp, /// settlementDate\\n                sentValues.loanToCollateralSwapRate, /// entryPrice (loanToCollateralSwapRate)\\n                sentValues.entryLeverage, /// entryLeverage\\n                margin /// currentLeverage\\n            );\\n        }\\n    }\\n\\n    /**\\n     * @notice Set the delegated manager.\\n     *\\n     * @param loanId The ID of the loan. If 0, start a new loan.\\n     * @param delegator The address of previous manager.\\n     * @param delegated The address of the delegated manager.\\n     * @param toggle The flag true/false for the delegated manager.\\n     * */\\n    function _setDelegatedManager(\\n        bytes32 loanId,\\n        address delegator,\\n        address delegated,\\n        bool toggle\\n    ) internal {\\n        delegatedManagers[loanId][delegated] = toggle;\\n\\n        emit DelegatedManagerSet(loanId, delegator, delegated, toggle);\\n    }\\n\\n    /**\\n     * @notice Calculate whether the collateral is satisfied.\\n     *\\n     * @dev Basically check collateral + drawdown >= 98% of required.\\n     *\\n     * @param loanParamsLocal The loan parameters.\\n     * @param loanLocal The loan object.\\n     * @param initialMargin The initial amount of margin.\\n     * @param newCollateral The amount of new collateral.\\n     * @param collateralAmountRequired The amount of required collateral.\\n     * @param newPrincipal The amount to borrow.\\n     *\\n     * @return Whether the collateral is satisfied.\\n     * */\\n    function _isCollateralSatisfied(\\n        LoanParams memory loanParamsLocal,\\n        Loan memory loanLocal,\\n        uint256 initialMargin,\\n        uint256 newCollateral,\\n        uint256 collateralAmountRequired,\\n        uint256 newPrincipal\\n    ) internal view returns (bool) {\\n        /// Allow at most 2% under-collateralized.\\n        collateralAmountRequired = collateralAmountRequired.mul(98 ether).div(100 ether);\\n\\n        if (newCollateral < collateralAmountRequired) {\\n            /// Check that existing collateral is sufficient coverage.\\n            if (loanLocal.collateral != 0) {\\n                uint256 maxDrawdown =\\n                    IPriceFeeds(priceFeeds).getMaxDrawdown(\\n                        loanParamsLocal.loanToken,\\n                        loanParamsLocal.collateralToken,\\n                        loanLocal.principal.sub(newPrincipal), // sub(newPrincipal) to exclude the new borrowed amount from the total principal to calculate maxDrawdown for existing loan\\n                        loanLocal.collateral,\\n                        initialMargin\\n                    );\\n                return newCollateral.add(maxDrawdown) >= collateralAmountRequired;\\n            } else {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n\\n    /**\\n     * @notice Initialize a loan.\\n     *\\n     * @param loanParamsLocal The loan parameters.\\n     * @param loanId The ID of the loan.\\n     * @param initialMargin The amount of margin of the trade.\\n     * @param sentAddresses The addresses to send tokens: lender, borrower,\\n     *   receiver and manager:\\n     *     lender: must match loan if loanId provided.\\n     *     borrower: must match loan if loanId provided.\\n     *     receiver: receiver of funds (address(0) assumes borrower address).\\n     *     manager: delegated manager of loan unless address(0).\\n     * @param newPrincipal New loan size (borrowAmount + any borrowed interest).\\n     * @return The loanId.\\n     * */\\n    function _initializeLoan(\\n        LoanParams memory loanParamsLocal,\\n        bytes32 loanId,\\n        uint256 initialMargin,\\n        MarginTradeStructHelpers.SentAddresses memory sentAddresses,\\n        uint256 newPrincipal\\n    ) internal returns (bytes32) {\\n        require(loanParamsLocal.active, \\\"loanParams disabled\\\");\\n\\n        address lender = sentAddresses.lender;\\n        address borrower = sentAddresses.borrower;\\n        address manager = sentAddresses.manager;\\n\\n        Loan memory loanLocal;\\n\\n        if (loanId == 0) {\\n            borrowerNonce[borrower]++;\\n            loanId = keccak256(\\n                abi.encodePacked(loanParamsLocal.id, lender, borrower, borrowerNonce[borrower])\\n            );\\n            require(loans[loanId].id == 0, \\\"loan exists\\\");\\n\\n            loanLocal = Loan({\\n                id: loanId,\\n                loanParamsId: loanParamsLocal.id,\\n                pendingTradesId: 0,\\n                active: true,\\n                principal: newPrincipal,\\n                collateral: 0, /// calculated later\\n                startTimestamp: block.timestamp,\\n                endTimestamp: 0, /// calculated later\\n                startMargin: initialMargin,\\n                startRate: 0, /// queried later\\n                borrower: borrower,\\n                lender: lender\\n            });\\n\\n            activeLoansSet.addBytes32(loanId);\\n            lenderLoanSets[lender].addBytes32(loanId);\\n            borrowerLoanSets[borrower].addBytes32(loanId);\\n        } else {\\n            loanLocal = loans[loanId];\\n            require(\\n                loanLocal.active && block.timestamp < loanLocal.endTimestamp,\\n                \\\"loan has ended\\\"\\n            );\\n            require(loanLocal.borrower == borrower, \\\"borrower mismatch\\\");\\n            require(loanLocal.lender == lender, \\\"lender mismatch\\\");\\n            require(loanLocal.loanParamsId == loanParamsLocal.id, \\\"loanParams mismatch\\\");\\n\\n            loanLocal.principal = loanLocal.principal.add(newPrincipal);\\n        }\\n\\n        if (manager != address(0)) {\\n            _setDelegatedManager(loanId, borrower, manager, true);\\n        }\\n\\n        loans[loanId] = loanLocal;\\n\\n        return loanId;\\n    }\\n\\n    /**\\n     * @notice Initialize a loan interest.\\n     *\\n     * @dev A Torque loan is an indefinite-term loan.\\n     *\\n     * @param loanParamsLocal The loan parameters.\\n     * @param loanLocal The loan object.\\n     * @param newRate The new interest rate of the loan.\\n     * @param newPrincipal The new principal amount of the loan.\\n     * @param torqueInterest The interest rate of the Torque loan.\\n     *\\n     * @return interestAmountRequired The interest amount required.\\n     * */\\n    function _initializeInterest(\\n        LoanParams memory loanParamsLocal,\\n        Loan storage loanLocal,\\n        uint256 newRate,\\n        uint256 newPrincipal,\\n        uint256 torqueInterest /// ignored for fixed-term loans\\n    ) internal returns (uint256 interestAmountRequired) {\\n        /// Pay outstanding interest to lender.\\n        _payInterest(loanLocal.lender, loanParamsLocal.loanToken);\\n\\n        LoanInterest storage loanInterestLocal = loanInterest[loanLocal.id];\\n        LenderInterest storage lenderInterestLocal =\\n            lenderInterest[loanLocal.lender][loanParamsLocal.loanToken];\\n\\n        uint256 maxLoanTerm = loanParamsLocal.maxLoanTerm;\\n\\n        _settleFeeRewardForInterestExpense(\\n            loanInterestLocal,\\n            loanLocal.id,\\n            loanParamsLocal.loanToken, /// fee token\\n            loanParamsLocal.collateralToken, /// pairToken (used to check if there is any special rebates or not) -- to pay fee reward\\n            loanLocal.borrower,\\n            block.timestamp\\n        );\\n\\n        uint256 previousDepositRemaining;\\n        if (maxLoanTerm == 0 && loanLocal.endTimestamp != 0) {\\n            previousDepositRemaining = loanLocal\\n                .endTimestamp\\n                .sub(block.timestamp) /// block.timestamp < endTimestamp was confirmed earlier.\\n                .mul(loanInterestLocal.owedPerDay)\\n                .div(86400);\\n        }\\n\\n        uint256 owedPerDay = newPrincipal.mul(newRate).div(365 * 10**20);\\n\\n        /// Update stored owedPerDay\\n        loanInterestLocal.owedPerDay = loanInterestLocal.owedPerDay.add(owedPerDay);\\n        lenderInterestLocal.owedPerDay = lenderInterestLocal.owedPerDay.add(owedPerDay);\\n\\n        if (maxLoanTerm == 0) {\\n            /// Indefinite-term (Torque) loan.\\n\\n            /// torqueInterest != 0 was confirmed earlier.\\n            loanLocal.endTimestamp = torqueInterest\\n                .add(previousDepositRemaining)\\n                .mul(86400)\\n                .div(loanInterestLocal.owedPerDay)\\n                .add(block.timestamp);\\n\\n            maxLoanTerm = loanLocal.endTimestamp.sub(block.timestamp);\\n\\n            /// Loan term has to at least be greater than one hour.\\n            require(maxLoanTerm > 3600, \\\"loan too short\\\");\\n\\n            interestAmountRequired = torqueInterest;\\n        } else {\\n            /// Fixed-term loan.\\n\\n            if (loanLocal.endTimestamp == 0) {\\n                loanLocal.endTimestamp = block.timestamp.add(maxLoanTerm);\\n            }\\n\\n            interestAmountRequired = loanLocal\\n                .endTimestamp\\n                .sub(block.timestamp)\\n                .mul(owedPerDay)\\n                .div(86400);\\n        }\\n\\n        loanInterestLocal.depositTotal = loanInterestLocal.depositTotal.add(\\n            interestAmountRequired\\n        );\\n\\n        /// Update remaining lender interest values.\\n        lenderInterestLocal.principalTotal = lenderInterestLocal.principalTotal.add(newPrincipal);\\n        lenderInterestLocal.owedTotal = lenderInterestLocal.owedTotal.add(interestAmountRequired);\\n    }\\n\\n    /**\\n     * @notice Get the required collateral.\\n     *\\n     * @dev Basically collateral = newPrincipal * marginAmount\\n     *\\n     * @param loanToken The loan token instance address.\\n     * @param collateralToken The collateral token instance address.\\n     * @param newPrincipal The updated amount of principal (current debt).\\n     * @param marginAmount The amount of margin of the trade.\\n     * @param isTorqueLoan Whether the loan is a Torque loan.\\n     *\\n     * @return collateralTokenAmount The required collateral.\\n     * */\\n    function _getRequiredCollateral(\\n        address loanToken,\\n        address collateralToken,\\n        uint256 newPrincipal,\\n        uint256 marginAmount,\\n        bool isTorqueLoan\\n    ) internal view returns (uint256 collateralTokenAmount) {\\n        if (loanToken == collateralToken) {\\n            collateralTokenAmount = newPrincipal.mul(marginAmount).div(10**20);\\n        } else {\\n            /// Using the price feed instead of the swap expected return\\n            /// because we need the rate in the inverse direction\\n            /// so the swap is probably farther off than the price feed.\\n            (uint256 sourceToDestRate, uint256 sourceToDestPrecision) =\\n                IPriceFeeds(priceFeeds).queryRate(collateralToken, loanToken);\\n            if (sourceToDestRate != 0) {\\n                collateralTokenAmount = newPrincipal\\n                    .mul(sourceToDestPrecision)\\n                    .div(sourceToDestRate)\\n                    .mul(marginAmount)\\n                    .div(10**20);\\n                /*TODO: review\\n\\t\\t\\t\\tcollateralTokenAmount = newPrincipal.mul(sourceToDestPrecision).mul(marginAmount).div(sourceToDestRate).div(10**20);*/\\n            }\\n        }\\n        // ./tests/loan-token/TradingTestToken.test.js\\n        if (isTorqueLoan && collateralTokenAmount != 0) {\\n            collateralTokenAmount = collateralTokenAmount.mul(10**20).div(marginAmount).add(\\n                collateralTokenAmount\\n            );\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x1c2eb82f702d37c72c7fbc8bd9bf1ded7c880ac643a6b8e0d85b39c0c2b790a9\"},\"contracts/modules/interfaces/ProtocolAffiliatesInterface.sol\":{\"content\":\"/**\\n * Copyright 2020, Denis Savelev. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\ninterface ProtocolAffiliatesInterface {\\n    function setAffiliatesReferrer(address user, address referrer) external;\\n\\n    function setUserNotFirstTradeFlag(address user_) external;\\n\\n    function getUserNotFirstTradeFlag(address user_) external returns (bool);\\n\\n    function payTradingFeeToAffiliatesReferrer(\\n        address affiliate,\\n        address trader,\\n        address token,\\n        uint256 amount\\n    ) external returns (uint256 affiliatesBonusSOVAmount, uint256 affiliatesBonusTokenAmount);\\n}\\n\",\"keccak256\":\"0x42f259156db09a06e3dcdf0ab9c6774712616b35e6baff97999a2a534d1c9c64\"},\"contracts/openzeppelin/Address.sol\":{\"content\":\"pragma solidity >=0.5.0 <0.6.0;\\n\\n/**\\n * @dev Collection of functions related to the address type\\n */\\nlibrary Address {\\n    /**\\n     * @dev Returns true if `account` is a contract.\\n     *\\n     * [IMPORTANT]\\n     * ====\\n     * It is unsafe to assume that an address for which this function returns\\n     * false is an externally-owned account (EOA) and not a contract.\\n     *\\n     * Among others, `isContract` will return false for the following\\n     * types of addresses:\\n     *\\n     *  - an externally-owned account\\n     *  - a contract in construction\\n     *  - an address where a contract will be created\\n     *  - an address where a contract lived, but was destroyed\\n     * ====\\n     */\\n    function isContract(address account) internal view returns (bool) {\\n        // According to EIP-1052, 0x0 is the value returned for not-yet created accounts\\n        // and 0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470 is returned\\n        // for accounts without code, i.e. `keccak256('')`\\n        bytes32 codehash;\\n        bytes32 accountHash = 0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470;\\n        // solhint-disable-next-line no-inline-assembly\\n        assembly {\\n            codehash := extcodehash(account)\\n        }\\n        return (codehash != accountHash && codehash != 0x0);\\n    }\\n\\n    /**\\n     * @dev Converts an `address` into `address payable`. Note that this is\\n     * simply a type cast: the actual underlying value is not changed.\\n     *\\n     * _Available since v2.4.0._\\n     */\\n    function toPayable(address account) internal pure returns (address payable) {\\n        return address(uint160(account));\\n    }\\n\\n    /**\\n     * @dev Replacement for Solidity's `transfer`: sends `amount` wei to\\n     * `recipient`, forwarding all available gas and reverting on errors.\\n     *\\n     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost\\n     * of certain opcodes, possibly making contracts go over the 2300 gas limit\\n     * imposed by `transfer`, making them unable to receive funds via\\n     * `transfer`. {sendValue} removes this limitation.\\n     *\\n     * https://diligence.consensys.net/posts/2019/09/stop-using-soliditys-transfer-now/[Learn more].\\n     *\\n     * IMPORTANT: because control is transferred to `recipient`, care must be\\n     * taken to not create reentrancy vulnerabilities. Consider using\\n     * {ReentrancyGuard} or the\\n     * https://solidity.readthedocs.io/en/v0.5.11/security-considerations.html\\n     *   #use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].\\n     *\\n     * _Available since v2.4.0._\\n     */\\n    function sendValue(address recipient, uint256 amount) internal {\\n        require(address(this).balance >= amount, \\\"Address: insufficient balance\\\");\\n\\n        // solhint-disable-next-line avoid-call-value\\n        (bool success, ) = recipient.call.value(amount)(\\\"\\\");\\n        require(success, \\\"Address: unable to send value, recipient may have reverted\\\");\\n    }\\n}\\n\",\"keccak256\":\"0x23df48a01dbac9b25e86c9131174fb7752bbc7e741e63f1aa982de22e055ad54\"},\"contracts/openzeppelin/Context.sol\":{\"content\":\"pragma solidity >=0.5.0 <0.6.0;\\n\\n/*\\n * @dev Provides information about the current execution context, including the\\n * sender of the transaction and its data. While these are generally available\\n * via msg.sender and msg.data, they should not be accessed in such a direct\\n * manner, since when dealing with GSN meta-transactions the account sending and\\n * paying for execution may not be the actual sender (as far as an application\\n * is concerned).\\n *\\n * This contract is only required for intermediate, library-like contracts.\\n */\\ncontract Context {\\n    // Empty internal constructor, to prevent people from mistakenly deploying\\n    // an instance of this contract, which should be used via inheritance.\\n    constructor() internal {}\\n\\n    // solhint-disable-previous-line no-empty-blocks\\n\\n    function _msgSender() internal view returns (address payable) {\\n        return msg.sender;\\n    }\\n\\n    function _msgData() internal view returns (bytes memory) {\\n        this; // silence state mutability warning without generating bytecode - see https://github.com/ethereum/solidity/issues/2691\\n        return msg.data;\\n    }\\n}\\n\",\"keccak256\":\"0x7860cb1591dbd66bb497c60c46866d9fcdb56c73306ed86b25801000af1c7b2b\"},\"contracts/openzeppelin/Ownable.sol\":{\"content\":\"pragma solidity >=0.5.0 <0.6.0;\\n\\nimport \\\"./Context.sol\\\";\\n\\n/**\\n * @dev Contract module which provides a basic access control mechanism, where\\n * there is an account (an owner) that can be granted exclusive access to\\n * specific functions.\\n *\\n * This module is used through inheritance. It will make available the modifier\\n * `onlyOwner`, which can be applied to your functions to restrict their use to\\n * the owner.\\n */\\ncontract Ownable is Context {\\n    address private _owner;\\n\\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\\n\\n    /**\\n     * @dev Initializes the contract setting the deployer as the initial owner.\\n     */\\n    constructor() internal {\\n        address msgSender = _msgSender();\\n        _owner = msgSender;\\n        emit OwnershipTransferred(address(0), msgSender);\\n    }\\n\\n    /**\\n     * @dev Returns the address of the current owner.\\n     */\\n    function owner() public view returns (address) {\\n        return _owner;\\n    }\\n\\n    /**\\n     * @dev Throws if called by any account other than the owner.\\n     */\\n    modifier onlyOwner() {\\n        require(isOwner(), \\\"unauthorized\\\");\\n        _;\\n    }\\n\\n    /**\\n     * @dev Returns true if the caller is the current owner.\\n     */\\n    function isOwner() public view returns (bool) {\\n        return _msgSender() == _owner;\\n    }\\n\\n    /**\\n     * @dev Transfers ownership of the contract to a new account (`newOwner`).\\n     * Can only be called by the current owner.\\n     */\\n    function transferOwnership(address newOwner) public onlyOwner {\\n        _transferOwnership(newOwner);\\n    }\\n\\n    /**\\n     * @dev Transfers ownership of the contract to a new account (`newOwner`).\\n     */\\n    function _transferOwnership(address newOwner) internal {\\n        require(newOwner != address(0), \\\"Ownable: new owner is the zero address\\\");\\n        emit OwnershipTransferred(_owner, newOwner);\\n        _owner = newOwner;\\n    }\\n}\\n\",\"keccak256\":\"0x94496c375b3e82d87d7f01ce1577f008fab374312cf93012a0eca716e6aadb3a\"},\"contracts/openzeppelin/ReentrancyGuard.sol\":{\"content\":\"pragma solidity >=0.5.0 <0.6.0;\\n\\n/**\\n * @title Helps contracts guard against reentrancy attacks.\\n * @author Remco Bloemen <remco@2\\u03c0.com>, Eenae <alexey@mixbytes.io>\\n * @dev If you mark a function `nonReentrant`, you should also\\n * mark it `external`.\\n */\\ncontract ReentrancyGuard {\\n    /// @dev Constant for unlocked guard state - non-zero to prevent extra gas costs.\\n    /// See: https://github.com/OpenZeppelin/openzeppelin-solidity/issues/1056\\n    uint256 internal constant REENTRANCY_GUARD_FREE = 1;\\n\\n    /// @dev Constant for locked guard state\\n    uint256 internal constant REENTRANCY_GUARD_LOCKED = 2;\\n\\n    /**\\n     * @dev We use a single lock for the whole contract.\\n     */\\n    uint256 internal reentrancyLock = REENTRANCY_GUARD_FREE;\\n\\n    /**\\n     * @dev Prevents a contract from calling itself, directly or indirectly.\\n     * If you mark a function `nonReentrant`, you should also\\n     * mark it `external`. Calling one `nonReentrant` function from\\n     * another is not supported. Instead, you can implement a\\n     * `private` function doing the actual work, and an `external`\\n     * wrapper marked as `nonReentrant`.\\n     */\\n    modifier nonReentrant() {\\n        require(reentrancyLock == REENTRANCY_GUARD_FREE, \\\"nonReentrant\\\");\\n        reentrancyLock = REENTRANCY_GUARD_LOCKED;\\n        _;\\n        reentrancyLock = REENTRANCY_GUARD_FREE;\\n    }\\n}\\n\",\"keccak256\":\"0xd347de96ad57d1e45b07a2efe3050c1bd4b809236bbf354acb593de56d21a5c9\"},\"contracts/openzeppelin/SafeERC20.sol\":{\"content\":\"pragma solidity >=0.5.0 <0.6.0;\\n\\nimport \\\"./SafeMath.sol\\\";\\nimport \\\"./Address.sol\\\";\\nimport \\\"../interfaces/IERC20.sol\\\";\\n\\n/**\\n * @title SafeERC20\\n * @dev Wrappers around ERC20 operations that throw on failure (when the token\\n * contract returns false). Tokens that return no value (and instead revert or\\n * throw on failure) are also supported, non-reverting calls are assumed to be\\n * successful.\\n * To use this library you can add a `using SafeERC20 for ERC20;` statement to your contract,\\n * which allows you to call the safe operations as `token.safeTransfer(...)`, etc.\\n */\\nlibrary SafeERC20 {\\n    using SafeMath for uint256;\\n    using Address for address;\\n\\n    function safeTransfer(\\n        IERC20 token,\\n        address to,\\n        uint256 value\\n    ) internal {\\n        callOptionalReturn(token, abi.encodeWithSelector(token.transfer.selector, to, value));\\n    }\\n\\n    function safeTransferFrom(\\n        IERC20 token,\\n        address from,\\n        address to,\\n        uint256 value\\n    ) internal {\\n        callOptionalReturn(\\n            token,\\n            abi.encodeWithSelector(token.transferFrom.selector, from, to, value)\\n        );\\n    }\\n\\n    function safeApprove(\\n        IERC20 token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        // safeApprove should only be called when setting an initial allowance,\\n        // or when resetting it to zero. To increase and decrease it, use\\n        // 'safeIncreaseAllowance' and 'safeDecreaseAllowance'\\n        // solhint-disable-next-line max-line-length\\n        require(\\n            (value == 0) || (token.allowance(address(this), spender) == 0),\\n            \\\"SafeERC20: approve from non-zero to non-zero allowance\\\"\\n        );\\n        callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, value));\\n    }\\n\\n    function safeIncreaseAllowance(\\n        IERC20 token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        uint256 newAllowance = token.allowance(address(this), spender).add(value);\\n        callOptionalReturn(\\n            token,\\n            abi.encodeWithSelector(token.approve.selector, spender, newAllowance)\\n        );\\n    }\\n\\n    function safeDecreaseAllowance(\\n        IERC20 token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        uint256 newAllowance =\\n            token.allowance(address(this), spender).sub(\\n                value,\\n                \\\"SafeERC20: decreased allowance below zero\\\"\\n            );\\n        callOptionalReturn(\\n            token,\\n            abi.encodeWithSelector(token.approve.selector, spender, newAllowance)\\n        );\\n    }\\n\\n    /**\\n     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement\\n     * on the return value: the return value is optional (but if data is returned, it must not be false).\\n     * @param token The token targeted by the call.\\n     * @param data The call data (encoded using abi.encode or one of its variants).\\n     */\\n    function callOptionalReturn(IERC20 token, bytes memory data) private {\\n        // We need to perform a low level call here, to bypass Solidity's return data size checking mechanism, since\\n        // we're implementing it ourselves.\\n\\n        // A Solidity high level call has three parts:\\n        //  1. The target address is checked to verify it contains contract code\\n        //  2. The call itself is made, and success asserted\\n        //  3. The return value is decoded, which in turn checks the size of the returned data.\\n        // solhint-disable-next-line max-line-length\\n        require(address(token).isContract(), \\\"SafeERC20: call to non-contract\\\");\\n\\n        // solhint-disable-next-line avoid-low-level-calls\\n        (bool success, bytes memory returndata) = address(token).call(data);\\n        require(success, \\\"SafeERC20: low-level call failed\\\");\\n\\n        if (returndata.length > 0) {\\n            // Return data is optional\\n            // solhint-disable-next-line max-line-length\\n            require(abi.decode(returndata, (bool)), \\\"SafeERC20: ERC20 operation did not succeed\\\");\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xe99b4d979cb976a6b70e297600242afe38b8cd8f1b1ba6ee373f39f7abb3ca79\"},\"contracts/openzeppelin/SafeMath.sol\":{\"content\":\"pragma solidity >=0.5.0 <0.6.0;\\n\\n/**\\n * @dev Wrappers over Solidity's arithmetic operations with added overflow\\n * checks.\\n *\\n * Arithmetic operations in Solidity wrap on overflow. This can easily result\\n * in bugs, because programmers usually assume that an overflow raises an\\n * error, which is the standard behavior in high level programming languages.\\n * `SafeMath` restores this intuition by reverting the transaction when an\\n * operation overflows.\\n *\\n * Using this library instead of the unchecked operations eliminates an entire\\n * class of bugs, so it's recommended to use it always.\\n */\\nlibrary SafeMath {\\n    /**\\n     * @dev Returns the addition of two unsigned integers, reverting on\\n     * overflow.\\n     *\\n     * Counterpart to Solidity's `+` operator.\\n     *\\n     * Requirements:\\n     * - Addition cannot overflow.\\n     */\\n    function add(uint256 a, uint256 b) internal pure returns (uint256) {\\n        uint256 c = a + b;\\n        require(c >= a, \\\"SafeMath: addition overflow\\\");\\n\\n        return c;\\n    }\\n\\n    /**\\n     * @dev Returns the subtraction of two unsigned integers, reverting on\\n     * overflow (when the result is negative).\\n     *\\n     * Counterpart to Solidity's `-` operator.\\n     *\\n     * Requirements:\\n     * - Subtraction cannot overflow.\\n     */\\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return sub(a, b, \\\"SafeMath: subtraction overflow\\\");\\n    }\\n\\n    /**\\n     * @dev Returns the subtraction of two unsigned integers, reverting with custom message on\\n     * overflow (when the result is negative).\\n     *\\n     * Counterpart to Solidity's `-` operator.\\n     *\\n     * Requirements:\\n     * - Subtraction cannot overflow.\\n     *\\n     * _Available since v2.4.0._\\n     */\\n    function sub(\\n        uint256 a,\\n        uint256 b,\\n        string memory errorMessage\\n    ) internal pure returns (uint256) {\\n        require(b <= a, errorMessage);\\n        uint256 c = a - b;\\n\\n        return c;\\n    }\\n\\n    /**\\n     * @dev Returns the multiplication of two unsigned integers, reverting on\\n     * overflow.\\n     *\\n     * Counterpart to Solidity's `*` operator.\\n     *\\n     * Requirements:\\n     * - Multiplication cannot overflow.\\n     */\\n    function mul(uint256 a, uint256 b) internal pure returns (uint256) {\\n        // Gas optimization: this is cheaper than requiring 'a' not being zero, but the\\n        // benefit is lost if 'b' is also tested.\\n        // See: https://github.com/OpenZeppelin/openzeppelin-contracts/pull/522\\n        if (a == 0) {\\n            return 0;\\n        }\\n\\n        uint256 c = a * b;\\n        require(c / a == b, \\\"SafeMath: multiplication overflow\\\");\\n\\n        return c;\\n    }\\n\\n    /**\\n     * @dev Returns the integer division of two unsigned integers. Reverts on\\n     * division by zero. The result is rounded towards zero.\\n     *\\n     * Counterpart to Solidity's `/` operator. Note: this function uses a\\n     * `revert` opcode (which leaves remaining gas untouched) while Solidity\\n     * uses an invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     * - The divisor cannot be zero.\\n     */\\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return div(a, b, \\\"SafeMath: division by zero\\\");\\n    }\\n\\n    /**\\n     * @dev Returns the integer division of two unsigned integers. Reverts with custom message on\\n     * division by zero. The result is rounded towards zero.\\n     *\\n     * Counterpart to Solidity's `/` operator. Note: this function uses a\\n     * `revert` opcode (which leaves remaining gas untouched) while Solidity\\n     * uses an invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     * - The divisor cannot be zero.\\n     *\\n     * _Available since v2.4.0._\\n     */\\n    function div(\\n        uint256 a,\\n        uint256 b,\\n        string memory errorMessage\\n    ) internal pure returns (uint256) {\\n        // Solidity only automatically asserts when dividing by 0\\n        require(b != 0, errorMessage);\\n        uint256 c = a / b;\\n        // assert(a == b * c + a % b); // There is no case in which this doesn't hold\\n\\n        return c;\\n    }\\n\\n    /**\\n     * @dev Integer division of two numbers, rounding up and truncating the quotient\\n     */\\n    function divCeil(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return divCeil(a, b, \\\"SafeMath: division by zero\\\");\\n    }\\n\\n    /**\\n     * @dev Integer division of two numbers, rounding up and truncating the quotient\\n     */\\n    function divCeil(\\n        uint256 a,\\n        uint256 b,\\n        string memory errorMessage\\n    ) internal pure returns (uint256) {\\n        // Solidity only automatically asserts when dividing by 0\\n        require(b != 0, errorMessage);\\n\\n        if (a == 0) {\\n            return 0;\\n        }\\n        uint256 c = ((a - 1) / b) + 1;\\n\\n        return c;\\n    }\\n\\n    /**\\n     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),\\n     * Reverts when dividing by zero.\\n     *\\n     * Counterpart to Solidity's `%` operator. This function uses a `revert`\\n     * opcode (which leaves remaining gas untouched) while Solidity uses an\\n     * invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     * - The divisor cannot be zero.\\n     */\\n    function mod(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return mod(a, b, \\\"SafeMath: modulo by zero\\\");\\n    }\\n\\n    /**\\n     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),\\n     * Reverts with custom message when dividing by zero.\\n     *\\n     * Counterpart to Solidity's `%` operator. This function uses a `revert`\\n     * opcode (which leaves remaining gas untouched) while Solidity uses an\\n     * invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     * - The divisor cannot be zero.\\n     *\\n     * _Available since v2.4.0._\\n     */\\n    function mod(\\n        uint256 a,\\n        uint256 b,\\n        string memory errorMessage\\n    ) internal pure returns (uint256) {\\n        require(b != 0, errorMessage);\\n        return a % b;\\n    }\\n\\n    function min256(uint256 _a, uint256 _b) internal pure returns (uint256) {\\n        return _a < _b ? _a : _b;\\n    }\\n}\\n\",\"keccak256\":\"0xbff8d6273e1a6870d1a142c0c23acd63a4dd47760f250390f49ee56333bcb6e8\"},\"contracts/reentrancy/Mutex.sol\":{\"content\":\"pragma solidity ^0.5.17;\\n\\n/*\\n * @title Global Mutex contract\\n *\\n * @notice A mutex contract that allows only one function to be called at a time out\\n * of a large set of functions. *Anyone* in the network can freely use any instance\\n * of this contract to add a universal mutex to any function in any contract.\\n */\\ncontract Mutex {\\n    /*\\n     * We use an uint to store the mutex state.\\n     */\\n    uint256 public value;\\n\\n    /*\\n     * @notice Increment the mutex state and return the new value.\\n     *\\n     * @dev This is the function that will be called by anyone to change the mutex\\n     * state. It is purposely not protected by any access control\\n     */\\n    function incrementAndGetValue() external returns (uint256) {\\n        /*\\n         * increment value using unsafe math. This is safe because we are\\n         * pretty certain no one will ever increment the value 2^256 times\\n         * in a single transaction.\\n         */\\n        return ++value;\\n    }\\n}\\n\",\"keccak256\":\"0xd10b0fd07d5fed1ae1237e7c87e6501970fce2a86e2b8862e502258b0d3aeb2c\"},\"contracts/reentrancy/SharedReentrancyGuard.sol\":{\"content\":\"pragma solidity ^0.5.17;\\n\\nimport \\\"./Mutex.sol\\\";\\n\\n/*\\n * @title Abstract contract for shared reentrancy guards\\n *\\n * @notice Exposes a single modifier `globallyNonReentrant` that can be used to ensure\\n * that there's no reentrancy between *any* functions marked with the modifier.\\n *\\n * @dev The Mutex contract address is hardcoded because the address is deployed using a\\n * special deployment method (similar to ERC1820Registry). This contract therefore has no\\n * state and is thus safe to add to the inheritance chain of upgradeable contracts.\\n */\\ncontract SharedReentrancyGuard {\\n    /*\\n     * This is the address of the mutex contract that will be used as the\\n     * reentrancy guard.\\n     *\\n     * The address is hardcoded to avoid changing the memory layout of\\n     * derived contracts (possibly upgradable). Hardcoding the address is possible,\\n     * because the Mutex contract is always deployed to the same address, with the\\n     * same method used in the deployment of ERC1820Registry.\\n     */\\n    Mutex private constant MUTEX = Mutex(0xba10edD6ABC7696Eae685839217BdcC42139612b);\\n\\n    /*\\n     * This is the modifier that will be used to protect functions from\\n     * reentrancy. It will call the mutex contract to increment the mutex\\n     * state and then revert if the mutex state was changed by another\\n     * nested call.\\n     */\\n    modifier globallyNonReentrant() {\\n        uint256 previous = MUTEX.incrementAndGetValue();\\n\\n        _;\\n\\n        /*\\n         * If the mutex state was changed by a nested function call, then\\n         * the value of the state variable will be different from the previous value.\\n         */\\n        require(previous == MUTEX.value(), \\\"reentrancy violation\\\");\\n    }\\n}\\n\",\"keccak256\":\"0x2d0e61b104b91c1764f20fbeb381ba0f8a8889934ba7f6e8a167ed542ec2c124\"},\"contracts/swaps/SwapsUser.sol\":{\"content\":\"/**\\n * Copyright 2017-2021, bZeroX, LLC <https://bzx.network/>. All Rights Reserved.\\n * Licensed under the Apache License, Version 2.0.\\n */\\n\\npragma solidity 0.5.17;\\n\\nimport \\\"../core/State.sol\\\";\\nimport \\\"../feeds/IPriceFeeds.sol\\\";\\nimport \\\"../events/SwapsEvents.sol\\\";\\nimport \\\"../mixins/FeesHelper.sol\\\";\\nimport \\\"./connectors/SwapsImplSovrynSwapLib.sol\\\";\\n\\n/**\\n * @title Perform token swaps for loans and trades.\\n * */\\ncontract SwapsUser is State, SwapsEvents, FeesHelper {\\n    /**\\n     * @notice Internal loan swap.\\n     *\\n     * @param loanId The ID of the loan.\\n     * @param sourceToken The address of the source tokens.\\n     * @param destToken The address of destination tokens.\\n     * @param user The user address.\\n     * @param minSourceTokenAmount The minimum amount of source tokens to swap.\\n     * @param maxSourceTokenAmount The maximum amount of source tokens to swap.\\n     * @param requiredDestTokenAmount The required amount of destination tokens.\\n     * @param bypassFee To bypass or not the fee.\\n     * @param loanDataBytes The payload for the call. These loan DataBytes are\\n     *   additional loan data (not in use for token swaps).\\n     *\\n     * @return destTokenAmountReceived\\n     * @return sourceTokenAmountUsed\\n     * @return sourceToDestSwapRate\\n     * */\\n    function _loanSwap(\\n        bytes32 loanId,\\n        address sourceToken,\\n        address destToken,\\n        address user,\\n        uint256 minSourceTokenAmount,\\n        uint256 maxSourceTokenAmount,\\n        uint256 requiredDestTokenAmount,\\n        bool bypassFee,\\n        bytes memory loanDataBytes\\n    )\\n        internal\\n        returns (\\n            uint256 destTokenAmountReceived,\\n            uint256 sourceTokenAmountUsed,\\n            uint256 sourceToDestSwapRate\\n        )\\n    {\\n        (destTokenAmountReceived, sourceTokenAmountUsed) = _swapsCall(\\n            [\\n                sourceToken,\\n                destToken,\\n                address(this), // receiver\\n                address(this), // returnToSender\\n                user\\n            ],\\n            [minSourceTokenAmount, maxSourceTokenAmount, requiredDestTokenAmount],\\n            loanId,\\n            bypassFee,\\n            loanDataBytes,\\n            false // swap external flag, set to false so that it will use the tradingFeePercent\\n        );\\n\\n        /// Will revert if swap size too large.\\n        _checkSwapSize(sourceToken, sourceTokenAmountUsed);\\n\\n        /// Will revert if disagreement found.\\n        sourceToDestSwapRate = IPriceFeeds(priceFeeds).checkPriceDisagreement(\\n            sourceToken,\\n            destToken,\\n            sourceTokenAmountUsed,\\n            destTokenAmountReceived,\\n            maxDisagreement\\n        );\\n\\n        emit LoanSwap(\\n            loanId,\\n            sourceToken,\\n            destToken,\\n            user,\\n            sourceTokenAmountUsed,\\n            destTokenAmountReceived\\n        );\\n    }\\n\\n    /**\\n     * @notice Calculate amount of source and destination tokens.\\n     *\\n     * @dev Wrapper for _swapsCall_internal function.\\n     *\\n     * @param addrs The array of addresses.\\n     * @param vals The array of values.\\n     * @param loanId The Id of the associated loan.\\n     * @param miscBool True/false to bypassFee.\\n     * @param loanDataBytes Additional loan data (not in use yet).\\n     *\\n     * @return destTokenAmountReceived The amount of destination tokens received.\\n     * @return sourceTokenAmountUsed The amount of source tokens used.\\n     * */\\n    function _swapsCall(\\n        address[5] memory addrs,\\n        uint256[3] memory vals,\\n        bytes32 loanId,\\n        bool miscBool, /// bypassFee\\n        bytes memory loanDataBytes,\\n        bool isSwapExternal\\n    ) internal returns (uint256, uint256) {\\n        /// addrs[0]: sourceToken\\n        /// addrs[1]: destToken\\n        /// addrs[2]: receiver\\n        /// addrs[3]: returnToSender\\n        /// addrs[4]: user\\n        /// vals[0]:  minSourceTokenAmount\\n        /// vals[1]:  maxSourceTokenAmount\\n        /// vals[2]:  requiredDestTokenAmount\\n\\n        require(vals[0] != 0 || vals[1] != 0, \\\"min or max source token amount needs to be set\\\");\\n\\n        if (vals[1] == 0) {\\n            vals[1] = vals[0];\\n        }\\n        require(vals[0] <= vals[1], \\\"sourceAmount larger than max\\\");\\n\\n        uint256 destTokenAmountReceived;\\n        uint256 sourceTokenAmountUsed;\\n\\n        uint256 tradingFee;\\n        if (!miscBool) {\\n            /// bypassFee\\n            if (vals[2] == 0) {\\n                /// condition: vals[0] will always be used as sourceAmount\\n\\n                if (isSwapExternal) {\\n                    tradingFee = _getSwapExternalFee(vals[0]);\\n                } else {\\n                    tradingFee = _getTradingFee(vals[0]);\\n                }\\n\\n                if (tradingFee != 0) {\\n                    _payTradingFee(\\n                        addrs[4], /// user\\n                        loanId,\\n                        addrs[0], /// sourceToken (feeToken)\\n                        addrs[1], /// pairToken (used to check if there is any special rebates or not) -- to pay fee reward\\n                        tradingFee\\n                    );\\n\\n                    vals[0] = vals[0].sub(tradingFee);\\n                }\\n            } else {\\n                /// Condition: unknown sourceAmount will be used.\\n\\n                if (isSwapExternal) {\\n                    tradingFee = _getSwapExternalFee(vals[2]);\\n                } else {\\n                    tradingFee = _getTradingFee(vals[2]);\\n                }\\n\\n                if (tradingFee != 0) {\\n                    vals[2] = vals[2].add(tradingFee);\\n                }\\n            }\\n        }\\n\\n        require(loanDataBytes.length == 0, \\\"invalid state\\\");\\n\\n        (destTokenAmountReceived, sourceTokenAmountUsed) = _swapsCall_internal(addrs, vals);\\n\\n        if (vals[2] == 0) {\\n            /// There's no minimum destTokenAmount, but all of vals[0]\\n            /// (minSourceTokenAmount) must be spent.\\n            require(sourceTokenAmountUsed == vals[0], \\\"swap too large to fill\\\");\\n\\n            if (tradingFee != 0) {\\n                sourceTokenAmountUsed = sourceTokenAmountUsed.add(tradingFee);\\n            }\\n        } else {\\n            /// There's a minimum destTokenAmount required, but\\n            /// sourceTokenAmountUsed won't be greater\\n            /// than vals[1] (maxSourceTokenAmount)\\n            require(sourceTokenAmountUsed <= vals[1], \\\"swap fill too large\\\");\\n            require(destTokenAmountReceived >= vals[2], \\\"insufficient swap liquidity\\\");\\n\\n            if (tradingFee != 0) {\\n                _payTradingFee(\\n                    addrs[4], /// user\\n                    loanId, /// loanId,\\n                    addrs[1], /// destToken (feeToken)\\n                    addrs[0], /// pairToken (used to check if there is any special rebates or not) -- to pay fee reward\\n                    tradingFee\\n                );\\n\\n                destTokenAmountReceived = destTokenAmountReceived.sub(tradingFee);\\n            }\\n        }\\n\\n        return (destTokenAmountReceived, sourceTokenAmountUsed);\\n    }\\n\\n    /**\\n     * @notice Calculate amount of source and destination tokens.\\n     *\\n     * @dev Calls swapsImpl::internalSwap\\n     *\\n     * @param addrs The array of addresses.\\n     * @param vals The array of values.\\n     *\\n     * @return destTokenAmountReceived The amount of destination tokens received.\\n     * @return sourceTokenAmountUsed The amount of source tokens used.\\n     * */\\n    function _swapsCall_internal(address[5] memory addrs, uint256[3] memory vals)\\n        internal\\n        returns (uint256 destTokenAmountReceived, uint256 sourceTokenAmountUsed)\\n    {\\n        SwapsImplSovrynSwapLib.SwapParams memory swapParams;\\n\\n        swapParams.sourceTokenAddress = addrs[0];\\n        swapParams.destTokenAddress = addrs[1];\\n        swapParams.receiverAddress = addrs[2];\\n        swapParams.returnToSenderAddress = addrs[3];\\n        swapParams.minSourceTokenAmount = vals[0];\\n        swapParams.maxSourceTokenAmount = vals[1];\\n        swapParams.requiredDestTokenAmount = vals[2];\\n\\n        (destTokenAmountReceived, sourceTokenAmountUsed) = SwapsImplSovrynSwapLib.swap(swapParams);\\n    }\\n\\n    /**\\n     * @notice Calculate expected amount of destination tokens.\\n     *\\n     * @dev Calls swapsImpl::internalExpectedReturn\\n     *\\n     * @param sourceToken The address of the source tokens.\\n     * @param destToken The address of the destination tokens.\\n     * @param sourceTokenAmount The amount of the source tokens.\\n     *\\n     * @param destTokenAmount The amount of destination tokens.\\n     * */\\n    function _swapsExpectedReturn(\\n        address sourceToken,\\n        address destToken,\\n        uint256 sourceTokenAmount\\n    ) internal view returns (uint256 destTokenAmount) {\\n        destTokenAmount = SwapsImplSovrynSwapLib.getExpectedReturn(\\n            sourceToken,\\n            destToken,\\n            sourceTokenAmount\\n        );\\n    }\\n\\n    /**\\n     * @notice Verify that the amount of tokens are under the swap limit.\\n     *\\n     * @dev Calls priceFeeds::amountInEth\\n     *\\n     * @param tokenAddress The address of the token to calculate price.\\n     * @param amount The amount of tokens to calculate price.\\n     * */\\n    function _checkSwapSize(address tokenAddress, uint256 amount) internal view {\\n        uint256 _maxSwapSize = maxSwapSize;\\n        if (_maxSwapSize != 0) {\\n            uint256 amountInEth;\\n            if (tokenAddress == address(wrbtcToken)) {\\n                amountInEth = amount;\\n            } else {\\n                amountInEth = IPriceFeeds(priceFeeds).amountInEth(tokenAddress, amount);\\n            }\\n            require(amountInEth <= _maxSwapSize, \\\"swap too large\\\");\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x7dfc45e91455458caf886b49c96ad426de06cddffa442c16628eba4974f3d323\"},\"contracts/swaps/connectors/SwapsImplSovrynSwapLib.sol\":{\"content\":\"pragma solidity 0.5.17;\\npragma experimental ABIEncoderV2;\\n\\nimport \\\"../../feeds/IPriceFeeds.sol\\\";\\nimport \\\"../../openzeppelin/SafeERC20.sol\\\";\\nimport \\\"./interfaces/ISovrynSwapNetwork.sol\\\";\\nimport \\\"./interfaces/IContractRegistry.sol\\\";\\nimport \\\"../../interfaces/ISovryn.sol\\\";\\n\\n/**\\n * @title Swaps Implementation Sovryn contract.\\n *\\n * @notice This contract code comes from bZx. bZx is a protocol for tokenized\\n * margin trading and lending https://bzx.network similar to the dYdX protocol.\\n *\\n * This contract contains the implementation of swap process and rate\\n * calculations for Sovryn network.\\n * */\\nlibrary SwapsImplSovrynSwapLib {\\n    using SafeMath for uint256;\\n    using SafeERC20 for IERC20;\\n\\n    struct SwapParams {\\n        address sourceTokenAddress;\\n        address destTokenAddress;\\n        address receiverAddress;\\n        address returnToSenderAddress;\\n        uint256 minSourceTokenAmount;\\n        uint256 maxSourceTokenAmount;\\n        uint256 requiredDestTokenAmount;\\n    }\\n\\n    /// bytes32 contractName = hex\\\"42616e636f724e6574776f726b\\\"; /// \\\"SovrynSwapNetwork\\\"\\n\\n    /**\\n     * Get the hex name of a contract.\\n     * @param source The name of the contract.\\n     * */\\n    function getContractHexName(string memory source) public pure returns (bytes32 result) {\\n        assembly {\\n            result := mload(add(source, 32))\\n        }\\n    }\\n\\n    /**\\n     * Look up the Sovryn swap network contract registered at the given address.\\n     * @param sovrynSwapRegistryAddress The address of the registry.\\n     * */\\n    function getSovrynSwapNetworkContract(address sovrynSwapRegistryAddress)\\n        public\\n        view\\n        returns (ISovrynSwapNetwork)\\n    {\\n        /// State variable sovrynSwapContractRegistryAddress is part of\\n        /// State.sol and set in ProtocolSettings.sol and this function\\n        /// needs to work without delegate call as well -> therefore pass it.\\n        IContractRegistry contractRegistry = IContractRegistry(sovrynSwapRegistryAddress);\\n        return\\n            ISovrynSwapNetwork(\\n                contractRegistry.addressOf(getContractHexName(\\\"SovrynSwapNetwork\\\"))\\n            );\\n    }\\n\\n    /**\\n     * Swap the source token for the destination token on the oracle based AMM.\\n     * On loan opening: minSourceTokenAmount = maxSourceTokenAmount and requiredDestTokenAmount = 0\\n     *      -> swap the minSourceTokenAmount\\n     * On loan rollover: (swap interest) minSourceTokenAmount = 0, maxSourceTokenAmount = complete collateral and requiredDestTokenAmount > 0\\n     *      -> amount of required source tokens to swap is estimated (want to fill requiredDestTokenAmount, not more). maxSourceTokenAMount is not exceeded.\\n     * On loan closure: minSourceTokenAmount <= maxSourceTokenAmount and requiredDestTokenAmount >= 0\\n     *      -> same as on rollover. minimum amount is not considered at all.\\n     *\\n     * @param params SwapParams struct\\n     * sourceTokenAddress The address of the source tokens.\\n     * destTokenAddress The address of the destination tokens.\\n     * receiverAddress The address who will received the swap token results\\n     * returnToSenderAddress The address to return unspent tokens to (when called by the protocol, it's always the protocol contract).\\n     * minSourceTokenAmount The minimum amount of source tokens to swapped (only considered if requiredDestTokens == 0).\\n     * maxSourceTokenAmount The maximum amount of source tokens to swapped.\\n     * requiredDestTokenAmount The required amount of destination tokens.\\n     * */\\n    function swap(SwapParams memory params)\\n        public\\n        returns (uint256 destTokenAmountReceived, uint256 sourceTokenAmountUsed)\\n    {\\n        require(params.sourceTokenAddress != params.destTokenAddress, \\\"source == dest\\\");\\n\\n        ISovryn iSovryn = ISovryn(address(this));\\n        require(\\n            iSovryn.supportedTokens(params.sourceTokenAddress) &&\\n                iSovryn.supportedTokens(params.destTokenAddress),\\n            \\\"invalid tokens\\\"\\n        );\\n\\n        ISovrynSwapNetwork sovrynSwapNetwork =\\n            getSovrynSwapNetworkContract(iSovryn.sovrynSwapContractRegistryAddress());\\n\\n        IERC20[] memory path =\\n            _getConversionPath(\\n                params.sourceTokenAddress,\\n                params.destTokenAddress,\\n                sovrynSwapNetwork\\n            );\\n\\n        uint256 minReturn = 1;\\n        sourceTokenAmountUsed = params.minSourceTokenAmount;\\n\\n        /// If the required amount of destination tokens is passed, we need to\\n        /// calculate the estimated amount of source tokens regardless of the\\n        /// minimum source token amount (name is misleading).\\n        if (params.requiredDestTokenAmount > 0) {\\n            sourceTokenAmountUsed = _estimateSourceTokenAmount(\\n                params.sourceTokenAddress,\\n                params.destTokenAddress,\\n                params.requiredDestTokenAmount,\\n                params.maxSourceTokenAmount\\n            );\\n            /// sovrynSwapNetwork.rateByPath does not return a rate, but instead the amount of destination tokens returned.\\n            require(\\n                sovrynSwapNetwork.rateByPath(path, sourceTokenAmountUsed) >=\\n                    params.requiredDestTokenAmount,\\n                \\\"insufficient source tokens provided.\\\"\\n            );\\n            minReturn = params.requiredDestTokenAmount;\\n        }\\n\\n        require(sourceTokenAmountUsed > 0, \\\"cannot swap 0 tokens\\\");\\n\\n        _allowTransfer(\\n            sourceTokenAmountUsed,\\n            params.sourceTokenAddress,\\n            address(sovrynSwapNetwork)\\n        );\\n\\n        /// @dev Note: the kyber connector uses .call() to interact with kyber\\n        /// to avoid bubbling up. here we allow bubbling up.\\n        destTokenAmountReceived = sovrynSwapNetwork.convertByPath(\\n            path,\\n            sourceTokenAmountUsed,\\n            minReturn,\\n            params.receiverAddress,\\n            address(0),\\n            0\\n        );\\n\\n        /// If the sender is not the protocol (calling with delegatecall),\\n        /// return the remainder to the specified address.\\n        /// @dev Note: for the case that the swap is used without the\\n        /// protocol. Not sure if it should, though. needs to be discussed.\\n        if (params.returnToSenderAddress != address(this)) {\\n            if (sourceTokenAmountUsed < params.maxSourceTokenAmount) {\\n                /// Send unused source token back.\\n                IERC20(params.sourceTokenAddress).safeTransfer(\\n                    params.returnToSenderAddress,\\n                    params.maxSourceTokenAmount - sourceTokenAmountUsed\\n                );\\n            }\\n        }\\n    }\\n\\n    /**\\n     * @notice Check whether the existing allowance suffices to transfer\\n     *   the needed amount of tokens.\\n     *   If not, allows the transfer of an arbitrary amount of tokens.\\n     *\\n     * @param tokenAmount The amount to transfer.\\n     * @param tokenAddress The address of the token to transfer.\\n     * @param sovrynSwapNetwork The address of the sovrynSwap network contract.\\n     * */\\n    function _allowTransfer(\\n        uint256 tokenAmount,\\n        address tokenAddress,\\n        address sovrynSwapNetwork\\n    ) internal {\\n        uint256 tempAllowance = IERC20(tokenAddress).allowance(address(this), sovrynSwapNetwork);\\n        if (tempAllowance < tokenAmount) {\\n            IERC20(tokenAddress).safeApprove(sovrynSwapNetwork, uint256(-1));\\n        }\\n    }\\n\\n    /**\\n     * @notice Calculate the number of source tokens to provide in order to\\n     *   obtain the required destination amount.\\n     *\\n     * @param sourceTokenAddress The address of the source token address.\\n     * @param destTokenAddress The address of the destination token address.\\n     * @param requiredDestTokenAmount The number of destination tokens needed.\\n     * @param maxSourceTokenAmount The maximum number of source tokens to spend.\\n     *\\n     * @return The estimated amount of source tokens needed.\\n     *   Minimum: minSourceTokenAmount, maximum: maxSourceTokenAmount\\n     * */\\n    function _estimateSourceTokenAmount(\\n        address sourceTokenAddress,\\n        address destTokenAddress,\\n        uint256 requiredDestTokenAmount,\\n        uint256 maxSourceTokenAmount\\n    ) internal view returns (uint256 estimatedSourceAmount) {\\n        ISovryn iSovryn = ISovryn(address(this));\\n        uint256 sourceToDestPrecision =\\n            IPriceFeeds(iSovryn.priceFeeds()).queryPrecision(sourceTokenAddress, destTokenAddress);\\n        if (sourceToDestPrecision == 0) return maxSourceTokenAmount;\\n\\n        /// Compute the expected rate for the maxSourceTokenAmount -> if spending less, we can't get a worse rate.\\n        uint256 expectedRate =\\n            getExpectedRate(sourceTokenAddress, destTokenAddress, maxSourceTokenAmount);\\n\\n        /// Compute the source tokens needed to get the required amount with the worst case rate.\\n        estimatedSourceAmount = requiredDestTokenAmount.mul(sourceToDestPrecision).div(\\n            expectedRate\\n        );\\n\\n        /// If the actual rate is exactly the same as the worst case rate, we get rounding issues. So, add a small buffer.\\n        /// buffer = min(estimatedSourceAmount/1000 , sourceBuffer) with sourceBuffer = 10000\\n        uint256 buffer = estimatedSourceAmount.div(1000);\\n        if (buffer > iSovryn.sourceBuffer()) buffer = iSovryn.sourceBuffer();\\n        estimatedSourceAmount = estimatedSourceAmount.add(buffer);\\n\\n        /// Never spend more than the maximum.\\n        if (estimatedSourceAmount == 0 || estimatedSourceAmount > maxSourceTokenAmount)\\n            return maxSourceTokenAmount;\\n    }\\n\\n    /**\\n     * @notice Get the expected rate for 1 source token when exchanging the\\n     *   given amount of source tokens.\\n     *\\n     * @param sourceTokenAddress The address of the source token contract.\\n     * @param destTokenAddress The address of the destination token contract.\\n     * @param sourceTokenAmount The amount of source tokens to get the rate for.\\n     * */\\n    function getExpectedRate(\\n        address sourceTokenAddress,\\n        address destTokenAddress,\\n        uint256 sourceTokenAmount\\n    ) public view returns (uint256) {\\n        ISovrynSwapNetwork sovrynSwapNetwork =\\n            getSovrynSwapNetworkContract(\\n                ISovryn(address(this)).sovrynSwapContractRegistryAddress()\\n            );\\n\\n        IERC20[] memory path =\\n            _getConversionPath(sourceTokenAddress, destTokenAddress, sovrynSwapNetwork);\\n\\n        /// Is returning the total amount of destination tokens.\\n        uint256 expectedReturn = sovrynSwapNetwork.rateByPath(path, sourceTokenAmount);\\n\\n        /// Return the rate for 1 token with 18 decimals.\\n        return expectedReturn.mul(10**18).div(sourceTokenAmount);\\n    }\\n\\n    /**\\n     * @notice Get the expected return amount when exchanging the given\\n     *   amount of source tokens.\\n     *\\n     * @notice Right now, this function is being called directly by _swapsExpectedReturn from the protocol\\n     * So, this function is not using _getConversionPath function since it will try to read the defaultPath storage which is stored in the protocol's slot, and it will cause an issue for direct call.\\n     * Instead, this function is accepting additional parameters called defaultPath which value can be declared by the caller (protocol in this case).\\n     *\\n     * @param sourceTokenAddress The address of the source token contract.\\n     * @param destTokenAddress The address of the destination token contract.\\n     * @param sourceTokenAmount The amount of source tokens to get the return for.\\n     * */\\n    function getExpectedReturn(\\n        address sourceTokenAddress,\\n        address destTokenAddress,\\n        uint256 sourceTokenAmount\\n    ) public view returns (uint256 expectedReturn) {\\n        ISovrynSwapNetwork sovrynSwapNetwork =\\n            getSovrynSwapNetworkContract(\\n                ISovryn(address(this)).sovrynSwapContractRegistryAddress()\\n            );\\n\\n        IERC20[] memory path =\\n            _getConversionPath(sourceTokenAddress, destTokenAddress, sovrynSwapNetwork);\\n\\n        /// Is returning the total amount of destination tokens.\\n        expectedReturn = sovrynSwapNetwork.rateByPath(path, sourceTokenAmount);\\n    }\\n\\n    function _getConversionPath(\\n        address sourceTokenAddress,\\n        address destTokenAddress,\\n        ISovrynSwapNetwork sovrynSwapNetwork\\n    ) private view returns (IERC20[] memory path) {\\n        IERC20[] memory _defaultPathConversion =\\n            ISovryn(address(this)).getDefaultPathConversion(sourceTokenAddress, destTokenAddress);\\n\\n        /// will use the defaultPath if it's set, otherwise query from the SovrynSwapNetwork.\\n        path = _defaultPathConversion.length >= 3\\n            ? _defaultPathConversion\\n            : sovrynSwapNetwork.conversionPath(\\n                IERC20(sourceTokenAddress),\\n                IERC20(destTokenAddress)\\n            );\\n    }\\n}\\n\",\"keccak256\":\"0x058b8d733422a2421f17d1b159aed69f151ea8d5f48ee507bac5b4e86add8b0c\"},\"contracts/swaps/connectors/interfaces/IContractRegistry.sol\":{\"content\":\"pragma solidity 0.5.17;\\n\\ncontract IContractRegistry {\\n    function addressOf(bytes32 contractName) public view returns (address);\\n}\\n\",\"keccak256\":\"0x793c4eefa2ee04cbf0a1a9da28676ac310ed7bf60a27ec7d86de7d7236ccf45b\"},\"contracts/swaps/connectors/interfaces/ISovrynSwapNetwork.sol\":{\"content\":\"pragma solidity >=0.5.8 <=0.5.17;\\n\\nimport \\\"../../../interfaces/IERC20.sol\\\";\\n\\ncontract ISovrynSwapNetwork {\\n    function convertByPath(\\n        IERC20[] calldata _path,\\n        uint256 _amount,\\n        uint256 _minReturn,\\n        address _beneficiary,\\n        address _affiliateAccount,\\n        uint256 _affiliateFee\\n    ) external payable returns (uint256);\\n\\n    function rateByPath(IERC20[] calldata _path, uint256 _amount) external view returns (uint256);\\n\\n    function conversionPath(IERC20 _sourceToken, IERC20 _targetToken)\\n        external\\n        view\\n        returns (IERC20[] memory);\\n}\\n\",\"keccak256\":\"0xcd28e146b77183bff18f78b511912f7ebe60d437430fdaa72ed145fdda61a5ad\"}},\"version\":1}",
  "bytecode": "0x60806040526001600055678ac7230489e80000601555670214e8348c4f000060185567013fbe85edc90000601b55674563918244f40000602055674563918244f40000602155674563918244f400006027556127106028556802b5e3af16b1880000602955650f478e084000602b5567016345785d8a0000602c556802b5e3af16b1880000602f5560036035556801158e460913d00000603955348015620000a657600080fd5b506000620000bc6001600160e01b036200011016565b600180546001600160a01b0319166001600160a01b038316908117909155604051919250906000907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908290a35062000114565b3390565b61512680620001246000396000f3fe6080604052600436106103815760003560e01c80638f32d59b116101d1578063cd5d808d11610102578063e8f62764116100a0578063f589a3e71161006f578063f589a3e714610a05578063f6ddc8b314610a1a578063f706b1f214610a2f578063f851a44014610a4457610381565b8063e8f62764146109a6578063edab119f146109bb578063f0e085f5146109d0578063f2fde38b146109e557610381565b8063d485045e116100dc578063d485045e14610925578063d67f707714610945578063d84ca25414610965578063e762319f1461098657610381565b8063cd5d808d146108db578063d288208c146108fb578063d473c2da1461091057610381565b8063b7e152411161016f578063bdee453c11610149578063bdee453c1461082f578063c4a908151461084f578063c4d66de814610887578063cb6eacd1146108a757610381565b8063b7e15241146107e5578063b9cffa3e14610805578063ba4861e91461081a57610381565b8063acc04348116101ab578063acc0434814610779578063ae0a85301461078e578063afe84009146107a3578063b30643d9146107c557610381565b80638f32d59b1461072f57806392d894f814610744578063959083d31461076457610381565b80634203e395116102b65780636e663730116102545780637a8faeb8116102235780637a8faeb8146106d05780638456cb59146106e55780638da5cb5b146106fa5780638dc48ba51461070f57610381565b80636e663730146106715780637420ca3e14610691578063742e6798146106a657806378d849ed146106bb57610381565b8063569fc1fb11610290578063569fc1fb146105dc578063574442cc1461060b57806362fff3f61461062057806368c4ac261461065157610381565b80634203e395146105925780634699f846146105b25780634f28cac2146105c757610381565b80632a324027116103235780633432423c116102fd5780633432423c146105125780633452d2d4146105325780633fca506e146105525780634115a2b61461057257610381565b80632a324027146104c65780632f470764146104db57806333d8991f146104f057610381565b80631b7bde741161035f5780631b7bde741461042c578063218b39c61461045957806324cc57491461047957806325decac0146104a657610381565b8063065d810f146103af5780630676c1b7146103ea57806317548b791461040c575b34801561038d57600080fd5b5060405162461bcd60e51b81526004016103a690614eaa565b60405180910390fd5b3480156103bb57600080fd5b506103cf6103ca366004613f1e565b610a59565b6040516103e196959493929190614f9d565b60405180910390f35b3480156103f657600080fd5b506103ff610a99565b6040516103e191906149d4565b34801561041857600080fd5b506103ff6104273660046140b1565b610aa8565b34801561043857600080fd5b5061044c610447366004613de8565b610ac3565b6040516103e19190614f58565b34801561046557600080fd5b506103ff610474366004613dca565b610ae0565b34801561048557600080fd5b50610499610494366004613dca565b610afb565b6040516103e19190614bf7565b3480156104b257600080fd5b5061044c6104c1366004613e22565b610b10565b3480156104d257600080fd5b5061044c610b6b565b3480156104e757600080fd5b5061044c610b71565b3480156104fc57600080fd5b5061051061050b366004613fa9565b610b77565b005b34801561051e57600080fd5b506103cf61052d366004613f1e565b610be4565b34801561053e57600080fd5b5061044c61054d366004613dca565b610c24565b34801561055e57600080fd5b5061044c61056d366004613dca565b610c36565b34801561057e57600080fd5b5061049961058d366004613f8a565b610c48565b34801561059e57600080fd5b5061044c6105ad366004613dca565b610c68565b3480156105be57600080fd5b5061044c610c7a565b3480156105d357600080fd5b5061044c610c80565b3480156105e857600080fd5b506105fc6105f7366004613f6c565b610c86565b6040516103e193929190614f74565b34801561061757600080fd5b5061044c610ca7565b34801561062c57600080fd5b5061064061063b366004613de8565b610cad565b6040516103e1959493929190614f82565b34801561065d57600080fd5b5061049961066c366004613dca565b610ce7565b34801561067d57600080fd5b506103ff61068c366004613dca565b610cfc565b34801561069d57600080fd5b506103ff610d17565b3480156106b257600080fd5b5061044c610d26565b3480156106c757600080fd5b506103ff610d2c565b3480156106dc57600080fd5b5061044c610d3b565b3480156106f157600080fd5b50610499610d41565b34801561070657600080fd5b506103ff610d4a565b34801561071b57600080fd5b506103ff61072a366004613dca565b610d59565b34801561073b57600080fd5b50610499610d74565b34801561075057600080fd5b5061044c61075f366004613dca565b610d9a565b34801561077057600080fd5b5061044c610dac565b34801561078557600080fd5b5061044c610db2565b34801561079a57600080fd5b5061044c610db8565b3480156107af57600080fd5b506107b8610dbe565b6040516103e19190614cfb565b3480156107d157600080fd5b5061044c6107e0366004613dca565b610dcd565b3480156107f157600080fd5b5061044c610800366004613dca565b610ddf565b34801561081157600080fd5b506103ff610df1565b34801561082657600080fd5b506103ff610e00565b34801561083b57600080fd5b5061044c61084a366004613dca565b610e0f565b34801561085b57600080fd5b5061086f61086a366004613f6c565b610e21565b6040516103e19c9b9a99989796959493929190614c48565b34801561089357600080fd5b506105106108a2366004613dca565b610e93565b3480156108b357600080fd5b506108c76108c2366004613f6c565b610f96565b6040516103e1989796959493929190614c05565b3480156108e757600080fd5b5061044c6108f6366004613de8565b610fe8565b34801561090757600080fd5b506103ff611005565b34801561091c57600080fd5b5061044c611014565b34801561093157600080fd5b5061044c610940366004613dca565b61101a565b34801561095157600080fd5b5061044c610960366004613e97565b61102c565b610978610973366004613ff6565b6110fa565b6040516103e1929190614f66565b34801561099257600080fd5b5061044c6109a1366004613e22565b6112fa565b3480156109b257600080fd5b506103ff61146e565b3480156109c757600080fd5b5061044c61147d565b3480156109dc57600080fd5b5061044c611483565b3480156109f157600080fd5b50610510610a00366004613dca565b611489565b348015610a1157600080fd5b5061044c6114b9565b348015610a2657600080fd5b5061044c6114bf565b348015610a3b57600080fd5b506103ff6114c5565b348015610a5057600080fd5b506103ff6114d4565b6009602090815260009283526040808420909152908252902080546001820154600283015460038401546004850154600590950154939492939192909186565b6031546001600160a01b031681565b6005602052600090815260409020546001600160a01b031681565b603b60209081526000928352604080842090915290825290205481565b6023602052600090815260409020546001600160a01b031681565b60326020526000908152604090205460ff1681565b60008215610b6257610b2586868686866114e3565b9050600082610b3c57610b378261161c565b610b45565b610b4582611652565b90508015610b6057610b5d828263ffffffff61167616565b91505b505b95945050505050565b60185481565b601f5481565b603d5460ff1615610b9a5760405162461bcd60e51b81526004016103a690614d2a565b6000838152600660205260409020600a01546001600160a01b03163314610bd35760405162461bcd60e51b81526004016103a690614e6a565b610bdf833384846116a2565b505050565b6008602090815260009283526040808420909152908252902080546001820154600283015460038401546004850154600590950154939492939192909186565b601a6020526000908152604090205481565b602a6020526000908152604090205481565b600a60209081526000928352604080842090915290825290205460ff1681565b60166020526000908152604090205481565b60155481565b60295481565b600c6020526000908152604090208054600182015460029092015490919083565b602b5481565b600b602090815260009283526040808420909152908252902080546001820154600283015460038401546004909401549293919290919085565b60266020526000908152604090205460ff1681565b6033602052600090815260409020546001600160a01b031681565b6003546001600160a01b031681565b60355481565b6002546001600160a01b031681565b601e5481565b603d5460ff1681565b6001546001600160a01b031690565b6022602052600090815260409020546001600160a01b031681565b6001546000906001600160a01b0316610d8b611717565b6001600160a01b031614905090565b60176020526000908152604090205481565b602c5481565b602f5481565b60205481565b602d546001600160a01b031681565b601d6020526000908152604090205481565b601c6020526000908152604090205481565b6037546001600160a01b031681565b6004546001600160a01b031681565b60366020526000908152604090205481565b600660208190526000918252604090912080546001820154600283015460038401546004850154600586015496860154600787015460088801546009890154600a8a0154600b909a0154989a9799969860ff909616979496949593949293919290916001600160a01b0391821691168c565b610e9b610d74565b610eb75760405162461bcd60e51b81526004016103a690614e6a565b633613289560e21b600081905260056020527fd3a886345208a8e3a0f774019653c4e69589e943ba1e46c7fa0ef875651e6e39546001600160a01b031690610eff908361171b565b610f106333d8991f60e01b8361171b565b610f2163d67f707760e01b8361171b565b610f3162977b2b60e61b8361171b565b610f4263e762319f60e01b8361171b565b6b4c6f616e4f70656e696e677360a01b826001600160a01b0316826001600160a01b03167f1420e3a2094d671bc2eb897941fa3d94ffa37f0cb6d530651946250a2151cb7f60405160405180910390a45050565b6007602052600090815260409020805460018201546002830154600384015460048501546005860154600690960154949560ff8516956101009095046001600160a01b03908116959481169493169288565b603c60209081526000928352604080842090915290825290205481565b6038546001600160a01b031681565b60275481565b60196020526000908152604090205481565b60006224ea008161105d6907baab4146b63dd00000611051868863ffffffff61179516565b9063ffffffff6117cf16565b9050600061107862015180611051858563ffffffff61179516565b9050600061108c898363ffffffff61181116565b905060006110998261161c565b905080156110b4576110b1828263ffffffff61181116565b91505b60006110c18d8d85611853565b9050806110d757600096505050505050506110f0565b6110e78a8263ffffffff61167616565b96505050505050505b9695505050505050565b60008060016000541461111f5760405162461bcd60e51b81526004016103a690614eda565b6002600055603d5460ff16156111475760405162461bcd60e51b81526004016103a690614d2a565b34158061115357508215155b61116f5760405162461bcd60e51b81526004016103a690614f0a565b336000908152602260205260409020546001600160a01b03166111a45760405162461bcd60e51b81526004016103a690614e4a565b6111ac613a9e565b5060008a815260076020908152604091829020825161010080820185528254808352600184015460ff811615159584019590955293046001600160a01b039081169482019490945260028201548416606082015260038201549093166080840152600481015460a0840152600581015460c08401526006015460e08301526112465760405162461bcd60e51b81526004016103a690614e9a565b60006112618260600151836080015189602001358c8e6114e3565b9050806112805760405162461bcd60e51b81526004016103a690614e3a565b6112e2828c8c848d611297368f90038f018f6140cf565b6112a6368f90038f018f6140ed565b8d8d8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152506118e992505050565b6001600055909d909c509a5050505050505050505050565b60008215610b62578115611324576113218368056bc75e2d6310000063ffffffff61167616565b92505b8360008361133a576113358261161c565b611343565b61134382611652565b9050801561135e5761135b828263ffffffff61181116565b91505b866001600160a01b0316886001600160a01b0316141561139c57611395856110518468056bc75e2d6310000063ffffffff61179516565b9250611463565b600254604051630a7549df60e21b815260009182916001600160a01b03909116906329d5277c906113d3908c908e906004016149e2565b604080518083038186803b1580156113ea57600080fd5b505afa1580156113fe573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250611422919081019061412a565b91509150806000146114605761145d816110518981866114518a68056bc75e2d6310000063ffffffff61179516565b9063ffffffff61179516565b94505b50505b505095945050505050565b6014546001600160a01b031681565b601b5481565b60285481565b611491610d74565b6114ad5760405162461bcd60e51b81526004016103a690614e6a565b6114b681611be0565b50565b60395481565b60215481565b602e546001600160a01b031681565b6030546001600160a01b031681565b6000846001600160a01b0316866001600160a01b031614156115235761151c68056bc75e2d63100000611051868663ffffffff61179516565b90506115de565b600254604051630a7549df60e21b815260009182916001600160a01b03909116906329d5277c9061155a908a908c906004016149e2565b604080518083038186803b15801561157157600080fd5b505afa158015611585573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506115a9919081019061412a565b91509150816000146115db576115d868056bc75e2d631000006110518761145186838c8863ffffffff61179516565b92505b50505b8180156115ea57508015155b15610b62576110f081611610856110518368056bc75e2d6310000063ffffffff61179516565b9063ffffffff61167616565b600061164c68056bc75e2d631000006116406018548561179590919063ffffffff16565b9063ffffffff611c6216565b92915050565b600061164c68056bc75e2d63100000611640601b548561179590919063ffffffff16565b60008282018381101561169b5760405162461bcd60e51b81526004016103a690614d8a565b9392505050565b6000848152600a602090815260408083206001600160a01b038681168086529190935292819020805460ff1916851515179055519085169086907f0eef4f90457a741c97d76fcf13fa231fefdcc7649bdb3cb49157c37111c9843390611709908690614bf7565b60405180910390a450505050565b3390565b6001600160e01b03198216600090815260056020526040902080546001600160a01b0319166001600160a01b0383169081179091551561177657611770600d6001600160e01b0319841663ffffffff611ca416565b50611791565b610bdf600d6001600160e01b0319841663ffffffff611cec16565b5050565b6000826117a45750600061164c565b828202828482816117b157fe5b041461169b5760405162461bcd60e51b81526004016103a690614e5a565b600061169b83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f000000000000815250611dad565b600061169b83836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f770000815250611de4565b604051636dcd64e560e01b81526000907398399051DC17bAFb621269A12a63d70b2D615C6990636dcd64e59061189190879087908790600401614a32565b60206040518083038186803b1580156118a957600080fd5b505af41580156118bd573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506118e1919081019061410c565b949350505050565b60008089606001516001600160a01b03168a608001516001600160a01b031614156119265760405162461bcd60e51b81526004016103a690614daa565b8960a0015186101561194a5760405162461bcd60e51b81526004016103a690614f2a565b60e08a015115158061195f5750604084015115155b61197b5760405162461bcd60e51b81526004016103a690614d4a565b60008861198957600061198f565b84602001515b90506000600660006119a88e8e8c8c8c60200151611e10565b8152602001908152602001600020905060006119d38d8389600001518a602001518b60400151612202565b60608801519091506119eb908263ffffffff61181116565b60608801528a15611a7b57606087015115611a185760405162461bcd60e51b81526004016103a690614e0a565b6000611a278860800151611652565b905060008e60800151905060008f60600151905082600014611a7357611a588b60200151866000015484848761241e565b60808a0151611a6d908463ffffffff61181116565b60808b01525b505050611a8b565b611a888c8e8a8a8a6124bd565b96505b60408051610180810182528354815260018401546020820152600284015491810191909152600383015460ff16151560608201526004830154608080830191909152600584015460a0830152600684015460c0830152600784015460e083015260088401546101008301526009840154610120830152600a8401546001600160a01b03908116610140840152600b85015416610160830152880151611b35918f918c908e88612540565b611b515760405162461bcd60e51b81526004016103a690614e7a565b60808701516005830154611b6a9163ffffffff61167616565b60058301558a15611b94576007820154611b8a904263ffffffff61181116565b60e0880152611bb5565b611bae6f4b3b4ca85a86c47a098a2240000000008a6117cf565b6101008801525b611bc28d838a8a8f61265b565b86602001518760800151945094505050509850989650505050505050565b6001600160a01b038116611c065760405162461bcd60e51b81526004016103a690614d5a565b6001546040516001600160a01b038084169216907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a3600180546001600160a01b0319166001600160a01b0392909216919091179055565b600061169b83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f00000000000081525061292e565b6000611cb08383612978565b611ce4575060018083018054808301808355600092835260208084209092018590558483529085905260409091205561164c565b50600061164c565b6000611cf88383612978565b15611ce45760008281526020849052604090205460018401546000199182019101808214611d70576000856001018281548110611d3157fe5b9060005260206000200154905080866001018481548110611d4e57fe5b6000918252602080832090910192909255918252869052604090206001830190555b60008481526020869052604081205560018501805480611d8c57fe5b6001900381819060005260206000200160009055905560019250505061164c565b60008183611dce5760405162461bcd60e51b81526004016103a69190614d09565b506000838581611dda57fe5b0495945050505050565b60008184841115611e085760405162461bcd60e51b81526004016103a69190614d09565b505050900390565b60008560200151611e335760405162461bcd60e51b81526004016103a690614eca565b825160208401516060850151611e47613ae2565b88611f9e576001600160a01b0383166000908152602a60209081526040918290208054600101908190558c519251611e86939288928892909101614980565b60408051601f1981840301815291815281516020928301206000818152600690935291205490995015611ecb5760405162461bcd60e51b81526004016103a690614dfa565b5060408051610180810182528981528a5160208201526000918101829052600160608201526080810187905260a081018290524260c082015260e0810182905261010081018990526101208101919091526001600160a01b038084166101408301528416610160820152611f46600f8a63ffffffff611ca416565b506001600160a01b0384166000908152601160205260409020611f6f908a63ffffffff611ca416565b506001600160a01b0383166000908152601260205260409020611f98908a63ffffffff611ca416565b5061211f565b5060008881526006602081815260409283902083516101808101855281548152600182015492810192909252600281015493820193909352600383015460ff161580156060830181905260048501546080840152600585015460a08401529284015460c0830152600784015460e083015260088401546101008301526009840154610120830152600a8401546001600160a01b03908116610140840152600b909401549093166101608201529161205857508060e0015142105b6120745760405162461bcd60e51b81526004016103a690614e1a565b826001600160a01b03168161014001516001600160a01b0316146120aa5760405162461bcd60e51b81526004016103a690614d7a565b836001600160a01b03168161016001516001600160a01b0316146120e05760405162461bcd60e51b81526004016103a690614dda565b89516020820151146121045760405162461bcd60e51b81526004016103a690614d1a565b6080810151612119908763ffffffff61167616565b60808201525b6001600160a01b0382161561213b5761213b89848460016116a2565b60008981526006602081815260409283902084518155908401516001820155918301516002830155606083015160038301805460ff19169115159190911790556080830151600483015560a0830151600583015560c08301519082015560e0820151600782015561010082015160088201556101208201516009820155610140820151600a820180546001600160a01b03199081166001600160a01b039384161790915561016090930151600b909201805490931691161790555095979650505050505050565b600b8401546060860151600091612224916001600160a01b039091169061298d565b84546000818152600c60209081526040808320600b808b01546001600160a01b03908116865290845282852060608d0180518316875294529190932060e08b0151925160808c0151600a8c0154959692956122859488949392911642612a6b565b6000811580156122985750600789015415155b156122c6576122c3620151806110518660000154611451428e6007015461181190919063ffffffff16565b90505b60006122e66907baab4146b63dd000006110518a8c63ffffffff61179516565b85549091506122fb908263ffffffff61167616565b85556001840154612312908263ffffffff61167616565b60018501558261238157845461233f90429061161090611051620151806114518d8963ffffffff61167616565b60078b01819055612356904263ffffffff61181116565b9250610e1083116123795760405162461bcd60e51b81526004016103a690614d9a565b8695506123c5565b60078a01546123a05761239a428463ffffffff61167616565b60078b01555b6123c26201518061105183611451428f6007015461181190919063ffffffff16565b95505b60018501546123da908763ffffffff61167616565b600186015583546123f1908963ffffffff61167616565b84556002840154612408908763ffffffff61167616565b8460020181905550505050505095945050505050565b80156124b6576001600160a01b0383166000908152601c602052604090205461244d908263ffffffff61167616565b6001600160a01b038085166000818152601c6020526040908190209390935591518692918816907ffb6c38ae4fdd498b3a5003f02ca4ca5340dfedb36b1b100c679eb60633b2c0a7906124a1908690614f58565b60405180910390a46124b68585858585612ab9565b5050505050565b6124c5613b46565b60006124ea87876060015188608001518860200151886060015160008060008b612f1f565b60c0870152506080850151909150612508908263ffffffff61167616565b608085015260a084015160c085015110156125355760405162461bcd60e51b81526004016103a690614d6a565b509195945050505050565b600061256868056bc75e2d631000006110518568055005f0c61448000063ffffffff61179516565b92508284101561264e5760a0860151156126465760025460608801516080808a0151908901516000936001600160a01b03169263f80b25fb9290916125b3908863ffffffff61181116565b8b60a001518b6040518663ffffffff1660e01b81526004016125d9959493929190614a82565b60206040518083038186803b1580156125f157600080fd5b505afa158015612605573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250612629919081019061410c565b90508361263c868363ffffffff61167616565b10159150506110f0565b5060006110f0565b5060019695505050505050565b6002546060860151608087015160048088015460058901546040516317f8680960e11b815260009687966001600160a01b0390911695632ff0d012956126a5959294919301614a5a565b604080518083038186803b1580156126bc57600080fd5b505afa1580156126d0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506126f4919081019061412a565b915091508660c00151821161271b5760405162461bcd60e51b81526004016103a690614e8a565b4286600601541415612881576002546060880151608089015160405163524efd4b60e01b81526000936001600160a01b03169263524efd4b92612760926004016149e2565b60206040518083038186803b15801561277857600080fd5b505afa15801561278c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506127b0919081019061410c565b60025460808a015160608b015160405163524efd4b60e01b81529394506000936001600160a01b039093169263524efd4b926127f09290916004016149e2565b60206040518083038186803b15801561280857600080fd5b505afa15801561281c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250612840919081019061410c565b90506000612854838363ffffffff61179516565b9050856128765760c087015161287190829063ffffffff6117cf16565b612878565b835b60098a01555050505b60408051610180810182528754815260018801546020820152600288015491810191909152600387015460ff161515606082015260048701546080820152600587015460a0820152600687015460c0820152600787015460e082015260088701546101008201526009870154610120820152600a8701546001600160a01b03908116610140830152600b88015416610160820152612925908890878785878961307d565b50505050505050565b6000818361294f5760405162461bcd60e51b81526004016103a69190614d09565b508361295d5750600061169b565b600083600186038161296b57fe5b0460010195945050505050565b60009081526020919091526040902054151590565b6001600160a01b038083166000908152600b6020908152604080832093851683529290529081206001810154909190158015906129cd5750600482015415155b15612a5e576129f862015180611051846001015461145186600401544261181190919063ffffffff16565b4260048401556002830154909150811115612a14575060028101545b8015612a59576003820154612a2f908263ffffffff61167616565b60038301556002820154612a49908263ffffffff61181116565b6002830155612a598484836131b4565b612a65565b4260048301555b50505050565b6000612aa16a07259756a8d619980000006110516015546114518b600001546114518d600201548961181190919063ffffffff16565b60028801839055905080156129255761292583878787855b602f546002546001600160a01b038581166000908152603c602090815260408083208885168452909152812054909392919091169015612b1c576001600160a01b038087166000908152603c602090815260408083209389168352929052205491505b6037546000906060906001600160a01b038085169163d138f9a160e01b918b9116612b5a68056bc75e2d631000006110518c8b63ffffffff61179516565b604051602401612b6c93929190614a32565b60408051601f198184030181529181526020820180516001600160e01b03166001600160e01b0319909416939093179092529051612baa91906149c8565b600060405180830381855afa9150503d8060008114612be5576040519150601f19603f3d011682016040523d82523d6000602084013e612bea565b606091505b50915091506001821415612c0057602081015194505b6000306001600160a01b031663c22552f76040518163ffffffff1660e01b815260040160206040518083038186803b158015612c3b57600080fd5b505afa158015612c4f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250612c73919081019061410c565b90508515801590612c845750858110155b15612eac5760375460385460405163095ea7b360e01b81526001600160a01b039283169263095ea7b392612cbf929116908a90600401614bc1565b602060405180830381600087803b158015612cd957600080fd5b505af1158015612ced573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250612d119190810190613f4e565b50603854603f546040516000926001600160a01b031691612d38918f918b91602401614bdc565b60408051601f198184030181529181526020820180516001600160e01b0316630efe6a8b60e01b17905251612d6d91906149c8565b6000604051808303816000865af19150503d8060008114612daa576040519150601f19603f3d011682016040523d82523d6000602084013e612daf565b606091505b505090508015612e3e57601f54612dcc908863ffffffff61167616565b601f819055508a603760009054906101000a90046001600160a01b03166001600160a01b03168d6001600160a01b03167ff41c644671512f1cda76abfe6038e3d7d526c1377a5a8c692f81703901db2150898b603f54604051612e3193929190614f74565b60405180910390a4612ea6565b8a603760009054906101000a90046001600160a01b03166001600160a01b03168d6001600160a01b03167f483f67ea49f76ac15e15bbad68b52788ca47d50aef1e4acfe95e5e307e710812898b603f54604051612e9d93929190614f74565b60405180910390a45b50612f12565b8515801590612eba57508581105b15612f1257603754603f546040518c926001600160a01b0390811692908f16917f483f67ea49f76ac15e15bbad68b52788ca47d50aef1e4acfe95e5e307e71081291612f09918b918d91614f74565b60405180910390a45b5050505050505050505050565b6040805160a0810182526001600160a01b03808b16825289811660208084019190915230838501819052606080850191909152918a16608084015283519182018452888252810187905291820185905260009182918291612f8491908e888886613259565b9093509150612f938b8361347e565b600254602754604051631e2c62d360e01b81526001600160a01b0390921691631e2c62d391612fcc918f918f9188918a91600401614a82565b60206040518083038186803b158015612fe457600080fd5b505afa158015612ff8573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061301c919081019061410c565b9050896001600160a01b03168b6001600160a01b03168d7fb4eb3c9b62efcce7021cba5fd9cd0c44df91c2272806ccc5e57df7c912e8d7168c868860405161306693929190614bdc565b60405180910390a499509950999650505050505050565b801561310657856000015185600001516001600160a01b031686602001516001600160a01b03167f7bd8cbb7ba34b33004f3deda0fd36c92fc0360acbd97843360037b467a538f908a606001518b6080015189602001518a608001518b600001518c60e001518c8c6040516130f9989796959493929190614ac4565b60405180910390a4612925565b6131206f4b3b4ca85a86c47a098a224000000000836117cf565b9150856000015185600001516001600160a01b031686602001516001600160a01b03167ff640c1cfe1a912a0b0152b5a542e5c2403142eed75b06cde526cee54b1580e5c8a608001518b6060015189608001518a602001518b600001518e60e001518d60c001518e61010001518d6040516131a399989796959493929190614b3b565b60405180910390a450505050505050565b60006131d868056bc75e2d631000006110516015548561179590919063ffffffff16565b90506131e584848361354c565b6131ff83856131fa858563ffffffff61181116565b6135da565b6001600160a01b038085169084167f220e66e3e759e1382aa86cd8af5abca05ebf3ad564f223ae62d977678337272a61323e858563ffffffff61181116565b60405161324b9190614f58565b60405180910390a350505050565b845160009081901515806132705750602087015115155b61328c5760405162461bcd60e51b81526004016103a690614eba565b602087015161329d57865160208801525b6020870151875111156132c25760405162461bcd60e51b81526004016103a690614dea565b60008060008761337f5760408a015161333e5785156132f3576132ec8a60005b602002015161363d565b9050613307565b6133048a60005b602002015161161c565b90505b80156133395760808b01518b5161332a91908b908e60015b602002015185613661565b89516133369082611811565b8a525b61337f565b85156133565761334f8a60026132e2565b9050613364565b6133618a60026132fa565b90505b801561337f5760408a01516133799082611676565b60408b01525b86511561339e5760405162461bcd60e51b81526004016103a690614eea565b6133a88b8b6137b1565b60408c015191945092506133f457895182146133d65760405162461bcd60e51b81526004016103a690614f1a565b80156133ef576133ec828263ffffffff61167616565b91505b61346e565b60208a01518211156134185760405162461bcd60e51b81526004016103a690614dca565b60408a015183101561343c5760405162461bcd60e51b81526004016103a690614d3a565b801561346e5760808b015160208c015161345b91908b908e600061331f565b61346b838263ffffffff61181116565b92505b5090999098509650505050505050565b6029548015610bdf57602d546000906001600160a01b03858116911614156134a757508161352c565b600254604051635967aa7560e11b81526001600160a01b039091169063b2cf54ea906134d99087908790600401614bc1565b60206040518083038186803b1580156134f157600080fd5b505afa158015613505573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250613529919081019061410c565b90505b81811115612a655760405162461bcd60e51b81526004016103a690614e2a565b8015610bdf576001600160a01b03821660009081526016602052604090205461357b908263ffffffff61167616565b6001600160a01b0380841660008181526016602052604090819020939093559151908516907f40a75ae5f7a5336e75f7c7977e12c4b46a9ac0f30de01a2d5b6c1a4f4af63587906135cd908590614f58565b60405180910390a3505050565b8015610bdf576135fa6001600160a01b038416838363ffffffff61389b16565b816001600160a01b0316836001600160a01b03167fc44aeefa68e8b9c1ad5f7be4b0dd194580f81f5c362862e72196503a320eb7a1836040516135cd9190614f58565b600061164c68056bc75e2d63100000611640603e548561179590919063ffffffff16565b8080156137a9576001600160a01b038681166000908152603360205260409020541615613717576001600160a01b038087166000908152603360205260409020546136af91168786846138f4565b50506137146136d668056bc75e2d631000006110516039548561179590919063ffffffff16565b6137086136fb68056bc75e2d631000006110516020548761179590919063ffffffff16565b849063ffffffff61181116565b9063ffffffff61181116565b90505b6001600160a01b038416600090815260196020526040902054613740908263ffffffff61167616565b6001600160a01b03808616600081815260196020526040908190209390935591518792918916907fb23479169712c443e6b00fb0cec3506a5f5926f541df4243d313e11c8c5c71ed90613794908690614f58565b60405180910390a46137a98686868686612ab9565b505050505050565b6000806137bc613b92565b84516001600160a01b039081168252602080870151821683820152604080880151831681850152606080890151909316928401929092528551608084015285015160a08301528481015160c0830152516335aaa79d60e01b81527398399051DC17bAFb621269A12a63d70b2D615C69906335aaa79d90613840908490600401614f4a565b604080518083038186803b15801561385757600080fd5b505af415801561386b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061388f919081019061412a565b90969095509350505050565b604051610bdf90849063a9059cbb60e01b906138bd9086908690602401614bc1565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b031990931692909217909152613980565b6040516306a688ff60e11b815260009081903090630d4d11fe906139229089908990899089906004016149fd565b6040805180830381600087803b15801561393b57600080fd5b505af115801561394f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250613973919081019061412a565b9097909650945050505050565b613992826001600160a01b0316613a65565b6139ae5760405162461bcd60e51b81526004016103a690614f3a565b60006060836001600160a01b0316836040516139ca91906149c8565b6000604051808303816000865af19150503d8060008114613a07576040519150601f19603f3d011682016040523d82523d6000602084013e613a0c565b606091505b509150915081613a2e5760405162461bcd60e51b81526004016103a690614dba565b805115612a655780806020019051613a499190810190613f4e565b612a655760405162461bcd60e51b81526004016103a690614efa565b6000813f7fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a4708181148015906118e1575050151592915050565b6040805161010081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e081019190915290565b6040805161018081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e0810182905261010081018290526101208101829052610140810182905261016081019190915290565b6040518061012001604052806000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b6040805160e081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c081019190915290565b803561164c816150b4565b803561164c816150c8565b805161164c816150c8565b803561164c816150d1565b803561164c816150da565b60008083601f840112613c1757600080fd5b50813567ffffffffffffffff811115613c2f57600080fd5b602083019150836001820283011115613c4757600080fd5b9250929050565b600060808284031215613c6057600080fd5b50919050565b600060808284031215613c7857600080fd5b613c826080614ff7565b90506000613c908484613bce565b8252506020613ca184848301613bce565b6020830152506040613cb584828501613bce565b6040830152506060613cc984828501613bce565b60608301525092915050565b60006101208284031215613c6057600080fd5b60006101208284031215613cfb57600080fd5b613d06610120614ff7565b90506000613d148484613bef565b8252506020613d2584848301613bef565b6020830152506040613d3984828501613bef565b6040830152506060613d4d84828501613bef565b6060830152506080613d6184828501613bef565b60808301525060a0613d7584828501613bef565b60a08301525060c0613d8984828501613bef565b60c08301525060e0613d9d84828501613bef565b60e083015250610100613db284828501613bef565b6101008301525092915050565b805161164c816150d1565b600060208284031215613ddc57600080fd5b60006118e18484613bce565b60008060408385031215613dfb57600080fd5b6000613e078585613bce565b9250506020613e1885828601613bce565b9150509250929050565b600080600080600060a08688031215613e3a57600080fd5b6000613e468888613bce565b9550506020613e5788828901613bce565b9450506040613e6888828901613bef565b9350506060613e7988828901613bef565b9250506080613e8a88828901613bd9565b9150509295509295909350565b60008060008060008060c08789031215613eb057600080fd5b6000613ebc8989613bce565b9650506020613ecd89828a01613bce565b9550506040613ede89828a01613bef565b9450506060613eef89828a01613bef565b9350506080613f0089828a01613bef565b92505060a0613f1189828a01613bef565b9150509295509295509295565b60008060408385031215613f3157600080fd5b6000613f3d8585613bce565b9250506020613e1885828601613bef565b600060208284031215613f6057600080fd5b60006118e18484613be4565b600060208284031215613f7e57600080fd5b60006118e18484613bef565b60008060408385031215613f9d57600080fd5b6000613e078585613bef565b600080600060608486031215613fbe57600080fd5b6000613fca8686613bef565b9350506020613fdb86828701613bce565b9250506040613fec86828701613bd9565b9150509250925092565b600080600080600080600080610240898b03121561401357600080fd5b600061401f8b8b613bef565b98505060206140308b828c01613bef565b97505060406140418b828c01613bd9565b96505060606140528b828c01613bef565b95505060806140638b828c01613c4e565b9450506101006140758b828c01613cd5565b93505061022089013567ffffffffffffffff81111561409357600080fd5b61409f8b828c01613c05565b92509250509295985092959890939650565b6000602082840312156140c357600080fd5b60006118e18484613bfa565b6000608082840312156140e157600080fd5b60006118e18484613c66565b6000610120828403121561410057600080fd5b60006118e18484613ce8565b60006020828403121561411e57600080fd5b60006118e18484613dbf565b6000806040838503121561413d57600080fd5b60006141498585613dbf565b9250506020613e1885828601613dbf565b61416381615030565b82525050565b61416361417582615030565b615093565b6141638161503b565b61416381615040565b61416361419882615040565b615040565b60006141a88261501e565b6141b28185615022565b93506141c2818560208601615067565b9290920192915050565b6141638161505c565b60006141e08261501e565b6141ea8185615027565b93506141fa818560208601615067565b614203816150a4565b9093019392505050565b600061421a601383615027565b720d8dec2dca0c2e4c2dae640dad2e6dac2e8c6d606b1b815260200192915050565b6000614249600683615027565b6514185d5cd95960d21b815260200192915050565b600061426b601b83615027565b7f696e73756666696369656e742073776170206c69717569646974790000000000815260200192915050565b60006142a4601083615027565b6f1a5b9d985b1a59081a5b9d195c995cdd60821b815260200192915050565b60006142d0602683615027565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206181526564647265737360d01b602082015260400192915050565b6000614318601d83615027565b7f656e7472792070726963652061626f766520746865206d696e696d756d000000815260200192915050565b6000614351601183615027565b700c4dee4e4deeecae440dad2e6dac2e8c6d607b1b815260200192915050565b600061437e601b83615027565b7f536166654d6174683a206164646974696f6e206f766572666c6f770000000000815260200192915050565b60006143b7600e83615027565b6d1b1bd85b881d1bdbc81cda1bdc9d60921b815260200192915050565b60006143e1601583615027565b740c6ded8d8c2e8cae4c2d85ed8dec2dc40dac2e8c6d605b1b815260200192915050565b6000614412602083615027565b7f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815260200192915050565b600061444b601383615027565b72737761702066696c6c20746f6f206c6172676560681b815260200192915050565b600061447a600f83615027565b6e0d8cadcc8cae440dad2e6dac2e8c6d608b1b815260200192915050565b60006144a5601c83615027565b7f736f75726365416d6f756e74206c6172676572207468616e206d617800000000815260200192915050565b60006144de600b83615027565b6a6c6f616e2065786973747360a81b815260200192915050565b6000614505601283615027565b7139bab938363ab9903637b0b7103a37b5b2b760711b815260200192915050565b6000614533600e83615027565b6d1b1bd85b881a185cc8195b99195960921b815260200192915050565b600061455d600e83615027565b6d7377617020746f6f206c6172676560901b815260200192915050565b6000614587600f83615027565b6e0636f6c6c61746572616c206973203608c1b815260200192915050565b60006145b2600e83615027565b6d1b9bdd08185d5d1a1bdc9a5e995960921b815260200192915050565b60006145dc602183615027565b7f536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f8152607760f81b602082015260400192915050565b600061461f600c83615027565b6b1d5b985d5d1a1bdc9a5e995960a21b815260200192915050565b6000614647601783615027565b7f636f6c6c61746572616c20696e73756666696369656e74000000000000000000815260200192915050565b6000614680601283615027565b713ab73432b0b63a343c903837b9b4ba34b7b760711b815260200192915050565b60006146ae601583615027565b746c6f616e506172616d73206e6f742065786973747360581b815260200192915050565b60006146df601483615027565b7319985b1b189858dac81b9bdd08185b1b1bddd95960621b815260200192915050565b600061470f602e83615027565b7f6d696e206f72206d617820736f7572636520746f6b656e20616d6f756e74206e81526d1959591cc81d1bc81899481cd95d60921b602082015260400192915050565b600061475f601383615027565b721b1bd85b94185c985b5cc8191a5cd8589b1959606a1b815260200192915050565b600061478e600c83615027565b6b1b9bdb9499595b9d1c985b9d60a21b815260200192915050565b60006147b6600d83615027565b6c696e76616c696420737461746560981b815260200192915050565b60006147df602a83615027565b7f5361666545524332303a204552433230206f7065726174696f6e20646964206e8152691bdd081cdd58d8d9595960b21b602082015260400192915050565b600061482b602183615027565b7f6c6f616e446174614279746573207265717569726564207769746820657468658152603960f91b602082015260400192915050565b600061486e601683615027565b751cddd85c081d1bdbc81b185c99d9481d1bc8199a5b1b60521b815260200192915050565b60006148a0601583615027565b74696e697469616c4d617267696e20746f6f206c6f7760581b815260200192915050565b60006148d1601f83615027565b7f5361666545524332303a2063616c6c20746f206e6f6e2d636f6e747261637400815260200192915050565b805160e083019061490e848261415a565b506020820151614921602085018261415a565b506040820151614934604085018261415a565b506060820151614947606085018261415a565b50608082015161495a6080850182614183565b5060a082015161496d60a0850182614183565b5060c0820151612a6560c0850182614183565b600061498c828761418c565b60208201915061499c8286614169565b6014820191506149ac8285614169565b6014820191506149bc828461418c565b50602001949350505050565b600061169b828461419d565b6020810161164c828461415a565b604081016149f0828561415a565b61169b602083018461415a565b60808101614a0b828761415a565b614a18602083018661415a565b614a25604083018561415a565b610b626060830184614183565b60608101614a40828661415a565b614a4d602083018561415a565b6118e16040830184614183565b60808101614a68828761415a565b614a75602083018661415a565b614a256040830185614183565b60a08101614a90828861415a565b614a9d602083018761415a565b614aaa6040830186614183565b614ab76060830185614183565b6110f06080830184614183565b6101008101614ad3828b61415a565b614ae0602083018a61415a565b614aed6040830189614183565b614afa6060830188614183565b614b076080830187614183565b614b1460a0830186614183565b614b2160c0830185614183565b614b2e60e0830184614183565b9998505050505050505050565b6101208101614b4a828c61415a565b614b57602083018b61415a565b614b64604083018a614183565b614b716060830189614183565b614b7e6080830188614183565b614b8b60a0830187614183565b614b9860c0830186614183565b614ba560e0830185614183565b614bb3610100830184614183565b9a9950505050505050505050565b60408101614bcf828561415a565b61169b6020830184614183565b60608101614bea828661415a565b614a4d6020830185614183565b6020810161164c828461417a565b6101008101614c14828b614183565b614c21602083018a61417a565b614c2e604083018961415a565b614c3b606083018861415a565b614b07608083018761415a565b6101808101614c57828f614183565b614c64602083018e614183565b614c71604083018d614183565b614c7e606083018c61417a565b614c8b608083018b614183565b614c9860a083018a614183565b614ca560c0830189614183565b614cb260e0830188614183565b614cc0610100830187614183565b614cce610120830186614183565b614cdc61014083018561415a565b614cea61016083018461415a565b9d9c50505050505050505050505050565b6020810161164c82846141cc565b6020808252810161169b81846141d5565b6020808252810161164c8161420d565b6020808252810161164c8161423c565b6020808252810161164c8161425e565b6020808252810161164c81614297565b6020808252810161164c816142c3565b6020808252810161164c8161430b565b6020808252810161164c81614344565b6020808252810161164c81614371565b6020808252810161164c816143aa565b6020808252810161164c816143d4565b6020808252810161164c81614405565b6020808252810161164c8161443e565b6020808252810161164c8161446d565b6020808252810161164c81614498565b6020808252810161164c816144d1565b6020808252810161164c816144f8565b6020808252810161164c81614526565b6020808252810161164c81614550565b6020808252810161164c8161457a565b6020808252810161164c816145a5565b6020808252810161164c816145cf565b6020808252810161164c81614612565b6020808252810161164c8161463a565b6020808252810161164c81614673565b6020808252810161164c816146a1565b6020808252810161164c816146d2565b6020808252810161164c81614702565b6020808252810161164c81614752565b6020808252810161164c81614781565b6020808252810161164c816147a9565b6020808252810161164c816147d2565b6020808252810161164c8161481e565b6020808252810161164c81614861565b6020808252810161164c81614893565b6020808252810161164c816148c4565b60e0810161164c82846148fd565b6020810161164c8284614183565b60408101614bcf8285614183565b60608101614bea8286614183565b60a08101614f908288614183565b614a9d6020830187614183565b60c08101614fab8289614183565b614fb86020830188614183565b614fc56040830187614183565b614fd26060830186614183565b614fdf6080830185614183565b614fec60a0830184614183565b979650505050505050565b60405181810167ffffffffffffffff8111828210171561501657600080fd5b604052919050565b5190565b919050565b90815260200190565b600061164c82615050565b151590565b90565b6001600160e01b03191690565b6001600160a01b031690565b600061164c82615030565b60005b8381101561508257818101518382015260200161506a565b83811115612a655750506000910152565b600061164c82600061164c826150ae565b601f01601f191690565b60601b90565b6150bd81615030565b81146114b657600080fd5b6150bd8161503b565b6150bd81615040565b6150bd8161504356fea365627a7a7231582006262a07965035f357589c6bb924f7de44a817506b83c56eb712cec5934fdd626c6578706572696d656e74616cf564736f6c63430005110040",
  "deployedBytecode": "0x6080604052600436106103815760003560e01c80638f32d59b116101d1578063cd5d808d11610102578063e8f62764116100a0578063f589a3e71161006f578063f589a3e714610a05578063f6ddc8b314610a1a578063f706b1f214610a2f578063f851a44014610a4457610381565b8063e8f62764146109a6578063edab119f146109bb578063f0e085f5146109d0578063f2fde38b146109e557610381565b8063d485045e116100dc578063d485045e14610925578063d67f707714610945578063d84ca25414610965578063e762319f1461098657610381565b8063cd5d808d146108db578063d288208c146108fb578063d473c2da1461091057610381565b8063b7e152411161016f578063bdee453c11610149578063bdee453c1461082f578063c4a908151461084f578063c4d66de814610887578063cb6eacd1146108a757610381565b8063b7e15241146107e5578063b9cffa3e14610805578063ba4861e91461081a57610381565b8063acc04348116101ab578063acc0434814610779578063ae0a85301461078e578063afe84009146107a3578063b30643d9146107c557610381565b80638f32d59b1461072f57806392d894f814610744578063959083d31461076457610381565b80634203e395116102b65780636e663730116102545780637a8faeb8116102235780637a8faeb8146106d05780638456cb59146106e55780638da5cb5b146106fa5780638dc48ba51461070f57610381565b80636e663730146106715780637420ca3e14610691578063742e6798146106a657806378d849ed146106bb57610381565b8063569fc1fb11610290578063569fc1fb146105dc578063574442cc1461060b57806362fff3f61461062057806368c4ac261461065157610381565b80634203e395146105925780634699f846146105b25780634f28cac2146105c757610381565b80632a324027116103235780633432423c116102fd5780633432423c146105125780633452d2d4146105325780633fca506e146105525780634115a2b61461057257610381565b80632a324027146104c65780632f470764146104db57806333d8991f146104f057610381565b80631b7bde741161035f5780631b7bde741461042c578063218b39c61461045957806324cc57491461047957806325decac0146104a657610381565b8063065d810f146103af5780630676c1b7146103ea57806317548b791461040c575b34801561038d57600080fd5b5060405162461bcd60e51b81526004016103a690614eaa565b60405180910390fd5b3480156103bb57600080fd5b506103cf6103ca366004613f1e565b610a59565b6040516103e196959493929190614f9d565b60405180910390f35b3480156103f657600080fd5b506103ff610a99565b6040516103e191906149d4565b34801561041857600080fd5b506103ff6104273660046140b1565b610aa8565b34801561043857600080fd5b5061044c610447366004613de8565b610ac3565b6040516103e19190614f58565b34801561046557600080fd5b506103ff610474366004613dca565b610ae0565b34801561048557600080fd5b50610499610494366004613dca565b610afb565b6040516103e19190614bf7565b3480156104b257600080fd5b5061044c6104c1366004613e22565b610b10565b3480156104d257600080fd5b5061044c610b6b565b3480156104e757600080fd5b5061044c610b71565b3480156104fc57600080fd5b5061051061050b366004613fa9565b610b77565b005b34801561051e57600080fd5b506103cf61052d366004613f1e565b610be4565b34801561053e57600080fd5b5061044c61054d366004613dca565b610c24565b34801561055e57600080fd5b5061044c61056d366004613dca565b610c36565b34801561057e57600080fd5b5061049961058d366004613f8a565b610c48565b34801561059e57600080fd5b5061044c6105ad366004613dca565b610c68565b3480156105be57600080fd5b5061044c610c7a565b3480156105d357600080fd5b5061044c610c80565b3480156105e857600080fd5b506105fc6105f7366004613f6c565b610c86565b6040516103e193929190614f74565b34801561061757600080fd5b5061044c610ca7565b34801561062c57600080fd5b5061064061063b366004613de8565b610cad565b6040516103e1959493929190614f82565b34801561065d57600080fd5b5061049961066c366004613dca565b610ce7565b34801561067d57600080fd5b506103ff61068c366004613dca565b610cfc565b34801561069d57600080fd5b506103ff610d17565b3480156106b257600080fd5b5061044c610d26565b3480156106c757600080fd5b506103ff610d2c565b3480156106dc57600080fd5b5061044c610d3b565b3480156106f157600080fd5b50610499610d41565b34801561070657600080fd5b506103ff610d4a565b34801561071b57600080fd5b506103ff61072a366004613dca565b610d59565b34801561073b57600080fd5b50610499610d74565b34801561075057600080fd5b5061044c61075f366004613dca565b610d9a565b34801561077057600080fd5b5061044c610dac565b34801561078557600080fd5b5061044c610db2565b34801561079a57600080fd5b5061044c610db8565b3480156107af57600080fd5b506107b8610dbe565b6040516103e19190614cfb565b3480156107d157600080fd5b5061044c6107e0366004613dca565b610dcd565b3480156107f157600080fd5b5061044c610800366004613dca565b610ddf565b34801561081157600080fd5b506103ff610df1565b34801561082657600080fd5b506103ff610e00565b34801561083b57600080fd5b5061044c61084a366004613dca565b610e0f565b34801561085b57600080fd5b5061086f61086a366004613f6c565b610e21565b6040516103e19c9b9a99989796959493929190614c48565b34801561089357600080fd5b506105106108a2366004613dca565b610e93565b3480156108b357600080fd5b506108c76108c2366004613f6c565b610f96565b6040516103e1989796959493929190614c05565b3480156108e757600080fd5b5061044c6108f6366004613de8565b610fe8565b34801561090757600080fd5b506103ff611005565b34801561091c57600080fd5b5061044c611014565b34801561093157600080fd5b5061044c610940366004613dca565b61101a565b34801561095157600080fd5b5061044c610960366004613e97565b61102c565b610978610973366004613ff6565b6110fa565b6040516103e1929190614f66565b34801561099257600080fd5b5061044c6109a1366004613e22565b6112fa565b3480156109b257600080fd5b506103ff61146e565b3480156109c757600080fd5b5061044c61147d565b3480156109dc57600080fd5b5061044c611483565b3480156109f157600080fd5b50610510610a00366004613dca565b611489565b348015610a1157600080fd5b5061044c6114b9565b348015610a2657600080fd5b5061044c6114bf565b348015610a3b57600080fd5b506103ff6114c5565b348015610a5057600080fd5b506103ff6114d4565b6009602090815260009283526040808420909152908252902080546001820154600283015460038401546004850154600590950154939492939192909186565b6031546001600160a01b031681565b6005602052600090815260409020546001600160a01b031681565b603b60209081526000928352604080842090915290825290205481565b6023602052600090815260409020546001600160a01b031681565b60326020526000908152604090205460ff1681565b60008215610b6257610b2586868686866114e3565b9050600082610b3c57610b378261161c565b610b45565b610b4582611652565b90508015610b6057610b5d828263ffffffff61167616565b91505b505b95945050505050565b60185481565b601f5481565b603d5460ff1615610b9a5760405162461bcd60e51b81526004016103a690614d2a565b6000838152600660205260409020600a01546001600160a01b03163314610bd35760405162461bcd60e51b81526004016103a690614e6a565b610bdf833384846116a2565b505050565b6008602090815260009283526040808420909152908252902080546001820154600283015460038401546004850154600590950154939492939192909186565b601a6020526000908152604090205481565b602a6020526000908152604090205481565b600a60209081526000928352604080842090915290825290205460ff1681565b60166020526000908152604090205481565b60155481565b60295481565b600c6020526000908152604090208054600182015460029092015490919083565b602b5481565b600b602090815260009283526040808420909152908252902080546001820154600283015460038401546004909401549293919290919085565b60266020526000908152604090205460ff1681565b6033602052600090815260409020546001600160a01b031681565b6003546001600160a01b031681565b60355481565b6002546001600160a01b031681565b601e5481565b603d5460ff1681565b6001546001600160a01b031690565b6022602052600090815260409020546001600160a01b031681565b6001546000906001600160a01b0316610d8b611717565b6001600160a01b031614905090565b60176020526000908152604090205481565b602c5481565b602f5481565b60205481565b602d546001600160a01b031681565b601d6020526000908152604090205481565b601c6020526000908152604090205481565b6037546001600160a01b031681565b6004546001600160a01b031681565b60366020526000908152604090205481565b600660208190526000918252604090912080546001820154600283015460038401546004850154600586015496860154600787015460088801546009890154600a8a0154600b909a0154989a9799969860ff909616979496949593949293919290916001600160a01b0391821691168c565b610e9b610d74565b610eb75760405162461bcd60e51b81526004016103a690614e6a565b633613289560e21b600081905260056020527fd3a886345208a8e3a0f774019653c4e69589e943ba1e46c7fa0ef875651e6e39546001600160a01b031690610eff908361171b565b610f106333d8991f60e01b8361171b565b610f2163d67f707760e01b8361171b565b610f3162977b2b60e61b8361171b565b610f4263e762319f60e01b8361171b565b6b4c6f616e4f70656e696e677360a01b826001600160a01b0316826001600160a01b03167f1420e3a2094d671bc2eb897941fa3d94ffa37f0cb6d530651946250a2151cb7f60405160405180910390a45050565b6007602052600090815260409020805460018201546002830154600384015460048501546005860154600690960154949560ff8516956101009095046001600160a01b03908116959481169493169288565b603c60209081526000928352604080842090915290825290205481565b6038546001600160a01b031681565b60275481565b60196020526000908152604090205481565b60006224ea008161105d6907baab4146b63dd00000611051868863ffffffff61179516565b9063ffffffff6117cf16565b9050600061107862015180611051858563ffffffff61179516565b9050600061108c898363ffffffff61181116565b905060006110998261161c565b905080156110b4576110b1828263ffffffff61181116565b91505b60006110c18d8d85611853565b9050806110d757600096505050505050506110f0565b6110e78a8263ffffffff61167616565b96505050505050505b9695505050505050565b60008060016000541461111f5760405162461bcd60e51b81526004016103a690614eda565b6002600055603d5460ff16156111475760405162461bcd60e51b81526004016103a690614d2a565b34158061115357508215155b61116f5760405162461bcd60e51b81526004016103a690614f0a565b336000908152602260205260409020546001600160a01b03166111a45760405162461bcd60e51b81526004016103a690614e4a565b6111ac613a9e565b5060008a815260076020908152604091829020825161010080820185528254808352600184015460ff811615159584019590955293046001600160a01b039081169482019490945260028201548416606082015260038201549093166080840152600481015460a0840152600581015460c08401526006015460e08301526112465760405162461bcd60e51b81526004016103a690614e9a565b60006112618260600151836080015189602001358c8e6114e3565b9050806112805760405162461bcd60e51b81526004016103a690614e3a565b6112e2828c8c848d611297368f90038f018f6140cf565b6112a6368f90038f018f6140ed565b8d8d8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152506118e992505050565b6001600055909d909c509a5050505050505050505050565b60008215610b62578115611324576113218368056bc75e2d6310000063ffffffff61167616565b92505b8360008361133a576113358261161c565b611343565b61134382611652565b9050801561135e5761135b828263ffffffff61181116565b91505b866001600160a01b0316886001600160a01b0316141561139c57611395856110518468056bc75e2d6310000063ffffffff61179516565b9250611463565b600254604051630a7549df60e21b815260009182916001600160a01b03909116906329d5277c906113d3908c908e906004016149e2565b604080518083038186803b1580156113ea57600080fd5b505afa1580156113fe573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250611422919081019061412a565b91509150806000146114605761145d816110518981866114518a68056bc75e2d6310000063ffffffff61179516565b9063ffffffff61179516565b94505b50505b505095945050505050565b6014546001600160a01b031681565b601b5481565b60285481565b611491610d74565b6114ad5760405162461bcd60e51b81526004016103a690614e6a565b6114b681611be0565b50565b60395481565b60215481565b602e546001600160a01b031681565b6030546001600160a01b031681565b6000846001600160a01b0316866001600160a01b031614156115235761151c68056bc75e2d63100000611051868663ffffffff61179516565b90506115de565b600254604051630a7549df60e21b815260009182916001600160a01b03909116906329d5277c9061155a908a908c906004016149e2565b604080518083038186803b15801561157157600080fd5b505afa158015611585573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506115a9919081019061412a565b91509150816000146115db576115d868056bc75e2d631000006110518761145186838c8863ffffffff61179516565b92505b50505b8180156115ea57508015155b15610b62576110f081611610856110518368056bc75e2d6310000063ffffffff61179516565b9063ffffffff61167616565b600061164c68056bc75e2d631000006116406018548561179590919063ffffffff16565b9063ffffffff611c6216565b92915050565b600061164c68056bc75e2d63100000611640601b548561179590919063ffffffff16565b60008282018381101561169b5760405162461bcd60e51b81526004016103a690614d8a565b9392505050565b6000848152600a602090815260408083206001600160a01b038681168086529190935292819020805460ff1916851515179055519085169086907f0eef4f90457a741c97d76fcf13fa231fefdcc7649bdb3cb49157c37111c9843390611709908690614bf7565b60405180910390a450505050565b3390565b6001600160e01b03198216600090815260056020526040902080546001600160a01b0319166001600160a01b0383169081179091551561177657611770600d6001600160e01b0319841663ffffffff611ca416565b50611791565b610bdf600d6001600160e01b0319841663ffffffff611cec16565b5050565b6000826117a45750600061164c565b828202828482816117b157fe5b041461169b5760405162461bcd60e51b81526004016103a690614e5a565b600061169b83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f000000000000815250611dad565b600061169b83836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f770000815250611de4565b604051636dcd64e560e01b815260009073__$6b3065420287e4be5d93089ad806c078e3$__90636dcd64e59061189190879087908790600401614a32565b60206040518083038186803b1580156118a957600080fd5b505af41580156118bd573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506118e1919081019061410c565b949350505050565b60008089606001516001600160a01b03168a608001516001600160a01b031614156119265760405162461bcd60e51b81526004016103a690614daa565b8960a0015186101561194a5760405162461bcd60e51b81526004016103a690614f2a565b60e08a015115158061195f5750604084015115155b61197b5760405162461bcd60e51b81526004016103a690614d4a565b60008861198957600061198f565b84602001515b90506000600660006119a88e8e8c8c8c60200151611e10565b8152602001908152602001600020905060006119d38d8389600001518a602001518b60400151612202565b60608801519091506119eb908263ffffffff61181116565b60608801528a15611a7b57606087015115611a185760405162461bcd60e51b81526004016103a690614e0a565b6000611a278860800151611652565b905060008e60800151905060008f60600151905082600014611a7357611a588b60200151866000015484848761241e565b60808a0151611a6d908463ffffffff61181116565b60808b01525b505050611a8b565b611a888c8e8a8a8a6124bd565b96505b60408051610180810182528354815260018401546020820152600284015491810191909152600383015460ff16151560608201526004830154608080830191909152600584015460a0830152600684015460c0830152600784015460e083015260088401546101008301526009840154610120830152600a8401546001600160a01b03908116610140840152600b85015416610160830152880151611b35918f918c908e88612540565b611b515760405162461bcd60e51b81526004016103a690614e7a565b60808701516005830154611b6a9163ffffffff61167616565b60058301558a15611b94576007820154611b8a904263ffffffff61181116565b60e0880152611bb5565b611bae6f4b3b4ca85a86c47a098a2240000000008a6117cf565b6101008801525b611bc28d838a8a8f61265b565b86602001518760800151945094505050509850989650505050505050565b6001600160a01b038116611c065760405162461bcd60e51b81526004016103a690614d5a565b6001546040516001600160a01b038084169216907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a3600180546001600160a01b0319166001600160a01b0392909216919091179055565b600061169b83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f00000000000081525061292e565b6000611cb08383612978565b611ce4575060018083018054808301808355600092835260208084209092018590558483529085905260409091205561164c565b50600061164c565b6000611cf88383612978565b15611ce45760008281526020849052604090205460018401546000199182019101808214611d70576000856001018281548110611d3157fe5b9060005260206000200154905080866001018481548110611d4e57fe5b6000918252602080832090910192909255918252869052604090206001830190555b60008481526020869052604081205560018501805480611d8c57fe5b6001900381819060005260206000200160009055905560019250505061164c565b60008183611dce5760405162461bcd60e51b81526004016103a69190614d09565b506000838581611dda57fe5b0495945050505050565b60008184841115611e085760405162461bcd60e51b81526004016103a69190614d09565b505050900390565b60008560200151611e335760405162461bcd60e51b81526004016103a690614eca565b825160208401516060850151611e47613ae2565b88611f9e576001600160a01b0383166000908152602a60209081526040918290208054600101908190558c519251611e86939288928892909101614980565b60408051601f1981840301815291815281516020928301206000818152600690935291205490995015611ecb5760405162461bcd60e51b81526004016103a690614dfa565b5060408051610180810182528981528a5160208201526000918101829052600160608201526080810187905260a081018290524260c082015260e0810182905261010081018990526101208101919091526001600160a01b038084166101408301528416610160820152611f46600f8a63ffffffff611ca416565b506001600160a01b0384166000908152601160205260409020611f6f908a63ffffffff611ca416565b506001600160a01b0383166000908152601260205260409020611f98908a63ffffffff611ca416565b5061211f565b5060008881526006602081815260409283902083516101808101855281548152600182015492810192909252600281015493820193909352600383015460ff161580156060830181905260048501546080840152600585015460a08401529284015460c0830152600784015460e083015260088401546101008301526009840154610120830152600a8401546001600160a01b03908116610140840152600b909401549093166101608201529161205857508060e0015142105b6120745760405162461bcd60e51b81526004016103a690614e1a565b826001600160a01b03168161014001516001600160a01b0316146120aa5760405162461bcd60e51b81526004016103a690614d7a565b836001600160a01b03168161016001516001600160a01b0316146120e05760405162461bcd60e51b81526004016103a690614dda565b89516020820151146121045760405162461bcd60e51b81526004016103a690614d1a565b6080810151612119908763ffffffff61167616565b60808201525b6001600160a01b0382161561213b5761213b89848460016116a2565b60008981526006602081815260409283902084518155908401516001820155918301516002830155606083015160038301805460ff19169115159190911790556080830151600483015560a0830151600583015560c08301519082015560e0820151600782015561010082015160088201556101208201516009820155610140820151600a820180546001600160a01b03199081166001600160a01b039384161790915561016090930151600b909201805490931691161790555095979650505050505050565b600b8401546060860151600091612224916001600160a01b039091169061298d565b84546000818152600c60209081526040808320600b808b01546001600160a01b03908116865290845282852060608d0180518316875294529190932060e08b0151925160808c0151600a8c0154959692956122859488949392911642612a6b565b6000811580156122985750600789015415155b156122c6576122c3620151806110518660000154611451428e6007015461181190919063ffffffff16565b90505b60006122e66907baab4146b63dd000006110518a8c63ffffffff61179516565b85549091506122fb908263ffffffff61167616565b85556001840154612312908263ffffffff61167616565b60018501558261238157845461233f90429061161090611051620151806114518d8963ffffffff61167616565b60078b01819055612356904263ffffffff61181116565b9250610e1083116123795760405162461bcd60e51b81526004016103a690614d9a565b8695506123c5565b60078a01546123a05761239a428463ffffffff61167616565b60078b01555b6123c26201518061105183611451428f6007015461181190919063ffffffff16565b95505b60018501546123da908763ffffffff61167616565b600186015583546123f1908963ffffffff61167616565b84556002840154612408908763ffffffff61167616565b8460020181905550505050505095945050505050565b80156124b6576001600160a01b0383166000908152601c602052604090205461244d908263ffffffff61167616565b6001600160a01b038085166000818152601c6020526040908190209390935591518692918816907ffb6c38ae4fdd498b3a5003f02ca4ca5340dfedb36b1b100c679eb60633b2c0a7906124a1908690614f58565b60405180910390a46124b68585858585612ab9565b5050505050565b6124c5613b46565b60006124ea87876060015188608001518860200151886060015160008060008b612f1f565b60c0870152506080850151909150612508908263ffffffff61167616565b608085015260a084015160c085015110156125355760405162461bcd60e51b81526004016103a690614d6a565b509195945050505050565b600061256868056bc75e2d631000006110518568055005f0c61448000063ffffffff61179516565b92508284101561264e5760a0860151156126465760025460608801516080808a0151908901516000936001600160a01b03169263f80b25fb9290916125b3908863ffffffff61181116565b8b60a001518b6040518663ffffffff1660e01b81526004016125d9959493929190614a82565b60206040518083038186803b1580156125f157600080fd5b505afa158015612605573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250612629919081019061410c565b90508361263c868363ffffffff61167616565b10159150506110f0565b5060006110f0565b5060019695505050505050565b6002546060860151608087015160048088015460058901546040516317f8680960e11b815260009687966001600160a01b0390911695632ff0d012956126a5959294919301614a5a565b604080518083038186803b1580156126bc57600080fd5b505afa1580156126d0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506126f4919081019061412a565b915091508660c00151821161271b5760405162461bcd60e51b81526004016103a690614e8a565b4286600601541415612881576002546060880151608089015160405163524efd4b60e01b81526000936001600160a01b03169263524efd4b92612760926004016149e2565b60206040518083038186803b15801561277857600080fd5b505afa15801561278c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506127b0919081019061410c565b60025460808a015160608b015160405163524efd4b60e01b81529394506000936001600160a01b039093169263524efd4b926127f09290916004016149e2565b60206040518083038186803b15801561280857600080fd5b505afa15801561281c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250612840919081019061410c565b90506000612854838363ffffffff61179516565b9050856128765760c087015161287190829063ffffffff6117cf16565b612878565b835b60098a01555050505b60408051610180810182528754815260018801546020820152600288015491810191909152600387015460ff161515606082015260048701546080820152600587015460a0820152600687015460c0820152600787015460e082015260088701546101008201526009870154610120820152600a8701546001600160a01b03908116610140830152600b88015416610160820152612925908890878785878961307d565b50505050505050565b6000818361294f5760405162461bcd60e51b81526004016103a69190614d09565b508361295d5750600061169b565b600083600186038161296b57fe5b0460010195945050505050565b60009081526020919091526040902054151590565b6001600160a01b038083166000908152600b6020908152604080832093851683529290529081206001810154909190158015906129cd5750600482015415155b15612a5e576129f862015180611051846001015461145186600401544261181190919063ffffffff16565b4260048401556002830154909150811115612a14575060028101545b8015612a59576003820154612a2f908263ffffffff61167616565b60038301556002820154612a49908263ffffffff61181116565b6002830155612a598484836131b4565b612a65565b4260048301555b50505050565b6000612aa16a07259756a8d619980000006110516015546114518b600001546114518d600201548961181190919063ffffffff16565b60028801839055905080156129255761292583878787855b602f546002546001600160a01b038581166000908152603c602090815260408083208885168452909152812054909392919091169015612b1c576001600160a01b038087166000908152603c602090815260408083209389168352929052205491505b6037546000906060906001600160a01b038085169163d138f9a160e01b918b9116612b5a68056bc75e2d631000006110518c8b63ffffffff61179516565b604051602401612b6c93929190614a32565b60408051601f198184030181529181526020820180516001600160e01b03166001600160e01b0319909416939093179092529051612baa91906149c8565b600060405180830381855afa9150503d8060008114612be5576040519150601f19603f3d011682016040523d82523d6000602084013e612bea565b606091505b50915091506001821415612c0057602081015194505b6000306001600160a01b031663c22552f76040518163ffffffff1660e01b815260040160206040518083038186803b158015612c3b57600080fd5b505afa158015612c4f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250612c73919081019061410c565b90508515801590612c845750858110155b15612eac5760375460385460405163095ea7b360e01b81526001600160a01b039283169263095ea7b392612cbf929116908a90600401614bc1565b602060405180830381600087803b158015612cd957600080fd5b505af1158015612ced573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250612d119190810190613f4e565b50603854603f546040516000926001600160a01b031691612d38918f918b91602401614bdc565b60408051601f198184030181529181526020820180516001600160e01b0316630efe6a8b60e01b17905251612d6d91906149c8565b6000604051808303816000865af19150503d8060008114612daa576040519150601f19603f3d011682016040523d82523d6000602084013e612daf565b606091505b505090508015612e3e57601f54612dcc908863ffffffff61167616565b601f819055508a603760009054906101000a90046001600160a01b03166001600160a01b03168d6001600160a01b03167ff41c644671512f1cda76abfe6038e3d7d526c1377a5a8c692f81703901db2150898b603f54604051612e3193929190614f74565b60405180910390a4612ea6565b8a603760009054906101000a90046001600160a01b03166001600160a01b03168d6001600160a01b03167f483f67ea49f76ac15e15bbad68b52788ca47d50aef1e4acfe95e5e307e710812898b603f54604051612e9d93929190614f74565b60405180910390a45b50612f12565b8515801590612eba57508581105b15612f1257603754603f546040518c926001600160a01b0390811692908f16917f483f67ea49f76ac15e15bbad68b52788ca47d50aef1e4acfe95e5e307e71081291612f09918b918d91614f74565b60405180910390a45b5050505050505050505050565b6040805160a0810182526001600160a01b03808b16825289811660208084019190915230838501819052606080850191909152918a16608084015283519182018452888252810187905291820185905260009182918291612f8491908e888886613259565b9093509150612f938b8361347e565b600254602754604051631e2c62d360e01b81526001600160a01b0390921691631e2c62d391612fcc918f918f9188918a91600401614a82565b60206040518083038186803b158015612fe457600080fd5b505afa158015612ff8573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061301c919081019061410c565b9050896001600160a01b03168b6001600160a01b03168d7fb4eb3c9b62efcce7021cba5fd9cd0c44df91c2272806ccc5e57df7c912e8d7168c868860405161306693929190614bdc565b60405180910390a499509950999650505050505050565b801561310657856000015185600001516001600160a01b031686602001516001600160a01b03167f7bd8cbb7ba34b33004f3deda0fd36c92fc0360acbd97843360037b467a538f908a606001518b6080015189602001518a608001518b600001518c60e001518c8c6040516130f9989796959493929190614ac4565b60405180910390a4612925565b6131206f4b3b4ca85a86c47a098a224000000000836117cf565b9150856000015185600001516001600160a01b031686602001516001600160a01b03167ff640c1cfe1a912a0b0152b5a542e5c2403142eed75b06cde526cee54b1580e5c8a608001518b6060015189608001518a602001518b600001518e60e001518d60c001518e61010001518d6040516131a399989796959493929190614b3b565b60405180910390a450505050505050565b60006131d868056bc75e2d631000006110516015548561179590919063ffffffff16565b90506131e584848361354c565b6131ff83856131fa858563ffffffff61181116565b6135da565b6001600160a01b038085169084167f220e66e3e759e1382aa86cd8af5abca05ebf3ad564f223ae62d977678337272a61323e858563ffffffff61181116565b60405161324b9190614f58565b60405180910390a350505050565b845160009081901515806132705750602087015115155b61328c5760405162461bcd60e51b81526004016103a690614eba565b602087015161329d57865160208801525b6020870151875111156132c25760405162461bcd60e51b81526004016103a690614dea565b60008060008761337f5760408a015161333e5785156132f3576132ec8a60005b602002015161363d565b9050613307565b6133048a60005b602002015161161c565b90505b80156133395760808b01518b5161332a91908b908e60015b602002015185613661565b89516133369082611811565b8a525b61337f565b85156133565761334f8a60026132e2565b9050613364565b6133618a60026132fa565b90505b801561337f5760408a01516133799082611676565b60408b01525b86511561339e5760405162461bcd60e51b81526004016103a690614eea565b6133a88b8b6137b1565b60408c015191945092506133f457895182146133d65760405162461bcd60e51b81526004016103a690614f1a565b80156133ef576133ec828263ffffffff61167616565b91505b61346e565b60208a01518211156134185760405162461bcd60e51b81526004016103a690614dca565b60408a015183101561343c5760405162461bcd60e51b81526004016103a690614d3a565b801561346e5760808b015160208c015161345b91908b908e600061331f565b61346b838263ffffffff61181116565b92505b5090999098509650505050505050565b6029548015610bdf57602d546000906001600160a01b03858116911614156134a757508161352c565b600254604051635967aa7560e11b81526001600160a01b039091169063b2cf54ea906134d99087908790600401614bc1565b60206040518083038186803b1580156134f157600080fd5b505afa158015613505573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250613529919081019061410c565b90505b81811115612a655760405162461bcd60e51b81526004016103a690614e2a565b8015610bdf576001600160a01b03821660009081526016602052604090205461357b908263ffffffff61167616565b6001600160a01b0380841660008181526016602052604090819020939093559151908516907f40a75ae5f7a5336e75f7c7977e12c4b46a9ac0f30de01a2d5b6c1a4f4af63587906135cd908590614f58565b60405180910390a3505050565b8015610bdf576135fa6001600160a01b038416838363ffffffff61389b16565b816001600160a01b0316836001600160a01b03167fc44aeefa68e8b9c1ad5f7be4b0dd194580f81f5c362862e72196503a320eb7a1836040516135cd9190614f58565b600061164c68056bc75e2d63100000611640603e548561179590919063ffffffff16565b8080156137a9576001600160a01b038681166000908152603360205260409020541615613717576001600160a01b038087166000908152603360205260409020546136af91168786846138f4565b50506137146136d668056bc75e2d631000006110516039548561179590919063ffffffff16565b6137086136fb68056bc75e2d631000006110516020548761179590919063ffffffff16565b849063ffffffff61181116565b9063ffffffff61181116565b90505b6001600160a01b038416600090815260196020526040902054613740908263ffffffff61167616565b6001600160a01b03808616600081815260196020526040908190209390935591518792918916907fb23479169712c443e6b00fb0cec3506a5f5926f541df4243d313e11c8c5c71ed90613794908690614f58565b60405180910390a46137a98686868686612ab9565b505050505050565b6000806137bc613b92565b84516001600160a01b039081168252602080870151821683820152604080880151831681850152606080890151909316928401929092528551608084015285015160a08301528481015160c0830152516335aaa79d60e01b815273__$6b3065420287e4be5d93089ad806c078e3$__906335aaa79d90613840908490600401614f4a565b604080518083038186803b15801561385757600080fd5b505af415801561386b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061388f919081019061412a565b90969095509350505050565b604051610bdf90849063a9059cbb60e01b906138bd9086908690602401614bc1565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b031990931692909217909152613980565b6040516306a688ff60e11b815260009081903090630d4d11fe906139229089908990899089906004016149fd565b6040805180830381600087803b15801561393b57600080fd5b505af115801561394f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250613973919081019061412a565b9097909650945050505050565b613992826001600160a01b0316613a65565b6139ae5760405162461bcd60e51b81526004016103a690614f3a565b60006060836001600160a01b0316836040516139ca91906149c8565b6000604051808303816000865af19150503d8060008114613a07576040519150601f19603f3d011682016040523d82523d6000602084013e613a0c565b606091505b509150915081613a2e5760405162461bcd60e51b81526004016103a690614dba565b805115612a655780806020019051613a499190810190613f4e565b612a655760405162461bcd60e51b81526004016103a690614efa565b6000813f7fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a4708181148015906118e1575050151592915050565b6040805161010081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e081019190915290565b6040805161018081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e0810182905261010081018290526101208101829052610140810182905261016081019190915290565b6040518061012001604052806000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b6040805160e081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c081019190915290565b803561164c816150b4565b803561164c816150c8565b805161164c816150c8565b803561164c816150d1565b803561164c816150da565b60008083601f840112613c1757600080fd5b50813567ffffffffffffffff811115613c2f57600080fd5b602083019150836001820283011115613c4757600080fd5b9250929050565b600060808284031215613c6057600080fd5b50919050565b600060808284031215613c7857600080fd5b613c826080614ff7565b90506000613c908484613bce565b8252506020613ca184848301613bce565b6020830152506040613cb584828501613bce565b6040830152506060613cc984828501613bce565b60608301525092915050565b60006101208284031215613c6057600080fd5b60006101208284031215613cfb57600080fd5b613d06610120614ff7565b90506000613d148484613bef565b8252506020613d2584848301613bef565b6020830152506040613d3984828501613bef565b6040830152506060613d4d84828501613bef565b6060830152506080613d6184828501613bef565b60808301525060a0613d7584828501613bef565b60a08301525060c0613d8984828501613bef565b60c08301525060e0613d9d84828501613bef565b60e083015250610100613db284828501613bef565b6101008301525092915050565b805161164c816150d1565b600060208284031215613ddc57600080fd5b60006118e18484613bce565b60008060408385031215613dfb57600080fd5b6000613e078585613bce565b9250506020613e1885828601613bce565b9150509250929050565b600080600080600060a08688031215613e3a57600080fd5b6000613e468888613bce565b9550506020613e5788828901613bce565b9450506040613e6888828901613bef565b9350506060613e7988828901613bef565b9250506080613e8a88828901613bd9565b9150509295509295909350565b60008060008060008060c08789031215613eb057600080fd5b6000613ebc8989613bce565b9650506020613ecd89828a01613bce565b9550506040613ede89828a01613bef565b9450506060613eef89828a01613bef565b9350506080613f0089828a01613bef565b92505060a0613f1189828a01613bef565b9150509295509295509295565b60008060408385031215613f3157600080fd5b6000613f3d8585613bce565b9250506020613e1885828601613bef565b600060208284031215613f6057600080fd5b60006118e18484613be4565b600060208284031215613f7e57600080fd5b60006118e18484613bef565b60008060408385031215613f9d57600080fd5b6000613e078585613bef565b600080600060608486031215613fbe57600080fd5b6000613fca8686613bef565b9350506020613fdb86828701613bce565b9250506040613fec86828701613bd9565b9150509250925092565b600080600080600080600080610240898b03121561401357600080fd5b600061401f8b8b613bef565b98505060206140308b828c01613bef565b97505060406140418b828c01613bd9565b96505060606140528b828c01613bef565b95505060806140638b828c01613c4e565b9450506101006140758b828c01613cd5565b93505061022089013567ffffffffffffffff81111561409357600080fd5b61409f8b828c01613c05565b92509250509295985092959890939650565b6000602082840312156140c357600080fd5b60006118e18484613bfa565b6000608082840312156140e157600080fd5b60006118e18484613c66565b6000610120828403121561410057600080fd5b60006118e18484613ce8565b60006020828403121561411e57600080fd5b60006118e18484613dbf565b6000806040838503121561413d57600080fd5b60006141498585613dbf565b9250506020613e1885828601613dbf565b61416381615030565b82525050565b61416361417582615030565b615093565b6141638161503b565b61416381615040565b61416361419882615040565b615040565b60006141a88261501e565b6141b28185615022565b93506141c2818560208601615067565b9290920192915050565b6141638161505c565b60006141e08261501e565b6141ea8185615027565b93506141fa818560208601615067565b614203816150a4565b9093019392505050565b600061421a601383615027565b720d8dec2dca0c2e4c2dae640dad2e6dac2e8c6d606b1b815260200192915050565b6000614249600683615027565b6514185d5cd95960d21b815260200192915050565b600061426b601b83615027565b7f696e73756666696369656e742073776170206c69717569646974790000000000815260200192915050565b60006142a4601083615027565b6f1a5b9d985b1a59081a5b9d195c995cdd60821b815260200192915050565b60006142d0602683615027565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206181526564647265737360d01b602082015260400192915050565b6000614318601d83615027565b7f656e7472792070726963652061626f766520746865206d696e696d756d000000815260200192915050565b6000614351601183615027565b700c4dee4e4deeecae440dad2e6dac2e8c6d607b1b815260200192915050565b600061437e601b83615027565b7f536166654d6174683a206164646974696f6e206f766572666c6f770000000000815260200192915050565b60006143b7600e83615027565b6d1b1bd85b881d1bdbc81cda1bdc9d60921b815260200192915050565b60006143e1601583615027565b740c6ded8d8c2e8cae4c2d85ed8dec2dc40dac2e8c6d605b1b815260200192915050565b6000614412602083615027565b7f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815260200192915050565b600061444b601383615027565b72737761702066696c6c20746f6f206c6172676560681b815260200192915050565b600061447a600f83615027565b6e0d8cadcc8cae440dad2e6dac2e8c6d608b1b815260200192915050565b60006144a5601c83615027565b7f736f75726365416d6f756e74206c6172676572207468616e206d617800000000815260200192915050565b60006144de600b83615027565b6a6c6f616e2065786973747360a81b815260200192915050565b6000614505601283615027565b7139bab938363ab9903637b0b7103a37b5b2b760711b815260200192915050565b6000614533600e83615027565b6d1b1bd85b881a185cc8195b99195960921b815260200192915050565b600061455d600e83615027565b6d7377617020746f6f206c6172676560901b815260200192915050565b6000614587600f83615027565b6e0636f6c6c61746572616c206973203608c1b815260200192915050565b60006145b2600e83615027565b6d1b9bdd08185d5d1a1bdc9a5e995960921b815260200192915050565b60006145dc602183615027565b7f536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f8152607760f81b602082015260400192915050565b600061461f600c83615027565b6b1d5b985d5d1a1bdc9a5e995960a21b815260200192915050565b6000614647601783615027565b7f636f6c6c61746572616c20696e73756666696369656e74000000000000000000815260200192915050565b6000614680601283615027565b713ab73432b0b63a343c903837b9b4ba34b7b760711b815260200192915050565b60006146ae601583615027565b746c6f616e506172616d73206e6f742065786973747360581b815260200192915050565b60006146df601483615027565b7319985b1b189858dac81b9bdd08185b1b1bddd95960621b815260200192915050565b600061470f602e83615027565b7f6d696e206f72206d617820736f7572636520746f6b656e20616d6f756e74206e81526d1959591cc81d1bc81899481cd95d60921b602082015260400192915050565b600061475f601383615027565b721b1bd85b94185c985b5cc8191a5cd8589b1959606a1b815260200192915050565b600061478e600c83615027565b6b1b9bdb9499595b9d1c985b9d60a21b815260200192915050565b60006147b6600d83615027565b6c696e76616c696420737461746560981b815260200192915050565b60006147df602a83615027565b7f5361666545524332303a204552433230206f7065726174696f6e20646964206e8152691bdd081cdd58d8d9595960b21b602082015260400192915050565b600061482b602183615027565b7f6c6f616e446174614279746573207265717569726564207769746820657468658152603960f91b602082015260400192915050565b600061486e601683615027565b751cddd85c081d1bdbc81b185c99d9481d1bc8199a5b1b60521b815260200192915050565b60006148a0601583615027565b74696e697469616c4d617267696e20746f6f206c6f7760581b815260200192915050565b60006148d1601f83615027565b7f5361666545524332303a2063616c6c20746f206e6f6e2d636f6e747261637400815260200192915050565b805160e083019061490e848261415a565b506020820151614921602085018261415a565b506040820151614934604085018261415a565b506060820151614947606085018261415a565b50608082015161495a6080850182614183565b5060a082015161496d60a0850182614183565b5060c0820151612a6560c0850182614183565b600061498c828761418c565b60208201915061499c8286614169565b6014820191506149ac8285614169565b6014820191506149bc828461418c565b50602001949350505050565b600061169b828461419d565b6020810161164c828461415a565b604081016149f0828561415a565b61169b602083018461415a565b60808101614a0b828761415a565b614a18602083018661415a565b614a25604083018561415a565b610b626060830184614183565b60608101614a40828661415a565b614a4d602083018561415a565b6118e16040830184614183565b60808101614a68828761415a565b614a75602083018661415a565b614a256040830185614183565b60a08101614a90828861415a565b614a9d602083018761415a565b614aaa6040830186614183565b614ab76060830185614183565b6110f06080830184614183565b6101008101614ad3828b61415a565b614ae0602083018a61415a565b614aed6040830189614183565b614afa6060830188614183565b614b076080830187614183565b614b1460a0830186614183565b614b2160c0830185614183565b614b2e60e0830184614183565b9998505050505050505050565b6101208101614b4a828c61415a565b614b57602083018b61415a565b614b64604083018a614183565b614b716060830189614183565b614b7e6080830188614183565b614b8b60a0830187614183565b614b9860c0830186614183565b614ba560e0830185614183565b614bb3610100830184614183565b9a9950505050505050505050565b60408101614bcf828561415a565b61169b6020830184614183565b60608101614bea828661415a565b614a4d6020830185614183565b6020810161164c828461417a565b6101008101614c14828b614183565b614c21602083018a61417a565b614c2e604083018961415a565b614c3b606083018861415a565b614b07608083018761415a565b6101808101614c57828f614183565b614c64602083018e614183565b614c71604083018d614183565b614c7e606083018c61417a565b614c8b608083018b614183565b614c9860a083018a614183565b614ca560c0830189614183565b614cb260e0830188614183565b614cc0610100830187614183565b614cce610120830186614183565b614cdc61014083018561415a565b614cea61016083018461415a565b9d9c50505050505050505050505050565b6020810161164c82846141cc565b6020808252810161169b81846141d5565b6020808252810161164c8161420d565b6020808252810161164c8161423c565b6020808252810161164c8161425e565b6020808252810161164c81614297565b6020808252810161164c816142c3565b6020808252810161164c8161430b565b6020808252810161164c81614344565b6020808252810161164c81614371565b6020808252810161164c816143aa565b6020808252810161164c816143d4565b6020808252810161164c81614405565b6020808252810161164c8161443e565b6020808252810161164c8161446d565b6020808252810161164c81614498565b6020808252810161164c816144d1565b6020808252810161164c816144f8565b6020808252810161164c81614526565b6020808252810161164c81614550565b6020808252810161164c8161457a565b6020808252810161164c816145a5565b6020808252810161164c816145cf565b6020808252810161164c81614612565b6020808252810161164c8161463a565b6020808252810161164c81614673565b6020808252810161164c816146a1565b6020808252810161164c816146d2565b6020808252810161164c81614702565b6020808252810161164c81614752565b6020808252810161164c81614781565b6020808252810161164c816147a9565b6020808252810161164c816147d2565b6020808252810161164c8161481e565b6020808252810161164c81614861565b6020808252810161164c81614893565b6020808252810161164c816148c4565b60e0810161164c82846148fd565b6020810161164c8284614183565b60408101614bcf8285614183565b60608101614bea8286614183565b60a08101614f908288614183565b614a9d6020830187614183565b60c08101614fab8289614183565b614fb86020830188614183565b614fc56040830187614183565b614fd26060830186614183565b614fdf6080830185614183565b614fec60a0830184614183565b979650505050505050565b60405181810167ffffffffffffffff8111828210171561501657600080fd5b604052919050565b5190565b919050565b90815260200190565b600061164c82615050565b151590565b90565b6001600160e01b03191690565b6001600160a01b031690565b600061164c82615030565b60005b8381101561508257818101518382015260200161506a565b83811115612a655750506000910152565b600061164c82600061164c826150ae565b601f01601f191690565b60601b90565b6150bd81615030565b81146114b657600080fd5b6150bd8161503b565b6150bd81615040565b6150bd8161504356fea365627a7a7231582006262a07965035f357589c6bb924f7de44a817506b83c56eb712cec5934fdd626c6578706572696d656e74616cf564736f6c63430005110040",
  "libraries": {
    "SwapsImplSovrynSwapLib": "0x98399051DC17bAFb621269A12a63d70b2D615C69"
  },
  "devdoc": {
    "methods": {
      "borrowOrTradeFromPool(bytes32,bytes32,bool,uint256,(address,address,address,address),(uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256),bytes)": {
        "details": "Note: Only callable by loan pools (iTokens). Wrapper to _borrowOrTrade internal function.",
        "params": {
          "initialMargin": "The initial amount of margin.",
          "isTorqueLoan": "Whether the loan is a Torque loan.",
          "loanDataBytes": "The payload for the call. These loan DataBytes are  additional loan data (not in use for token swaps).",
          "loanId": "The ID of the loan. If 0, start a new loan.",
          "loanParamsId": "The ID of the loan parameters.",
          "sentAddresses": "The addresses to send tokens: lender, borrower,  receiver and manager:    lender: must match loan if loanId provided.    borrower: must match loan if loanId provided.    receiver: receiver of funds (address(0) assumes borrower address).    manager: delegated manager of loan unless address(0).",
          "sentValues": "The values to send:    interestRate: New loan interest rate.    newPrincipal: New loan size (borrowAmount + any borrowed interest).    interestInitialAmount: New amount of interest to escrow for Torque loan (determines initial loan length).    loanTokenReceived: Total loanToken deposit (amount not sent to borrower in the case of Torque loans).    collateralTokenSent: Total collateralToken deposit.    minEntryPrice: Minimum entry price for checking price divergence (Value of loan token in collateral)."
        },
        "return": "newPrincipal The new loan size.newCollateral The new collateral amount."
      },
      "getBorrowAmount(address,address,uint256,uint256,bool)": {
        "details": "Basically borrowAmount = collateral / marginAmount     * Collateral is something that helps secure a loan. When you borrow money, you agree that your lender can take something and sell it to get their money back if you fail to repay the loan. That's the collateral.",
        "params": {
          "collateralToken": "The collateral token instance address.",
          "collateralTokenAmount": "The amount of collateral.",
          "isTorqueLoan": "Whether the loan is a Torque loan.",
          "loanToken": "The loan token instance address.",
          "marginAmount": "The amount of margin of the trade."
        },
        "return": "borrowAmount The borrow amount."
      },
      "getEstimatedMarginExposure(address,address,uint256,uint256,uint256,uint256)": {
        "params": {
          "collateralToken": "The collateral token instance address.",
          "collateralTokenSent": "The amount of collateral tokens sent.",
          "interestRate": "The interest rate. Percentage w/ 18 decimals.",
          "loanToken": "The loan token instance address.",
          "loanTokenSent": "The amount of loan tokens sent.",
          "newPrincipal": "The updated amount of principal (current debt)."
        },
        "return": "The margin exposure."
      },
      "getRequiredCollateral(address,address,uint256,uint256,bool)": {
        "details": "Calls internal _getRequiredCollateral and add fees.",
        "params": {
          "collateralToken": "The collateral token instance address.",
          "isTorqueLoan": "Whether the loan is a Torque loan.",
          "loanToken": "The loan token instance address.",
          "marginAmount": "The amount of margin of the trade.",
          "newPrincipal": "The updated amount of principal (current debt)."
        },
        "return": "collateralAmountRequired The required collateral."
      },
      "initialize(address)": {
        "params": {
          "target": "The address of the target contract."
        }
      },
      "isOwner()": {
        "details": "Returns true if the caller is the current owner."
      },
      "owner()": {
        "details": "Returns the address of the current owner."
      },
      "setDelegatedManager(bytes32,address,bool)": {
        "details": "Wrapper for _setDelegatedManager internal function.",
        "params": {
          "delegated": "The address of the delegated manager.",
          "loanId": "The ID of the loan. If 0, start a new loan.",
          "toggle": "The flag true/false for the delegated manager."
        }
      },
      "transferOwnership(address)": {
        "details": "Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner."
      }
    },
    "title": "Loan Openings contract."
  },
  "userdoc": {
    "methods": {
      "borrowOrTradeFromPool(bytes32,bytes32,bool,uint256,(address,address,address,address),(uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256),bytes)": {
        "notice": "Borrow or trade from pool."
      },
      "getBorrowAmount(address,address,uint256,uint256,bool)": {
        "notice": "Get the borrow amount of a trade loan."
      },
      "getEstimatedMarginExposure(address,address,uint256,uint256,uint256,uint256)": {
        "notice": "Get the estimated margin exposure.     * Margin is the money borrowed from a broker to purchase an investment and is the difference between the total value of investment and the loan amount. Margin trading refers to the practice of using borrowed funds from a broker to trade a financial asset, which forms the collateral for the loan from the broker."
      },
      "getRequiredCollateral(address,address,uint256,uint256,bool)": {
        "notice": "Get the required collateral."
      },
      "initialize(address)": {
        "notice": "Set function selectors on target contract."
      },
      "setDelegatedManager(bytes32,address,bool)": {
        "notice": "Set the delegated manager."
      }
    },
    "notice": "This contract code comes from bZx. bZx is a protocol for tokenized margin trading and lending https://bzx.network similar to the dYdX protocol. * This contract contains functions to borrow and trade."
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 54832,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "reentrancyLock",
        "offset": 0,
        "slot": "0",
        "type": "t_uint256"
      },
      {
        "astId": 54648,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "_owner",
        "offset": 0,
        "slot": "1",
        "type": "t_address"
      },
      {
        "astId": 6188,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "priceFeeds",
        "offset": 0,
        "slot": "2",
        "type": "t_address"
      },
      {
        "astId": 6190,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "swapsImpl",
        "offset": 0,
        "slot": "3",
        "type": "t_address"
      },
      {
        "astId": 6192,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "sovrynSwapContractRegistryAddress",
        "offset": 0,
        "slot": "4",
        "type": "t_address"
      },
      {
        "astId": 6196,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "logicTargets",
        "offset": 0,
        "slot": "5",
        "type": "t_mapping(t_bytes4,t_address)"
      },
      {
        "astId": 6200,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "loans",
        "offset": 0,
        "slot": "6",
        "type": "t_mapping(t_bytes32,t_struct(Loan)6566_storage)"
      },
      {
        "astId": 6204,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "loanParams",
        "offset": 0,
        "slot": "7",
        "type": "t_mapping(t_bytes32,t_struct(LoanParams)6538_storage)"
      },
      {
        "astId": 6210,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "lenderOrders",
        "offset": 0,
        "slot": "8",
        "type": "t_mapping(t_address,t_mapping(t_bytes32,t_struct(Order)6582_storage))"
      },
      {
        "astId": 6216,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "borrowerOrders",
        "offset": 0,
        "slot": "9",
        "type": "t_mapping(t_address,t_mapping(t_bytes32,t_struct(Order)6582_storage))"
      },
      {
        "astId": 6222,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "delegatedManagers",
        "offset": 0,
        "slot": "10",
        "type": "t_mapping(t_bytes32,t_mapping(t_address,t_bool))"
      },
      {
        "astId": 6228,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "lenderInterest",
        "offset": 0,
        "slot": "11",
        "type": "t_mapping(t_address,t_mapping(t_address,t_struct(LenderInterest)6508_storage))"
      },
      {
        "astId": 6232,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "loanInterest",
        "offset": 0,
        "slot": "12",
        "type": "t_mapping(t_bytes32,t_struct(LoanInterest)6518_storage)"
      },
      {
        "astId": 6234,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "logicTargetsSet",
        "offset": 0,
        "slot": "13",
        "type": "t_struct(Bytes32Set)36272_storage"
      },
      {
        "astId": 6236,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "activeLoansSet",
        "offset": 0,
        "slot": "15",
        "type": "t_struct(Bytes32Set)36272_storage"
      },
      {
        "astId": 6240,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "lenderLoanSets",
        "offset": 0,
        "slot": "17",
        "type": "t_mapping(t_address,t_struct(Bytes32Set)36272_storage)"
      },
      {
        "astId": 6244,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "borrowerLoanSets",
        "offset": 0,
        "slot": "18",
        "type": "t_mapping(t_address,t_struct(Bytes32Set)36272_storage)"
      },
      {
        "astId": 6248,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "userLoanParamSets",
        "offset": 0,
        "slot": "19",
        "type": "t_mapping(t_address,t_struct(Bytes32Set)36272_storage)"
      },
      {
        "astId": 6250,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "feesController",
        "offset": 0,
        "slot": "20",
        "type": "t_address"
      },
      {
        "astId": 6255,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "lendingFeePercent",
        "offset": 0,
        "slot": "21",
        "type": "t_uint256"
      },
      {
        "astId": 6259,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "lendingFeeTokensHeld",
        "offset": 0,
        "slot": "22",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 6263,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "lendingFeeTokensPaid",
        "offset": 0,
        "slot": "23",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 6270,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "tradingFeePercent",
        "offset": 0,
        "slot": "24",
        "type": "t_uint256"
      },
      {
        "astId": 6274,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "tradingFeeTokensHeld",
        "offset": 0,
        "slot": "25",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 6278,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "tradingFeeTokensPaid",
        "offset": 0,
        "slot": "26",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 6285,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "borrowingFeePercent",
        "offset": 0,
        "slot": "27",
        "type": "t_uint256"
      },
      {
        "astId": 6289,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "borrowingFeeTokensHeld",
        "offset": 0,
        "slot": "28",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 6293,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "borrowingFeeTokensPaid",
        "offset": 0,
        "slot": "29",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 6295,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "protocolTokenHeld",
        "offset": 0,
        "slot": "30",
        "type": "t_uint256"
      },
      {
        "astId": 6297,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "protocolTokenPaid",
        "offset": 0,
        "slot": "31",
        "type": "t_uint256"
      },
      {
        "astId": 6304,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "affiliateFeePercent",
        "offset": 0,
        "slot": "32",
        "type": "t_uint256"
      },
      {
        "astId": 6311,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "liquidationIncentivePercent",
        "offset": 0,
        "slot": "33",
        "type": "t_uint256"
      },
      {
        "astId": 6315,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "loanPoolToUnderlying",
        "offset": 0,
        "slot": "34",
        "type": "t_mapping(t_address,t_address)"
      },
      {
        "astId": 6319,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "underlyingToLoanPool",
        "offset": 0,
        "slot": "35",
        "type": "t_mapping(t_address,t_address)"
      },
      {
        "astId": 6321,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "loanPoolsSet",
        "offset": 0,
        "slot": "36",
        "type": "t_struct(Bytes32Set)36272_storage"
      },
      {
        "astId": 6325,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "supportedTokens",
        "offset": 0,
        "slot": "38",
        "type": "t_mapping(t_address,t_bool)"
      },
      {
        "astId": 6332,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "maxDisagreement",
        "offset": 0,
        "slot": "39",
        "type": "t_uint256"
      },
      {
        "astId": 6335,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "sourceBuffer",
        "offset": 0,
        "slot": "40",
        "type": "t_uint256"
      },
      {
        "astId": 6338,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "maxSwapSize",
        "offset": 0,
        "slot": "41",
        "type": "t_uint256"
      },
      {
        "astId": 6342,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "borrowerNonce",
        "offset": 0,
        "slot": "42",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 6345,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "rolloverBaseReward",
        "offset": 0,
        "slot": "43",
        "type": "t_uint256"
      },
      {
        "astId": 6348,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "rolloverFlexFeePercent",
        "offset": 0,
        "slot": "44",
        "type": "t_uint256"
      },
      {
        "astId": 6350,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "wrbtcToken",
        "offset": 0,
        "slot": "45",
        "type": "t_contract(IWrbtcERC20)35073"
      },
      {
        "astId": 6352,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "protocolTokenAddress",
        "offset": 0,
        "slot": "46",
        "type": "t_address"
      },
      {
        "astId": 6359,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "feeRebatePercent",
        "offset": 0,
        "slot": "47",
        "type": "t_uint256"
      },
      {
        "astId": 6361,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "admin",
        "offset": 0,
        "slot": "48",
        "type": "t_address"
      },
      {
        "astId": 6363,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "protocolAddress",
        "offset": 0,
        "slot": "49",
        "type": "t_address"
      },
      {
        "astId": 6367,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "userNotFirstTradeFlag",
        "offset": 0,
        "slot": "50",
        "type": "t_mapping(t_address,t_bool)"
      },
      {
        "astId": 6371,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "affiliatesUserReferrer",
        "offset": 0,
        "slot": "51",
        "type": "t_mapping(t_address,t_address)"
      },
      {
        "astId": 6375,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "referralsList",
        "offset": 0,
        "slot": "52",
        "type": "t_mapping(t_address,t_struct(AddressSet)35966_storage)"
      },
      {
        "astId": 6378,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "minReferralsToPayout",
        "offset": 0,
        "slot": "53",
        "type": "t_uint256"
      },
      {
        "astId": 6382,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "affiliateRewardsHeld",
        "offset": 0,
        "slot": "54",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 6384,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "sovTokenAddress",
        "offset": 0,
        "slot": "55",
        "type": "t_address"
      },
      {
        "astId": 6386,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "lockedSOVAddress",
        "offset": 0,
        "slot": "56",
        "type": "t_address"
      },
      {
        "astId": 6393,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "affiliateTradingTokenFeePercent",
        "offset": 0,
        "slot": "57",
        "type": "t_uint256"
      },
      {
        "astId": 6397,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "affiliatesReferrerTokensList",
        "offset": 0,
        "slot": "58",
        "type": "t_mapping(t_address,t_struct(AddressSet)35966_storage)"
      },
      {
        "astId": 6403,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "affiliatesReferrerBalances",
        "offset": 0,
        "slot": "59",
        "type": "t_mapping(t_address,t_mapping(t_address,t_uint256))"
      },
      {
        "astId": 6409,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "specialRebates",
        "offset": 0,
        "slot": "60",
        "type": "t_mapping(t_address,t_mapping(t_address,t_uint256))"
      },
      {
        "astId": 6411,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "pause",
        "offset": 0,
        "slot": "61",
        "type": "t_bool"
      },
      {
        "astId": 6413,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "swapExtrernalFeePercent",
        "offset": 0,
        "slot": "62",
        "type": "t_uint256"
      },
      {
        "astId": 6415,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "tradingRebateRewardsBasisPoint",
        "offset": 0,
        "slot": "63",
        "type": "t_uint256"
      },
      {
        "astId": 6422,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "defaultPathConversion",
        "offset": 0,
        "slot": "64",
        "type": "t_mapping(t_address,t_mapping(t_address,t_array(t_contract(IERC20)33292)dyn_storage))"
      },
      {
        "astId": 6424,
        "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
        "label": "pauser",
        "offset": 0,
        "slot": "65",
        "type": "t_address"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_address)dyn_storage": {
        "base": "t_address",
        "encoding": "dynamic_array",
        "label": "address[]",
        "numberOfBytes": "32"
      },
      "t_array(t_bytes32)dyn_storage": {
        "base": "t_bytes32",
        "encoding": "dynamic_array",
        "label": "bytes32[]",
        "numberOfBytes": "32"
      },
      "t_array(t_contract(IERC20)33292)dyn_storage": {
        "base": "t_contract(IERC20)33292",
        "encoding": "dynamic_array",
        "label": "contract IERC20[]",
        "numberOfBytes": "32"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_bytes32": {
        "encoding": "inplace",
        "label": "bytes32",
        "numberOfBytes": "32"
      },
      "t_bytes4": {
        "encoding": "inplace",
        "label": "bytes4",
        "numberOfBytes": "4"
      },
      "t_contract(IERC20)33292": {
        "encoding": "inplace",
        "label": "contract IERC20",
        "numberOfBytes": "20"
      },
      "t_contract(IWrbtcERC20)35073": {
        "encoding": "inplace",
        "label": "contract IWrbtcERC20",
        "numberOfBytes": "20"
      },
      "t_mapping(t_address,t_address)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => address)",
        "numberOfBytes": "32",
        "value": "t_address"
      },
      "t_mapping(t_address,t_array(t_contract(IERC20)33292)dyn_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => contract IERC20[])",
        "numberOfBytes": "32",
        "value": "t_array(t_contract(IERC20)33292)dyn_storage"
      },
      "t_mapping(t_address,t_bool)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => bool)",
        "numberOfBytes": "32",
        "value": "t_bool"
      },
      "t_mapping(t_address,t_mapping(t_address,t_array(t_contract(IERC20)33292)dyn_storage))": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => mapping(address => contract IERC20[]))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_address,t_array(t_contract(IERC20)33292)dyn_storage)"
      },
      "t_mapping(t_address,t_mapping(t_address,t_struct(LenderInterest)6508_storage))": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => mapping(address => struct LenderInterestStruct.LenderInterest))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_address,t_struct(LenderInterest)6508_storage)"
      },
      "t_mapping(t_address,t_mapping(t_address,t_uint256))": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => mapping(address => uint256))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_address,t_uint256)"
      },
      "t_mapping(t_address,t_mapping(t_bytes32,t_struct(Order)6582_storage))": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => mapping(bytes32 => struct OrderStruct.Order))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_bytes32,t_struct(Order)6582_storage)"
      },
      "t_mapping(t_address,t_struct(AddressSet)35966_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => struct EnumerableAddressSet.AddressSet)",
        "numberOfBytes": "32",
        "value": "t_struct(AddressSet)35966_storage"
      },
      "t_mapping(t_address,t_struct(Bytes32Set)36272_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => struct EnumerableBytes32Set.Bytes32Set)",
        "numberOfBytes": "32",
        "value": "t_struct(Bytes32Set)36272_storage"
      },
      "t_mapping(t_address,t_struct(LenderInterest)6508_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => struct LenderInterestStruct.LenderInterest)",
        "numberOfBytes": "32",
        "value": "t_struct(LenderInterest)6508_storage"
      },
      "t_mapping(t_address,t_uint256)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => uint256)",
        "numberOfBytes": "32",
        "value": "t_uint256"
      },
      "t_mapping(t_bytes32,t_mapping(t_address,t_bool))": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => mapping(address => bool))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_address,t_bool)"
      },
      "t_mapping(t_bytes32,t_struct(Loan)6566_storage)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => struct LoanStruct.Loan)",
        "numberOfBytes": "32",
        "value": "t_struct(Loan)6566_storage"
      },
      "t_mapping(t_bytes32,t_struct(LoanInterest)6518_storage)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => struct LoanInterestStruct.LoanInterest)",
        "numberOfBytes": "32",
        "value": "t_struct(LoanInterest)6518_storage"
      },
      "t_mapping(t_bytes32,t_struct(LoanParams)6538_storage)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => struct LoanParamsStruct.LoanParams)",
        "numberOfBytes": "32",
        "value": "t_struct(LoanParams)6538_storage"
      },
      "t_mapping(t_bytes32,t_struct(Order)6582_storage)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => struct OrderStruct.Order)",
        "numberOfBytes": "32",
        "value": "t_struct(Order)6582_storage"
      },
      "t_mapping(t_bytes32,t_uint256)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => uint256)",
        "numberOfBytes": "32",
        "value": "t_uint256"
      },
      "t_mapping(t_bytes4,t_address)": {
        "encoding": "mapping",
        "key": "t_bytes4",
        "label": "mapping(bytes4 => address)",
        "numberOfBytes": "32",
        "value": "t_address"
      },
      "t_struct(AddressSet)35966_storage": {
        "encoding": "inplace",
        "label": "struct EnumerableAddressSet.AddressSet",
        "members": [
          {
            "astId": 35962,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "index",
            "offset": 0,
            "slot": "0",
            "type": "t_mapping(t_address,t_uint256)"
          },
          {
            "astId": 35965,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "values",
            "offset": 0,
            "slot": "1",
            "type": "t_array(t_address)dyn_storage"
          }
        ],
        "numberOfBytes": "64"
      },
      "t_struct(Bytes32Set)36272_storage": {
        "encoding": "inplace",
        "label": "struct EnumerableBytes32Set.Bytes32Set",
        "members": [
          {
            "astId": 36268,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "index",
            "offset": 0,
            "slot": "0",
            "type": "t_mapping(t_bytes32,t_uint256)"
          },
          {
            "astId": 36271,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "values",
            "offset": 0,
            "slot": "1",
            "type": "t_array(t_bytes32)dyn_storage"
          }
        ],
        "numberOfBytes": "64"
      },
      "t_struct(LenderInterest)6508_storage": {
        "encoding": "inplace",
        "label": "struct LenderInterestStruct.LenderInterest",
        "members": [
          {
            "astId": 6499,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "principalTotal",
            "offset": 0,
            "slot": "0",
            "type": "t_uint256"
          },
          {
            "astId": 6501,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "owedPerDay",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 6503,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "owedTotal",
            "offset": 0,
            "slot": "2",
            "type": "t_uint256"
          },
          {
            "astId": 6505,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "paidTotal",
            "offset": 0,
            "slot": "3",
            "type": "t_uint256"
          },
          {
            "astId": 6507,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "updatedTimestamp",
            "offset": 0,
            "slot": "4",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "160"
      },
      "t_struct(Loan)6566_storage": {
        "encoding": "inplace",
        "label": "struct LoanStruct.Loan",
        "members": [
          {
            "astId": 6543,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "id",
            "offset": 0,
            "slot": "0",
            "type": "t_bytes32"
          },
          {
            "astId": 6545,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "loanParamsId",
            "offset": 0,
            "slot": "1",
            "type": "t_bytes32"
          },
          {
            "astId": 6547,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "pendingTradesId",
            "offset": 0,
            "slot": "2",
            "type": "t_bytes32"
          },
          {
            "astId": 6549,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "active",
            "offset": 0,
            "slot": "3",
            "type": "t_bool"
          },
          {
            "astId": 6551,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "principal",
            "offset": 0,
            "slot": "4",
            "type": "t_uint256"
          },
          {
            "astId": 6553,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "collateral",
            "offset": 0,
            "slot": "5",
            "type": "t_uint256"
          },
          {
            "astId": 6555,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "startTimestamp",
            "offset": 0,
            "slot": "6",
            "type": "t_uint256"
          },
          {
            "astId": 6557,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "endTimestamp",
            "offset": 0,
            "slot": "7",
            "type": "t_uint256"
          },
          {
            "astId": 6559,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "startMargin",
            "offset": 0,
            "slot": "8",
            "type": "t_uint256"
          },
          {
            "astId": 6561,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "startRate",
            "offset": 0,
            "slot": "9",
            "type": "t_uint256"
          },
          {
            "astId": 6563,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "borrower",
            "offset": 0,
            "slot": "10",
            "type": "t_address"
          },
          {
            "astId": 6565,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "lender",
            "offset": 0,
            "slot": "11",
            "type": "t_address"
          }
        ],
        "numberOfBytes": "384"
      },
      "t_struct(LoanInterest)6518_storage": {
        "encoding": "inplace",
        "label": "struct LoanInterestStruct.LoanInterest",
        "members": [
          {
            "astId": 6513,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "owedPerDay",
            "offset": 0,
            "slot": "0",
            "type": "t_uint256"
          },
          {
            "astId": 6515,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "depositTotal",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 6517,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "updatedTimestamp",
            "offset": 0,
            "slot": "2",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "96"
      },
      "t_struct(LoanParams)6538_storage": {
        "encoding": "inplace",
        "label": "struct LoanParamsStruct.LoanParams",
        "members": [
          {
            "astId": 6523,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "id",
            "offset": 0,
            "slot": "0",
            "type": "t_bytes32"
          },
          {
            "astId": 6525,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "active",
            "offset": 0,
            "slot": "1",
            "type": "t_bool"
          },
          {
            "astId": 6527,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "owner",
            "offset": 1,
            "slot": "1",
            "type": "t_address"
          },
          {
            "astId": 6529,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "loanToken",
            "offset": 0,
            "slot": "2",
            "type": "t_address"
          },
          {
            "astId": 6531,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "collateralToken",
            "offset": 0,
            "slot": "3",
            "type": "t_address"
          },
          {
            "astId": 6533,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "minInitialMargin",
            "offset": 0,
            "slot": "4",
            "type": "t_uint256"
          },
          {
            "astId": 6535,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "maintenanceMargin",
            "offset": 0,
            "slot": "5",
            "type": "t_uint256"
          },
          {
            "astId": 6537,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "maxLoanTerm",
            "offset": 0,
            "slot": "6",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "224"
      },
      "t_struct(Order)6582_storage": {
        "encoding": "inplace",
        "label": "struct OrderStruct.Order",
        "members": [
          {
            "astId": 6571,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "lockedAmount",
            "offset": 0,
            "slot": "0",
            "type": "t_uint256"
          },
          {
            "astId": 6573,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "interestRate",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 6575,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "minLoanTerm",
            "offset": 0,
            "slot": "2",
            "type": "t_uint256"
          },
          {
            "astId": 6577,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "maxLoanTerm",
            "offset": 0,
            "slot": "3",
            "type": "t_uint256"
          },
          {
            "astId": 6579,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "createdTimestamp",
            "offset": 0,
            "slot": "4",
            "type": "t_uint256"
          },
          {
            "astId": 6581,
            "contract": "contracts/modules/LoanOpenings.sol:LoanOpenings",
            "label": "expirationTimestamp",
            "offset": 0,
            "slot": "5",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "192"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}